function IA(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function d1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var G2={exports:{}},Ep={},W2={exports:{}},St={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xc=Symbol.for("react.element"),NA=Symbol.for("react.portal"),UA=Symbol.for("react.fragment"),DA=Symbol.for("react.strict_mode"),OA=Symbol.for("react.profiler"),FA=Symbol.for("react.provider"),kA=Symbol.for("react.context"),zA=Symbol.for("react.forward_ref"),BA=Symbol.for("react.suspense"),HA=Symbol.for("react.memo"),VA=Symbol.for("react.lazy"),Ux=Symbol.iterator;function GA(n){return n===null||typeof n!="object"?null:(n=Ux&&n[Ux]||n["@@iterator"],typeof n=="function"?n:null)}var X2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j2=Object.assign,Y2={};function Vl(n,e,t){this.props=n,this.context=e,this.refs=Y2,this.updater=t||X2}Vl.prototype.isReactComponent={};Vl.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Vl.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function q2(){}q2.prototype=Vl.prototype;function p1(n,e,t){this.props=n,this.context=e,this.refs=Y2,this.updater=t||X2}var m1=p1.prototype=new q2;m1.constructor=p1;j2(m1,Vl.prototype);m1.isPureReactComponent=!0;var Dx=Array.isArray,Z2=Object.prototype.hasOwnProperty,g1={current:null},J2={key:!0,ref:!0,__self:!0,__source:!0};function K2(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Z2.call(e,i)&&!J2.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){for(var c=Array(l),f=0;f<l;f++)c[f]=arguments[f+2];r.children=c}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:Xc,type:n,key:s,ref:o,props:r,_owner:g1.current}}function WA(n,e){return{$$typeof:Xc,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function v1(n){return typeof n=="object"&&n!==null&&n.$$typeof===Xc}function XA(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Ox=/\/+/g;function fg(n,e){return typeof n=="object"&&n!==null&&n.key!=null?XA(""+n.key):e.toString(36)}function Sd(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Xc:case NA:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+fg(o,0):i,Dx(r)?(t="",n!=null&&(t=n.replace(Ox,"$&/")+"/"),Sd(r,e,t,"",function(f){return f})):r!=null&&(v1(r)&&(r=WA(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Ox,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Dx(n))for(var l=0;l<n.length;l++){s=n[l];var c=i+fg(s,l);o+=Sd(s,e,t,c,r)}else if(c=GA(n),typeof c=="function")for(n=c.call(n),l=0;!(s=n.next()).done;)s=s.value,c=i+fg(s,l++),o+=Sd(s,e,t,c,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function mh(n,e,t){if(n==null)return n;var i=[],r=0;return Sd(n,i,"","",function(s){return e.call(t,s,r++)}),i}function jA(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var si={current:null},Md={transition:null},YA={ReactCurrentDispatcher:si,ReactCurrentBatchConfig:Md,ReactCurrentOwner:g1};St.Children={map:mh,forEach:function(n,e,t){mh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return mh(n,function(){e++}),e},toArray:function(n){return mh(n,function(e){return e})||[]},only:function(n){if(!v1(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};St.Component=Vl;St.Fragment=UA;St.Profiler=OA;St.PureComponent=p1;St.StrictMode=DA;St.Suspense=BA;St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YA;St.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=j2({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=g1.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)Z2.call(e,c)&&!J2.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=t;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];i.children=l}return{$$typeof:Xc,type:n.type,key:r,ref:s,props:i,_owner:o}};St.createContext=function(n){return n={$$typeof:kA,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:FA,_context:n},n.Consumer=n};St.createElement=K2;St.createFactory=function(n){var e=K2.bind(null,n);return e.type=n,e};St.createRef=function(){return{current:null}};St.forwardRef=function(n){return{$$typeof:zA,render:n}};St.isValidElement=v1;St.lazy=function(n){return{$$typeof:VA,_payload:{_status:-1,_result:n},_init:jA}};St.memo=function(n,e){return{$$typeof:HA,type:n,compare:e===void 0?null:e}};St.startTransition=function(n){var e=Md.transition;Md.transition={};try{n()}finally{Md.transition=e}};St.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};St.useCallback=function(n,e){return si.current.useCallback(n,e)};St.useContext=function(n){return si.current.useContext(n)};St.useDebugValue=function(){};St.useDeferredValue=function(n){return si.current.useDeferredValue(n)};St.useEffect=function(n,e){return si.current.useEffect(n,e)};St.useId=function(){return si.current.useId()};St.useImperativeHandle=function(n,e,t){return si.current.useImperativeHandle(n,e,t)};St.useInsertionEffect=function(n,e){return si.current.useInsertionEffect(n,e)};St.useLayoutEffect=function(n,e){return si.current.useLayoutEffect(n,e)};St.useMemo=function(n,e){return si.current.useMemo(n,e)};St.useReducer=function(n,e,t){return si.current.useReducer(n,e,t)};St.useRef=function(n){return si.current.useRef(n)};St.useState=function(n){return si.current.useState(n)};St.useSyncExternalStore=function(n,e,t){return si.current.useSyncExternalStore(n,e,t)};St.useTransition=function(){return si.current.useTransition()};St.version="18.2.0";W2.exports=St;var K=W2.exports;const Q2=d1(K),Fx=IA({__proto__:null,default:Q2},[K]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qA=K,ZA=Symbol.for("react.element"),JA=Symbol.for("react.fragment"),KA=Object.prototype.hasOwnProperty,QA=qA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$A={key:!0,ref:!0,__self:!0,__source:!0};function $2(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)KA.call(e,i)&&!$A.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:ZA,type:n,key:s,ref:o,props:r,_owner:QA.current}}Ep.Fragment=JA;Ep.jsx=$2;Ep.jsxs=$2;G2.exports=Ep;var Ve=G2.exports,A0={},eE={exports:{}},Oi={},tE={exports:{}},nE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,H){var z=U.length;U.push(H);e:for(;0<z;){var te=z-1>>>1,B=U[te];if(0<r(B,H))U[te]=H,U[z]=B,z=te;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var H=U[0],z=U.pop();if(z!==H){U[0]=z;e:for(var te=0,B=U.length,he=B>>>1;te<he;){var se=2*(te+1)-1,Ee=U[se],ve=se+1,Ce=U[ve];if(0>r(Ee,z))ve<B&&0>r(Ce,Ee)?(U[te]=Ce,U[ve]=z,te=ve):(U[te]=Ee,U[se]=z,te=se);else if(ve<B&&0>r(Ce,z))U[te]=Ce,U[ve]=z,te=ve;else break e}}return H}function r(U,H){var z=U.sortIndex-H.sortIndex;return z!==0?z:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],f=[],h=1,d=null,m=3,v=!1,_=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var H=t(f);H!==null;){if(H.callback===null)i(f);else if(H.startTime<=U)i(f),H.sortIndex=H.expirationTime,e(c,H);else break;H=t(f)}}function T(U){if(E=!1,S(U),!_)if(t(c)!==null)_=!0,ae(A);else{var H=t(f);H!==null&&ne(T,H.startTime-U)}}function A(U,H){_=!1,E&&(E=!1,g(N),N=-1),v=!0;var z=m;try{for(S(H),d=t(c);d!==null&&(!(d.expirationTime>H)||U&&!G());){var te=d.callback;if(typeof te=="function"){d.callback=null,m=d.priorityLevel;var B=te(d.expirationTime<=H);H=n.unstable_now(),typeof B=="function"?d.callback=B:d===t(c)&&i(c),S(H)}else i(c);d=t(c)}if(d!==null)var he=!0;else{var se=t(f);se!==null&&ne(T,se.startTime-H),he=!1}return he}finally{d=null,m=z,v=!1}}var P=!1,L=null,N=-1,R=5,b=-1;function G(){return!(n.unstable_now()-b<R)}function J(){if(L!==null){var U=n.unstable_now();b=U;var H=!0;try{H=L(!0,U)}finally{H?j():(P=!1,L=null)}}else P=!1}var j;if(typeof x=="function")j=function(){x(J)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,$=Z.port2;Z.port1.onmessage=J,j=function(){$.postMessage(null)}}else j=function(){M(J,0)};function ae(U){L=U,P||(P=!0,j())}function ne(U,H){N=M(function(){U(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){_||v||(_=!0,ae(A))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(U){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var z=m;m=H;try{return U()}finally{m=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var z=m;m=U;try{return H()}finally{m=z}},n.unstable_scheduleCallback=function(U,H,z){var te=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?te+z:te):z=te,U){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=z+B,U={id:h++,callback:H,priorityLevel:U,startTime:z,expirationTime:B,sortIndex:-1},z>te?(U.sortIndex=z,e(f,U),t(c)===null&&U===t(f)&&(E?(g(N),N=-1):E=!0,ne(T,z-te))):(U.sortIndex=B,e(c,U),_||v||(_=!0,ae(A))),U},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(U){var H=m;return function(){var z=m;m=H;try{return U.apply(this,arguments)}finally{m=z}}}})(nE);tE.exports=nE;var eR=tE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE=K,Di=eR;function ye(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rE=new Set,lc={};function fa(n,e){bl(n,e),bl(n+"Capture",e)}function bl(n,e){for(lc[n]=e,n=0;n<e.length;n++)rE.add(e[n])}var hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),R0=Object.prototype.hasOwnProperty,tR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kx={},zx={};function nR(n){return R0.call(zx,n)?!0:R0.call(kx,n)?!1:tR.test(n)?zx[n]=!0:(kx[n]=!0,!1)}function iR(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function rR(n,e,t,i){if(e===null||typeof e>"u"||iR(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function oi(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Fn[n]=new oi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Fn[e]=new oi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Fn[n]=new oi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Fn[n]=new oi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Fn[n]=new oi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Fn[n]=new oi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Fn[n]=new oi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Fn[n]=new oi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Fn[n]=new oi(n,5,!1,n.toLowerCase(),null,!1,!1)});var y1=/[\-:]([a-z])/g;function _1(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(y1,_1);Fn[e]=new oi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(y1,_1);Fn[e]=new oi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(y1,_1);Fn[e]=new oi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Fn[n]=new oi(n,1,!1,n.toLowerCase(),null,!1,!1)});Fn.xlinkHref=new oi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Fn[n]=new oi(n,1,!1,n.toLowerCase(),null,!0,!0)});function x1(n,e,t,i){var r=Fn.hasOwnProperty(e)?Fn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rR(e,t,r,i)&&(t=null),i||r===null?nR(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var ys=iE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gh=Symbol.for("react.element"),rl=Symbol.for("react.portal"),sl=Symbol.for("react.fragment"),S1=Symbol.for("react.strict_mode"),P0=Symbol.for("react.profiler"),sE=Symbol.for("react.provider"),oE=Symbol.for("react.context"),M1=Symbol.for("react.forward_ref"),b0=Symbol.for("react.suspense"),L0=Symbol.for("react.suspense_list"),E1=Symbol.for("react.memo"),Fs=Symbol.for("react.lazy"),aE=Symbol.for("react.offscreen"),Bx=Symbol.iterator;function Su(n){return n===null||typeof n!="object"?null:(n=Bx&&n[Bx]||n["@@iterator"],typeof n=="function"?n:null)}var Qt=Object.assign,hg;function Hu(n){if(hg===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);hg=e&&e[1]||""}return`
`+hg+n}var dg=!1;function pg(n,e){if(!n||dg)return"";dg=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(n,[],e)}else{try{e.call()}catch(f){i=f}n.call(e.prototype)}else{try{throw Error()}catch(f){i=f}n()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,l=s.length-1;1<=o&&0<=l&&r[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==s[l]){var c=`
`+r[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=l);break}}}finally{dg=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Hu(n):""}function sR(n){switch(n.tag){case 5:return Hu(n.type);case 16:return Hu("Lazy");case 13:return Hu("Suspense");case 19:return Hu("SuspenseList");case 0:case 2:case 15:return n=pg(n.type,!1),n;case 11:return n=pg(n.type.render,!1),n;case 1:return n=pg(n.type,!0),n;default:return""}}function I0(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case sl:return"Fragment";case rl:return"Portal";case P0:return"Profiler";case S1:return"StrictMode";case b0:return"Suspense";case L0:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case oE:return(n.displayName||"Context")+".Consumer";case sE:return(n._context.displayName||"Context")+".Provider";case M1:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case E1:return e=n.displayName||null,e!==null?e:I0(n.type)||"Memo";case Fs:e=n._payload,n=n._init;try{return I0(n(e))}catch{}}return null}function oR(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I0(e);case 8:return e===S1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ro(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function lE(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aR(n){var e=lE(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function vh(n){n._valueTracker||(n._valueTracker=aR(n))}function uE(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=lE(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Gd(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function N0(n,e){var t=e.checked;return Qt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Hx(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=ro(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cE(n,e){e=e.checked,e!=null&&x1(n,"checked",e,!1)}function U0(n,e){cE(n,e);var t=ro(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?D0(n,e.type,t):e.hasOwnProperty("defaultValue")&&D0(n,e.type,ro(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Vx(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function D0(n,e,t){(e!=="number"||Gd(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Vu=Array.isArray;function Sl(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+ro(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function O0(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ye(91));return Qt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Gx(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ye(92));if(Vu(t)){if(1<t.length)throw Error(ye(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ro(t)}}function fE(n,e){var t=ro(e.value),i=ro(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function Wx(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function hE(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function F0(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?hE(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var yh,dE=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(yh=yh||document.createElement("div"),yh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function uc(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Yu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lR=["Webkit","ms","Moz","O"];Object.keys(Yu).forEach(function(n){lR.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Yu[e]=Yu[n]})});function pE(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Yu.hasOwnProperty(n)&&Yu[n]?(""+e).trim():e+"px"}function mE(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=pE(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var uR=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function k0(n,e){if(e){if(uR[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ye(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ye(62))}}function z0(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var B0=null;function w1(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var H0=null,Ml=null,El=null;function Xx(n){if(n=qc(n)){if(typeof H0!="function")throw Error(ye(280));var e=n.stateNode;e&&(e=Rp(e),H0(n.stateNode,n.type,e))}}function gE(n){Ml?El?El.push(n):El=[n]:Ml=n}function vE(){if(Ml){var n=Ml,e=El;if(El=Ml=null,Xx(n),e)for(n=0;n<e.length;n++)Xx(e[n])}}function yE(n,e){return n(e)}function _E(){}var mg=!1;function xE(n,e,t){if(mg)return n(e,t);mg=!0;try{return yE(n,e,t)}finally{mg=!1,(Ml!==null||El!==null)&&(_E(),vE())}}function cc(n,e){var t=n.stateNode;if(t===null)return null;var i=Rp(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ye(231,e,typeof t));return t}var V0=!1;if(hs)try{var Mu={};Object.defineProperty(Mu,"passive",{get:function(){V0=!0}}),window.addEventListener("test",Mu,Mu),window.removeEventListener("test",Mu,Mu)}catch{V0=!1}function cR(n,e,t,i,r,s,o,l,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(h){this.onError(h)}}var qu=!1,Wd=null,Xd=!1,G0=null,fR={onError:function(n){qu=!0,Wd=n}};function hR(n,e,t,i,r,s,o,l,c){qu=!1,Wd=null,cR.apply(fR,arguments)}function dR(n,e,t,i,r,s,o,l,c){if(hR.apply(this,arguments),qu){if(qu){var f=Wd;qu=!1,Wd=null}else throw Error(ye(198));Xd||(Xd=!0,G0=f)}}function ha(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function SE(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function jx(n){if(ha(n)!==n)throw Error(ye(188))}function pR(n){var e=n.alternate;if(!e){if(e=ha(n),e===null)throw Error(ye(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return jx(r),n;if(s===i)return jx(r),e;s=s.sibling}throw Error(ye(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===t){o=!0,t=r,i=s;break}if(l===i){o=!0,i=r,t=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===t){o=!0,t=s,i=r;break}if(l===i){o=!0,i=s,t=r;break}l=l.sibling}if(!o)throw Error(ye(189))}}if(t.alternate!==i)throw Error(ye(190))}if(t.tag!==3)throw Error(ye(188));return t.stateNode.current===t?n:e}function ME(n){return n=pR(n),n!==null?EE(n):null}function EE(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=EE(n);if(e!==null)return e;n=n.sibling}return null}var wE=Di.unstable_scheduleCallback,Yx=Di.unstable_cancelCallback,mR=Di.unstable_shouldYield,gR=Di.unstable_requestPaint,fn=Di.unstable_now,vR=Di.unstable_getCurrentPriorityLevel,T1=Di.unstable_ImmediatePriority,TE=Di.unstable_UserBlockingPriority,jd=Di.unstable_NormalPriority,yR=Di.unstable_LowPriority,CE=Di.unstable_IdlePriority,wp=null,zr=null;function _R(n){if(zr&&typeof zr.onCommitFiberRoot=="function")try{zr.onCommitFiberRoot(wp,n,void 0,(n.current.flags&128)===128)}catch{}}var mr=Math.clz32?Math.clz32:MR,xR=Math.log,SR=Math.LN2;function MR(n){return n>>>=0,n===0?32:31-(xR(n)/SR|0)|0}var _h=64,xh=4194304;function Gu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Yd(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var l=o&~r;l!==0?i=Gu(l):(s&=o,s!==0&&(i=Gu(s)))}else o=t&~r,o!==0?i=Gu(o):s!==0&&(i=Gu(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-mr(e),r=1<<t,i|=n[t],e&=~r;return i}function ER(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wR(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-mr(s),l=1<<o,c=r[o];c===-1?(!(l&t)||l&i)&&(r[o]=ER(l,e)):c<=e&&(n.expiredLanes|=l),s&=~l}}function W0(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function AE(){var n=_h;return _h<<=1,!(_h&4194240)&&(_h=64),n}function gg(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function jc(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-mr(e),n[e]=t}function TR(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-mr(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function C1(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-mr(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Nt=0;function RE(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var PE,A1,bE,LE,IE,X0=!1,Sh=[],Xs=null,js=null,Ys=null,fc=new Map,hc=new Map,Bs=[],CR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qx(n,e){switch(n){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":fc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(e.pointerId)}}function Eu(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=qc(e),e!==null&&A1(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function AR(n,e,t,i,r){switch(e){case"focusin":return Xs=Eu(Xs,n,e,t,i,r),!0;case"dragenter":return js=Eu(js,n,e,t,i,r),!0;case"mouseover":return Ys=Eu(Ys,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return fc.set(s,Eu(fc.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,hc.set(s,Eu(hc.get(s)||null,n,e,t,i,r)),!0}return!1}function NE(n){var e=Vo(n.target);if(e!==null){var t=ha(e);if(t!==null){if(e=t.tag,e===13){if(e=SE(t),e!==null){n.blockedOn=e,IE(n.priority,function(){bE(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ed(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=j0(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);B0=i,t.target.dispatchEvent(i),B0=null}else return e=qc(t),e!==null&&A1(e),n.blockedOn=t,!1;e.shift()}return!0}function Zx(n,e,t){Ed(n)&&t.delete(e)}function RR(){X0=!1,Xs!==null&&Ed(Xs)&&(Xs=null),js!==null&&Ed(js)&&(js=null),Ys!==null&&Ed(Ys)&&(Ys=null),fc.forEach(Zx),hc.forEach(Zx)}function wu(n,e){n.blockedOn===e&&(n.blockedOn=null,X0||(X0=!0,Di.unstable_scheduleCallback(Di.unstable_NormalPriority,RR)))}function dc(n){function e(r){return wu(r,n)}if(0<Sh.length){wu(Sh[0],n);for(var t=1;t<Sh.length;t++){var i=Sh[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Xs!==null&&wu(Xs,n),js!==null&&wu(js,n),Ys!==null&&wu(Ys,n),fc.forEach(e),hc.forEach(e),t=0;t<Bs.length;t++)i=Bs[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Bs.length&&(t=Bs[0],t.blockedOn===null);)NE(t),t.blockedOn===null&&Bs.shift()}var wl=ys.ReactCurrentBatchConfig,qd=!0;function PR(n,e,t,i){var r=Nt,s=wl.transition;wl.transition=null;try{Nt=1,R1(n,e,t,i)}finally{Nt=r,wl.transition=s}}function bR(n,e,t,i){var r=Nt,s=wl.transition;wl.transition=null;try{Nt=4,R1(n,e,t,i)}finally{Nt=r,wl.transition=s}}function R1(n,e,t,i){if(qd){var r=j0(n,e,t,i);if(r===null)Cg(n,e,i,Zd,t),qx(n,i);else if(AR(r,n,e,t,i))i.stopPropagation();else if(qx(n,i),e&4&&-1<CR.indexOf(n)){for(;r!==null;){var s=qc(r);if(s!==null&&PE(s),s=j0(n,e,t,i),s===null&&Cg(n,e,i,Zd,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Cg(n,e,i,null,t)}}var Zd=null;function j0(n,e,t,i){if(Zd=null,n=w1(i),n=Vo(n),n!==null)if(e=ha(n),e===null)n=null;else if(t=e.tag,t===13){if(n=SE(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Zd=n,null}function UE(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vR()){case T1:return 1;case TE:return 4;case jd:case yR:return 16;case CE:return 536870912;default:return 16}default:return 16}}var Vs=null,P1=null,wd=null;function DE(){if(wd)return wd;var n,e=P1,t=e.length,i,r="value"in Vs?Vs.value:Vs.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return wd=r.slice(n,1<i?1-i:void 0)}function Td(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Mh(){return!0}function Jx(){return!1}function Fi(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Mh:Jx,this.isPropagationStopped=Jx,this}return Qt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Mh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Mh)},persist:function(){},isPersistent:Mh}),e}var Gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},b1=Fi(Gl),Yc=Qt({},Gl,{view:0,detail:0}),LR=Fi(Yc),vg,yg,Tu,Tp=Qt({},Yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:L1,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Tu&&(Tu&&n.type==="mousemove"?(vg=n.screenX-Tu.screenX,yg=n.screenY-Tu.screenY):yg=vg=0,Tu=n),vg)},movementY:function(n){return"movementY"in n?n.movementY:yg}}),Kx=Fi(Tp),IR=Qt({},Tp,{dataTransfer:0}),NR=Fi(IR),UR=Qt({},Yc,{relatedTarget:0}),_g=Fi(UR),DR=Qt({},Gl,{animationName:0,elapsedTime:0,pseudoElement:0}),OR=Fi(DR),FR=Qt({},Gl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),kR=Fi(FR),zR=Qt({},Gl,{data:0}),Qx=Fi(zR),BR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GR(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=VR[n])?!!e[n]:!1}function L1(){return GR}var WR=Qt({},Yc,{key:function(n){if(n.key){var e=BR[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Td(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?HR[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:L1,charCode:function(n){return n.type==="keypress"?Td(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Td(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),XR=Fi(WR),jR=Qt({},Tp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$x=Fi(jR),YR=Qt({},Yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:L1}),qR=Fi(YR),ZR=Qt({},Gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),JR=Fi(ZR),KR=Qt({},Tp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),QR=Fi(KR),$R=[9,13,27,32],I1=hs&&"CompositionEvent"in window,Zu=null;hs&&"documentMode"in document&&(Zu=document.documentMode);var eP=hs&&"TextEvent"in window&&!Zu,OE=hs&&(!I1||Zu&&8<Zu&&11>=Zu),eS=String.fromCharCode(32),tS=!1;function FE(n,e){switch(n){case"keyup":return $R.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kE(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ol=!1;function tP(n,e){switch(n){case"compositionend":return kE(e);case"keypress":return e.which!==32?null:(tS=!0,eS);case"textInput":return n=e.data,n===eS&&tS?null:n;default:return null}}function nP(n,e){if(ol)return n==="compositionend"||!I1&&FE(n,e)?(n=DE(),wd=P1=Vs=null,ol=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return OE&&e.locale!=="ko"?null:e.data;default:return null}}var iP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nS(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!iP[n.type]:e==="textarea"}function zE(n,e,t,i){gE(i),e=Jd(e,"onChange"),0<e.length&&(t=new b1("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Ju=null,pc=null;function rP(n){JE(n,0)}function Cp(n){var e=ul(n);if(uE(e))return n}function sP(n,e){if(n==="change")return e}var BE=!1;if(hs){var xg;if(hs){var Sg="oninput"in document;if(!Sg){var iS=document.createElement("div");iS.setAttribute("oninput","return;"),Sg=typeof iS.oninput=="function"}xg=Sg}else xg=!1;BE=xg&&(!document.documentMode||9<document.documentMode)}function rS(){Ju&&(Ju.detachEvent("onpropertychange",HE),pc=Ju=null)}function HE(n){if(n.propertyName==="value"&&Cp(pc)){var e=[];zE(e,pc,n,w1(n)),xE(rP,e)}}function oP(n,e,t){n==="focusin"?(rS(),Ju=e,pc=t,Ju.attachEvent("onpropertychange",HE)):n==="focusout"&&rS()}function aP(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Cp(pc)}function lP(n,e){if(n==="click")return Cp(e)}function uP(n,e){if(n==="input"||n==="change")return Cp(e)}function cP(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var yr=typeof Object.is=="function"?Object.is:cP;function mc(n,e){if(yr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!R0.call(e,r)||!yr(n[r],e[r]))return!1}return!0}function sS(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function oS(n,e){var t=sS(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=sS(t)}}function VE(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?VE(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function GE(){for(var n=window,e=Gd();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Gd(n.document)}return e}function N1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function fP(n){var e=GE(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&VE(t.ownerDocument.documentElement,t)){if(i!==null&&N1(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=oS(t,s);var o=oS(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var hP=hs&&"documentMode"in document&&11>=document.documentMode,al=null,Y0=null,Ku=null,q0=!1;function aS(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;q0||al==null||al!==Gd(i)||(i=al,"selectionStart"in i&&N1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ku&&mc(Ku,i)||(Ku=i,i=Jd(Y0,"onSelect"),0<i.length&&(e=new b1("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=al)))}function Eh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ll={animationend:Eh("Animation","AnimationEnd"),animationiteration:Eh("Animation","AnimationIteration"),animationstart:Eh("Animation","AnimationStart"),transitionend:Eh("Transition","TransitionEnd")},Mg={},WE={};hs&&(WE=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function Ap(n){if(Mg[n])return Mg[n];if(!ll[n])return n;var e=ll[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in WE)return Mg[n]=e[t];return n}var XE=Ap("animationend"),jE=Ap("animationiteration"),YE=Ap("animationstart"),qE=Ap("transitionend"),ZE=new Map,lS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function co(n,e){ZE.set(n,e),fa(e,[n])}for(var Eg=0;Eg<lS.length;Eg++){var wg=lS[Eg],dP=wg.toLowerCase(),pP=wg[0].toUpperCase()+wg.slice(1);co(dP,"on"+pP)}co(XE,"onAnimationEnd");co(jE,"onAnimationIteration");co(YE,"onAnimationStart");co("dblclick","onDoubleClick");co("focusin","onFocus");co("focusout","onBlur");co(qE,"onTransitionEnd");bl("onMouseEnter",["mouseout","mouseover"]);bl("onMouseLeave",["mouseout","mouseover"]);bl("onPointerEnter",["pointerout","pointerover"]);bl("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wu));function uS(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,dR(i,e,void 0,n),n.currentTarget=null}function JE(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],c=l.instance,f=l.currentTarget;if(l=l.listener,c!==s&&r.isPropagationStopped())break e;uS(r,l,f),s=c}else for(o=0;o<i.length;o++){if(l=i[o],c=l.instance,f=l.currentTarget,l=l.listener,c!==s&&r.isPropagationStopped())break e;uS(r,l,f),s=c}}}if(Xd)throw n=G0,Xd=!1,G0=null,n}function Vt(n,e){var t=e[$0];t===void 0&&(t=e[$0]=new Set);var i=n+"__bubble";t.has(i)||(KE(e,n,2,!1),t.add(i))}function Tg(n,e,t){var i=0;e&&(i|=4),KE(t,n,i,e)}var wh="_reactListening"+Math.random().toString(36).slice(2);function gc(n){if(!n[wh]){n[wh]=!0,rE.forEach(function(t){t!=="selectionchange"&&(mP.has(t)||Tg(t,!1,n),Tg(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[wh]||(e[wh]=!0,Tg("selectionchange",!1,e))}}function KE(n,e,t,i){switch(UE(e)){case 1:var r=PR;break;case 4:r=bR;break;default:r=R1}t=r.bind(null,e,t,n),r=void 0,!V0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Cg(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=Vo(l),o===null)return;if(c=o.tag,c===5||c===6){i=s=o;continue e}l=l.parentNode}}i=i.return}xE(function(){var f=s,h=w1(t),d=[];e:{var m=ZE.get(n);if(m!==void 0){var v=b1,_=n;switch(n){case"keypress":if(Td(t)===0)break e;case"keydown":case"keyup":v=XR;break;case"focusin":_="focus",v=_g;break;case"focusout":_="blur",v=_g;break;case"beforeblur":case"afterblur":v=_g;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Kx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=NR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=qR;break;case XE:case jE:case YE:v=OR;break;case qE:v=JR;break;case"scroll":v=LR;break;case"wheel":v=QR;break;case"copy":case"cut":case"paste":v=kR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=$x}var E=(e&4)!==0,M=!E&&n==="scroll",g=E?m!==null?m+"Capture":null:m;E=[];for(var x=f,S;x!==null;){S=x;var T=S.stateNode;if(S.tag===5&&T!==null&&(S=T,g!==null&&(T=cc(x,g),T!=null&&E.push(vc(x,T,S)))),M)break;x=x.return}0<E.length&&(m=new v(m,_,null,t,h),d.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",v=n==="mouseout"||n==="pointerout",m&&t!==B0&&(_=t.relatedTarget||t.fromElement)&&(Vo(_)||_[ds]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(_=t.relatedTarget||t.toElement,v=f,_=_?Vo(_):null,_!==null&&(M=ha(_),_!==M||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=f),v!==_)){if(E=Kx,T="onMouseLeave",g="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(E=$x,T="onPointerLeave",g="onPointerEnter",x="pointer"),M=v==null?m:ul(v),S=_==null?m:ul(_),m=new E(T,x+"leave",v,t,h),m.target=M,m.relatedTarget=S,T=null,Vo(h)===f&&(E=new E(g,x+"enter",_,t,h),E.target=S,E.relatedTarget=M,T=E),M=T,v&&_)t:{for(E=v,g=_,x=0,S=E;S;S=La(S))x++;for(S=0,T=g;T;T=La(T))S++;for(;0<x-S;)E=La(E),x--;for(;0<S-x;)g=La(g),S--;for(;x--;){if(E===g||g!==null&&E===g.alternate)break t;E=La(E),g=La(g)}E=null}else E=null;v!==null&&cS(d,m,v,E,!1),_!==null&&M!==null&&cS(d,M,_,E,!0)}}e:{if(m=f?ul(f):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var A=sP;else if(nS(m))if(BE)A=uP;else{A=aP;var P=oP}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(A=lP);if(A&&(A=A(n,f))){zE(d,A,t,h);break e}P&&P(n,m,f),n==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&D0(m,"number",m.value)}switch(P=f?ul(f):window,n){case"focusin":(nS(P)||P.contentEditable==="true")&&(al=P,Y0=f,Ku=null);break;case"focusout":Ku=Y0=al=null;break;case"mousedown":q0=!0;break;case"contextmenu":case"mouseup":case"dragend":q0=!1,aS(d,t,h);break;case"selectionchange":if(hP)break;case"keydown":case"keyup":aS(d,t,h)}var L;if(I1)e:{switch(n){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else ol?FE(n,t)&&(N="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(OE&&t.locale!=="ko"&&(ol||N!=="onCompositionStart"?N==="onCompositionEnd"&&ol&&(L=DE()):(Vs=h,P1="value"in Vs?Vs.value:Vs.textContent,ol=!0)),P=Jd(f,N),0<P.length&&(N=new Qx(N,n,null,t,h),d.push({event:N,listeners:P}),L?N.data=L:(L=kE(t),L!==null&&(N.data=L)))),(L=eP?tP(n,t):nP(n,t))&&(f=Jd(f,"onBeforeInput"),0<f.length&&(h=new Qx("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:f}),h.data=L))}JE(d,e)})}function vc(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Jd(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=cc(n,t),s!=null&&i.unshift(vc(n,s,r)),s=cc(n,e),s!=null&&i.push(vc(n,s,r))),n=n.return}return i}function La(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function cS(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var l=t,c=l.alternate,f=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&f!==null&&(l=f,r?(c=cc(t,s),c!=null&&o.unshift(vc(t,c,l))):r||(c=cc(t,s),c!=null&&o.push(vc(t,c,l)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var gP=/\r\n?/g,vP=/\u0000|\uFFFD/g;function fS(n){return(typeof n=="string"?n:""+n).replace(gP,`
`).replace(vP,"")}function Th(n,e,t){if(e=fS(e),fS(n)!==e&&t)throw Error(ye(425))}function Kd(){}var Z0=null,J0=null;function K0(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Q0=typeof setTimeout=="function"?setTimeout:void 0,yP=typeof clearTimeout=="function"?clearTimeout:void 0,hS=typeof Promise=="function"?Promise:void 0,_P=typeof queueMicrotask=="function"?queueMicrotask:typeof hS<"u"?function(n){return hS.resolve(null).then(n).catch(xP)}:Q0;function xP(n){setTimeout(function(){throw n})}function Ag(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),dc(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);dc(e)}function qs(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function dS(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Wl=Math.random().toString(36).slice(2),Dr="__reactFiber$"+Wl,yc="__reactProps$"+Wl,ds="__reactContainer$"+Wl,$0="__reactEvents$"+Wl,SP="__reactListeners$"+Wl,MP="__reactHandles$"+Wl;function Vo(n){var e=n[Dr];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ds]||t[Dr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=dS(n);n!==null;){if(t=n[Dr])return t;n=dS(n)}return e}n=t,t=n.parentNode}return null}function qc(n){return n=n[Dr]||n[ds],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ul(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ye(33))}function Rp(n){return n[yc]||null}var ev=[],cl=-1;function fo(n){return{current:n}}function Wt(n){0>cl||(n.current=ev[cl],ev[cl]=null,cl--)}function kt(n,e){cl++,ev[cl]=n.current,n.current=e}var so={},Kn=fo(so),gi=fo(!1),na=so;function Ll(n,e){var t=n.type.contextTypes;if(!t)return so;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function vi(n){return n=n.childContextTypes,n!=null}function Qd(){Wt(gi),Wt(Kn)}function pS(n,e,t){if(Kn.current!==so)throw Error(ye(168));kt(Kn,e),kt(gi,t)}function QE(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ye(108,oR(n)||"Unknown",r));return Qt({},t,i)}function $d(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||so,na=Kn.current,kt(Kn,n),kt(gi,gi.current),!0}function mS(n,e,t){var i=n.stateNode;if(!i)throw Error(ye(169));t?(n=QE(n,e,na),i.__reactInternalMemoizedMergedChildContext=n,Wt(gi),Wt(Kn),kt(Kn,n)):Wt(gi),kt(gi,t)}var ss=null,Pp=!1,Rg=!1;function $E(n){ss===null?ss=[n]:ss.push(n)}function EP(n){Pp=!0,$E(n)}function ho(){if(!Rg&&ss!==null){Rg=!0;var n=0,e=Nt;try{var t=ss;for(Nt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}ss=null,Pp=!1}catch(r){throw ss!==null&&(ss=ss.slice(n+1)),wE(T1,ho),r}finally{Nt=e,Rg=!1}}return null}var fl=[],hl=0,ep=null,tp=0,Ji=[],Ki=0,ia=null,as=1,ls="";function Fo(n,e){fl[hl++]=tp,fl[hl++]=ep,ep=n,tp=e}function ew(n,e,t){Ji[Ki++]=as,Ji[Ki++]=ls,Ji[Ki++]=ia,ia=n;var i=as;n=ls;var r=32-mr(i)-1;i&=~(1<<r),t+=1;var s=32-mr(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,as=1<<32-mr(e)+r|t<<r|i,ls=s+n}else as=1<<s|t<<r|i,ls=n}function U1(n){n.return!==null&&(Fo(n,1),ew(n,1,0))}function D1(n){for(;n===ep;)ep=fl[--hl],fl[hl]=null,tp=fl[--hl],fl[hl]=null;for(;n===ia;)ia=Ji[--Ki],Ji[Ki]=null,ls=Ji[--Ki],Ji[Ki]=null,as=Ji[--Ki],Ji[Ki]=null}var Ii=null,bi=null,Yt=!1,dr=null;function tw(n,e){var t=Qi(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function gS(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ii=n,bi=qs(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ii=n,bi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ia!==null?{id:as,overflow:ls}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Qi(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ii=n,bi=null,!0):!1;default:return!1}}function tv(n){return(n.mode&1)!==0&&(n.flags&128)===0}function nv(n){if(Yt){var e=bi;if(e){var t=e;if(!gS(n,e)){if(tv(n))throw Error(ye(418));e=qs(t.nextSibling);var i=Ii;e&&gS(n,e)?tw(i,t):(n.flags=n.flags&-4097|2,Yt=!1,Ii=n)}}else{if(tv(n))throw Error(ye(418));n.flags=n.flags&-4097|2,Yt=!1,Ii=n}}}function vS(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ii=n}function Ch(n){if(n!==Ii)return!1;if(!Yt)return vS(n),Yt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!K0(n.type,n.memoizedProps)),e&&(e=bi)){if(tv(n))throw nw(),Error(ye(418));for(;e;)tw(n,e),e=qs(e.nextSibling)}if(vS(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ye(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){bi=qs(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}bi=null}}else bi=Ii?qs(n.stateNode.nextSibling):null;return!0}function nw(){for(var n=bi;n;)n=qs(n.nextSibling)}function Il(){bi=Ii=null,Yt=!1}function O1(n){dr===null?dr=[n]:dr.push(n)}var wP=ys.ReactCurrentBatchConfig;function cr(n,e){if(n&&n.defaultProps){e=Qt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var np=fo(null),ip=null,dl=null,F1=null;function k1(){F1=dl=ip=null}function z1(n){var e=np.current;Wt(np),n._currentValue=e}function iv(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Tl(n,e){ip=n,F1=dl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(mi=!0),n.firstContext=null)}function er(n){var e=n._currentValue;if(F1!==n)if(n={context:n,memoizedValue:e,next:null},dl===null){if(ip===null)throw Error(ye(308));dl=n,ip.dependencies={lanes:0,firstContext:n}}else dl=dl.next=n;return e}var Go=null;function B1(n){Go===null?Go=[n]:Go.push(n)}function iw(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,B1(e)):(t.next=r.next,r.next=t),e.interleaved=t,ps(n,i)}function ps(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ks=!1;function H1(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rw(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function cs(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Zs(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Tt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ps(n,t)}return r=i.interleaved,r===null?(e.next=e,B1(i)):(e.next=r.next,r.next=e),i.interleaved=e,ps(n,t)}function Cd(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,C1(n,t)}}function yS(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function rp(n,e,t,i){var r=n.updateQueue;ks=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,f=c.next;c.next=null,o===null?s=f:o.next=f,o=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=f:l.next=f,h.lastBaseUpdate=c))}if(s!==null){var d=r.baseState;o=0,h=f=c=null,l=s;do{var m=l.lane,v=l.eventTime;if((i&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=n,E=l;switch(m=e,v=t,E.tag){case 1:if(_=E.payload,typeof _=="function"){d=_.call(v,d,m);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,m=typeof _=="function"?_.call(v,d,m):_,m==null)break e;d=Qt({},d,m);break e;case 2:ks=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,m=r.effects,m===null?r.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(f=h=v,c=d):h=h.next=v,o|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;m=l,l=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(1);if(h===null&&(c=d),r.baseState=c,r.firstBaseUpdate=f,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);sa|=o,n.lanes=o,n.memoizedState=d}}function _S(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(ye(191,r));r.call(i)}}}var sw=new iE.Component().refs;function rv(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Qt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var bp={isMounted:function(n){return(n=n._reactInternals)?ha(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=ii(),r=Ks(n),s=cs(i,r);s.payload=e,t!=null&&(s.callback=t),e=Zs(n,s,r),e!==null&&(gr(e,n,r,i),Cd(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=ii(),r=Ks(n),s=cs(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Zs(n,s,r),e!==null&&(gr(e,n,r,i),Cd(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=ii(),i=Ks(n),r=cs(t,i);r.tag=2,e!=null&&(r.callback=e),e=Zs(n,r,i),e!==null&&(gr(e,n,i,t),Cd(e,n,i))}};function xS(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!mc(t,i)||!mc(r,s):!0}function ow(n,e,t){var i=!1,r=so,s=e.contextType;return typeof s=="object"&&s!==null?s=er(s):(r=vi(e)?na:Kn.current,i=e.contextTypes,s=(i=i!=null)?Ll(n,r):so),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bp,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function SS(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&bp.enqueueReplaceState(e,e.state,null)}function sv(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=sw,H1(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=er(s):(s=vi(e)?na:Kn.current,r.context=Ll(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(rv(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&bp.enqueueReplaceState(r,r.state,null),rp(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Cu(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ye(309));var i=t.stateNode}if(!i)throw Error(ye(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=r.refs;l===sw&&(l=r.refs={}),o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(ye(284));if(!t._owner)throw Error(ye(290,n))}return n}function Ah(n,e){throw n=Object.prototype.toString.call(e),Error(ye(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function MS(n){var e=n._init;return e(n._payload)}function aw(n){function e(g,x){if(n){var S=g.deletions;S===null?(g.deletions=[x],g.flags|=16):S.push(x)}}function t(g,x){if(!n)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function i(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function r(g,x){return g=Qs(g,x),g.index=0,g.sibling=null,g}function s(g,x,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<x?(g.flags|=2,x):S):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function l(g,x,S,T){return x===null||x.tag!==6?(x=Dg(S,g.mode,T),x.return=g,x):(x=r(x,S),x.return=g,x)}function c(g,x,S,T){var A=S.type;return A===sl?h(g,x,S.props.children,T,S.key):x!==null&&(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Fs&&MS(A)===x.type)?(T=r(x,S.props),T.ref=Cu(g,x,S),T.return=g,T):(T=Id(S.type,S.key,S.props,null,g.mode,T),T.ref=Cu(g,x,S),T.return=g,T)}function f(g,x,S,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Og(S,g.mode,T),x.return=g,x):(x=r(x,S.children||[]),x.return=g,x)}function h(g,x,S,T,A){return x===null||x.tag!==7?(x=Ko(S,g.mode,T,A),x.return=g,x):(x=r(x,S),x.return=g,x)}function d(g,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Dg(""+x,g.mode,S),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case gh:return S=Id(x.type,x.key,x.props,null,g.mode,S),S.ref=Cu(g,null,x),S.return=g,S;case rl:return x=Og(x,g.mode,S),x.return=g,x;case Fs:var T=x._init;return d(g,T(x._payload),S)}if(Vu(x)||Su(x))return x=Ko(x,g.mode,S,null),x.return=g,x;Ah(g,x)}return null}function m(g,x,S,T){var A=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return A!==null?null:l(g,x,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case gh:return S.key===A?c(g,x,S,T):null;case rl:return S.key===A?f(g,x,S,T):null;case Fs:return A=S._init,m(g,x,A(S._payload),T)}if(Vu(S)||Su(S))return A!==null?null:h(g,x,S,T,null);Ah(g,S)}return null}function v(g,x,S,T,A){if(typeof T=="string"&&T!==""||typeof T=="number")return g=g.get(S)||null,l(x,g,""+T,A);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case gh:return g=g.get(T.key===null?S:T.key)||null,c(x,g,T,A);case rl:return g=g.get(T.key===null?S:T.key)||null,f(x,g,T,A);case Fs:var P=T._init;return v(g,x,S,P(T._payload),A)}if(Vu(T)||Su(T))return g=g.get(S)||null,h(x,g,T,A,null);Ah(x,T)}return null}function _(g,x,S,T){for(var A=null,P=null,L=x,N=x=0,R=null;L!==null&&N<S.length;N++){L.index>N?(R=L,L=null):R=L.sibling;var b=m(g,L,S[N],T);if(b===null){L===null&&(L=R);break}n&&L&&b.alternate===null&&e(g,L),x=s(b,x,N),P===null?A=b:P.sibling=b,P=b,L=R}if(N===S.length)return t(g,L),Yt&&Fo(g,N),A;if(L===null){for(;N<S.length;N++)L=d(g,S[N],T),L!==null&&(x=s(L,x,N),P===null?A=L:P.sibling=L,P=L);return Yt&&Fo(g,N),A}for(L=i(g,L);N<S.length;N++)R=v(L,g,N,S[N],T),R!==null&&(n&&R.alternate!==null&&L.delete(R.key===null?N:R.key),x=s(R,x,N),P===null?A=R:P.sibling=R,P=R);return n&&L.forEach(function(G){return e(g,G)}),Yt&&Fo(g,N),A}function E(g,x,S,T){var A=Su(S);if(typeof A!="function")throw Error(ye(150));if(S=A.call(S),S==null)throw Error(ye(151));for(var P=A=null,L=x,N=x=0,R=null,b=S.next();L!==null&&!b.done;N++,b=S.next()){L.index>N?(R=L,L=null):R=L.sibling;var G=m(g,L,b.value,T);if(G===null){L===null&&(L=R);break}n&&L&&G.alternate===null&&e(g,L),x=s(G,x,N),P===null?A=G:P.sibling=G,P=G,L=R}if(b.done)return t(g,L),Yt&&Fo(g,N),A;if(L===null){for(;!b.done;N++,b=S.next())b=d(g,b.value,T),b!==null&&(x=s(b,x,N),P===null?A=b:P.sibling=b,P=b);return Yt&&Fo(g,N),A}for(L=i(g,L);!b.done;N++,b=S.next())b=v(L,g,N,b.value,T),b!==null&&(n&&b.alternate!==null&&L.delete(b.key===null?N:b.key),x=s(b,x,N),P===null?A=b:P.sibling=b,P=b);return n&&L.forEach(function(J){return e(g,J)}),Yt&&Fo(g,N),A}function M(g,x,S,T){if(typeof S=="object"&&S!==null&&S.type===sl&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case gh:e:{for(var A=S.key,P=x;P!==null;){if(P.key===A){if(A=S.type,A===sl){if(P.tag===7){t(g,P.sibling),x=r(P,S.props.children),x.return=g,g=x;break e}}else if(P.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Fs&&MS(A)===P.type){t(g,P.sibling),x=r(P,S.props),x.ref=Cu(g,P,S),x.return=g,g=x;break e}t(g,P);break}else e(g,P);P=P.sibling}S.type===sl?(x=Ko(S.props.children,g.mode,T,S.key),x.return=g,g=x):(T=Id(S.type,S.key,S.props,null,g.mode,T),T.ref=Cu(g,x,S),T.return=g,g=T)}return o(g);case rl:e:{for(P=S.key;x!==null;){if(x.key===P)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){t(g,x.sibling),x=r(x,S.children||[]),x.return=g,g=x;break e}else{t(g,x);break}else e(g,x);x=x.sibling}x=Og(S,g.mode,T),x.return=g,g=x}return o(g);case Fs:return P=S._init,M(g,x,P(S._payload),T)}if(Vu(S))return _(g,x,S,T);if(Su(S))return E(g,x,S,T);Ah(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(t(g,x.sibling),x=r(x,S),x.return=g,g=x):(t(g,x),x=Dg(S,g.mode,T),x.return=g,g=x),o(g)):t(g,x)}return M}var Nl=aw(!0),lw=aw(!1),Zc={},Br=fo(Zc),_c=fo(Zc),xc=fo(Zc);function Wo(n){if(n===Zc)throw Error(ye(174));return n}function V1(n,e){switch(kt(xc,e),kt(_c,n),kt(Br,Zc),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:F0(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=F0(e,n)}Wt(Br),kt(Br,e)}function Ul(){Wt(Br),Wt(_c),Wt(xc)}function uw(n){Wo(xc.current);var e=Wo(Br.current),t=F0(e,n.type);e!==t&&(kt(_c,n),kt(Br,t))}function G1(n){_c.current===n&&(Wt(Br),Wt(_c))}var Zt=fo(0);function sp(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pg=[];function W1(){for(var n=0;n<Pg.length;n++)Pg[n]._workInProgressVersionPrimary=null;Pg.length=0}var Ad=ys.ReactCurrentDispatcher,bg=ys.ReactCurrentBatchConfig,ra=0,Kt=null,Sn=null,Pn=null,op=!1,Qu=!1,Sc=0,TP=0;function Xn(){throw Error(ye(321))}function X1(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!yr(n[t],e[t]))return!1;return!0}function j1(n,e,t,i,r,s){if(ra=s,Kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ad.current=n===null||n.memoizedState===null?PP:bP,n=t(i,r),Qu){s=0;do{if(Qu=!1,Sc=0,25<=s)throw Error(ye(301));s+=1,Pn=Sn=null,e.updateQueue=null,Ad.current=LP,n=t(i,r)}while(Qu)}if(Ad.current=ap,e=Sn!==null&&Sn.next!==null,ra=0,Pn=Sn=Kt=null,op=!1,e)throw Error(ye(300));return n}function Y1(){var n=Sc!==0;return Sc=0,n}function Ur(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Kt.memoizedState=Pn=n:Pn=Pn.next=n,Pn}function tr(){if(Sn===null){var n=Kt.alternate;n=n!==null?n.memoizedState:null}else n=Sn.next;var e=Pn===null?Kt.memoizedState:Pn.next;if(e!==null)Pn=e,Sn=n;else{if(n===null)throw Error(ye(310));Sn=n,n={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},Pn===null?Kt.memoizedState=Pn=n:Pn=Pn.next=n}return Pn}function Mc(n,e){return typeof e=="function"?e(n):e}function Lg(n){var e=tr(),t=e.queue;if(t===null)throw Error(ye(311));t.lastRenderedReducer=n;var i=Sn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var l=o=null,c=null,f=s;do{var h=f.lane;if((ra&h)===h)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:n(i,f.action);else{var d={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(l=c=d,o=i):c=c.next=d,Kt.lanes|=h,sa|=h}f=f.next}while(f!==null&&f!==s);c===null?o=i:c.next=l,yr(i,e.memoizedState)||(mi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=c,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Kt.lanes|=s,sa|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ig(n){var e=tr(),t=e.queue;if(t===null)throw Error(ye(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);yr(s,e.memoizedState)||(mi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function cw(){}function fw(n,e){var t=Kt,i=tr(),r=e(),s=!yr(i.memoizedState,r);if(s&&(i.memoizedState=r,mi=!0),i=i.queue,q1(pw.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Pn!==null&&Pn.memoizedState.tag&1){if(t.flags|=2048,Ec(9,dw.bind(null,t,i,r,e),void 0,null),Ln===null)throw Error(ye(349));ra&30||hw(t,e,r)}return r}function hw(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function dw(n,e,t,i){e.value=t,e.getSnapshot=i,mw(e)&&gw(n)}function pw(n,e,t){return t(function(){mw(e)&&gw(n)})}function mw(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!yr(n,t)}catch{return!0}}function gw(n){var e=ps(n,1);e!==null&&gr(e,n,1,-1)}function ES(n){var e=Ur();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mc,lastRenderedState:n},e.queue=n,n=n.dispatch=RP.bind(null,Kt,n),[e.memoizedState,n]}function Ec(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function vw(){return tr().memoizedState}function Rd(n,e,t,i){var r=Ur();Kt.flags|=n,r.memoizedState=Ec(1|e,t,void 0,i===void 0?null:i)}function Lp(n,e,t,i){var r=tr();i=i===void 0?null:i;var s=void 0;if(Sn!==null){var o=Sn.memoizedState;if(s=o.destroy,i!==null&&X1(i,o.deps)){r.memoizedState=Ec(e,t,s,i);return}}Kt.flags|=n,r.memoizedState=Ec(1|e,t,s,i)}function wS(n,e){return Rd(8390656,8,n,e)}function q1(n,e){return Lp(2048,8,n,e)}function yw(n,e){return Lp(4,2,n,e)}function _w(n,e){return Lp(4,4,n,e)}function xw(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Sw(n,e,t){return t=t!=null?t.concat([n]):null,Lp(4,4,xw.bind(null,e,n),t)}function Z1(){}function Mw(n,e){var t=tr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&X1(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function Ew(n,e){var t=tr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&X1(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function ww(n,e,t){return ra&21?(yr(t,e)||(t=AE(),Kt.lanes|=t,sa|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,mi=!0),n.memoizedState=t)}function CP(n,e){var t=Nt;Nt=t!==0&&4>t?t:4,n(!0);var i=bg.transition;bg.transition={};try{n(!1),e()}finally{Nt=t,bg.transition=i}}function Tw(){return tr().memoizedState}function AP(n,e,t){var i=Ks(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},Cw(n))Aw(e,t);else if(t=iw(n,e,t,i),t!==null){var r=ii();gr(t,n,i,r),Rw(t,e,i)}}function RP(n,e,t){var i=Ks(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(Cw(n))Aw(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,t);if(r.hasEagerState=!0,r.eagerState=l,yr(l,o)){var c=e.interleaved;c===null?(r.next=r,B1(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}t=iw(n,e,r,i),t!==null&&(r=ii(),gr(t,n,i,r),Rw(t,e,i))}}function Cw(n){var e=n.alternate;return n===Kt||e!==null&&e===Kt}function Aw(n,e){Qu=op=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Rw(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,C1(n,t)}}var ap={readContext:er,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useInsertionEffect:Xn,useLayoutEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useMutableSource:Xn,useSyncExternalStore:Xn,useId:Xn,unstable_isNewReconciler:!1},PP={readContext:er,useCallback:function(n,e){return Ur().memoizedState=[n,e===void 0?null:e],n},useContext:er,useEffect:wS,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Rd(4194308,4,xw.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Rd(4194308,4,n,e)},useInsertionEffect:function(n,e){return Rd(4,2,n,e)},useMemo:function(n,e){var t=Ur();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Ur();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=AP.bind(null,Kt,n),[i.memoizedState,n]},useRef:function(n){var e=Ur();return n={current:n},e.memoizedState=n},useState:ES,useDebugValue:Z1,useDeferredValue:function(n){return Ur().memoizedState=n},useTransition:function(){var n=ES(!1),e=n[0];return n=CP.bind(null,n[1]),Ur().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Kt,r=Ur();if(Yt){if(t===void 0)throw Error(ye(407));t=t()}else{if(t=e(),Ln===null)throw Error(ye(349));ra&30||hw(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,wS(pw.bind(null,i,s,n),[n]),i.flags|=2048,Ec(9,dw.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Ur(),e=Ln.identifierPrefix;if(Yt){var t=ls,i=as;t=(i&~(1<<32-mr(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Sc++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=TP++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},bP={readContext:er,useCallback:Mw,useContext:er,useEffect:q1,useImperativeHandle:Sw,useInsertionEffect:yw,useLayoutEffect:_w,useMemo:Ew,useReducer:Lg,useRef:vw,useState:function(){return Lg(Mc)},useDebugValue:Z1,useDeferredValue:function(n){var e=tr();return ww(e,Sn.memoizedState,n)},useTransition:function(){var n=Lg(Mc)[0],e=tr().memoizedState;return[n,e]},useMutableSource:cw,useSyncExternalStore:fw,useId:Tw,unstable_isNewReconciler:!1},LP={readContext:er,useCallback:Mw,useContext:er,useEffect:q1,useImperativeHandle:Sw,useInsertionEffect:yw,useLayoutEffect:_w,useMemo:Ew,useReducer:Ig,useRef:vw,useState:function(){return Ig(Mc)},useDebugValue:Z1,useDeferredValue:function(n){var e=tr();return Sn===null?e.memoizedState=n:ww(e,Sn.memoizedState,n)},useTransition:function(){var n=Ig(Mc)[0],e=tr().memoizedState;return[n,e]},useMutableSource:cw,useSyncExternalStore:fw,useId:Tw,unstable_isNewReconciler:!1};function Dl(n,e){try{var t="",i=e;do t+=sR(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function Ng(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function ov(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var IP=typeof WeakMap=="function"?WeakMap:Map;function Pw(n,e,t){t=cs(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){up||(up=!0,gv=i),ov(n,e)},t}function bw(n,e,t){t=cs(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){ov(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){ov(n,e),typeof i!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function TS(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new IP;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=jP.bind(null,n,e,t),e.then(n,n))}function CS(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function AS(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=cs(-1,1),e.tag=2,Zs(t,e,1))),t.lanes|=1),n)}var NP=ys.ReactCurrentOwner,mi=!1;function ni(n,e,t,i){e.child=n===null?lw(e,null,t,i):Nl(e,n.child,t,i)}function RS(n,e,t,i,r){t=t.render;var s=e.ref;return Tl(e,r),i=j1(n,e,t,i,s,r),t=Y1(),n!==null&&!mi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,ms(n,e,r)):(Yt&&t&&U1(e),e.flags|=1,ni(n,e,i,r),e.child)}function PS(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!iy(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,Lw(n,e,s,i,r)):(n=Id(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:mc,t(o,i)&&n.ref===e.ref)return ms(n,e,r)}return e.flags|=1,n=Qs(s,i),n.ref=e.ref,n.return=e,e.child=n}function Lw(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(mc(s,i)&&n.ref===e.ref)if(mi=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(mi=!0);else return e.lanes=n.lanes,ms(n,e,r)}return av(n,e,t,i,r)}function Iw(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(ml,Pi),Pi|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,kt(ml,Pi),Pi|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,kt(ml,Pi),Pi|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,kt(ml,Pi),Pi|=i;return ni(n,e,r,t),e.child}function Nw(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function av(n,e,t,i,r){var s=vi(t)?na:Kn.current;return s=Ll(e,s),Tl(e,r),t=j1(n,e,t,i,s,r),i=Y1(),n!==null&&!mi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,ms(n,e,r)):(Yt&&i&&U1(e),e.flags|=1,ni(n,e,t,r),e.child)}function bS(n,e,t,i,r){if(vi(t)){var s=!0;$d(e)}else s=!1;if(Tl(e,r),e.stateNode===null)Pd(n,e),ow(e,t,i),sv(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,f=t.contextType;typeof f=="object"&&f!==null?f=er(f):(f=vi(t)?na:Kn.current,f=Ll(e,f));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||c!==f)&&SS(e,o,i,f),ks=!1;var m=e.memoizedState;o.state=m,rp(e,i,o,r),c=e.memoizedState,l!==i||m!==c||gi.current||ks?(typeof h=="function"&&(rv(e,t,h,i),c=e.memoizedState),(l=ks||xS(e,t,l,i,m,c,f))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),o.props=i,o.state=c,o.context=f,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,rw(n,e),l=e.memoizedProps,f=e.type===e.elementType?l:cr(e.type,l),o.props=f,d=e.pendingProps,m=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=er(c):(c=vi(t)?na:Kn.current,c=Ll(e,c));var v=t.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||m!==c)&&SS(e,o,i,c),ks=!1,m=e.memoizedState,o.state=m,rp(e,i,o,r);var _=e.memoizedState;l!==d||m!==_||gi.current||ks?(typeof v=="function"&&(rv(e,t,v,i),_=e.memoizedState),(f=ks||xS(e,t,f,i,m,_,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,_,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),o.props=i,o.state=_,o.context=c,i=f):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return lv(n,e,t,i,s,r)}function lv(n,e,t,i,r,s){Nw(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&mS(e,t,!1),ms(n,e,s);i=e.stateNode,NP.current=e;var l=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Nl(e,n.child,null,s),e.child=Nl(e,null,l,s)):ni(n,e,l,s),e.memoizedState=i.state,r&&mS(e,t,!0),e.child}function Uw(n){var e=n.stateNode;e.pendingContext?pS(n,e.pendingContext,e.pendingContext!==e.context):e.context&&pS(n,e.context,!1),V1(n,e.containerInfo)}function LS(n,e,t,i,r){return Il(),O1(r),e.flags|=256,ni(n,e,t,i),e.child}var uv={dehydrated:null,treeContext:null,retryLane:0};function cv(n){return{baseLanes:n,cachePool:null,transitions:null}}function Dw(n,e,t){var i=e.pendingProps,r=Zt.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(r&2)!==0),l?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),kt(Zt,r&1),n===null)return nv(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Up(o,i,0,null),n=Ko(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=cv(t),e.memoizedState=uv,n):J1(e,o));if(r=n.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return UP(n,e,o,i,l,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,l=r.sibling;var c={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Qs(r,c),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?s=Qs(l,s):(s=Ko(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?cv(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=uv,i}return s=n.child,n=s.sibling,i=Qs(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function J1(n,e){return e=Up({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Rh(n,e,t,i){return i!==null&&O1(i),Nl(e,n.child,null,t),n=J1(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function UP(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=Ng(Error(ye(422))),Rh(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Up({mode:"visible",children:i.children},r,0,null),s=Ko(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Nl(e,n.child,null,o),e.child.memoizedState=cv(o),e.memoizedState=uv,s);if(!(e.mode&1))return Rh(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(ye(419)),i=Ng(s,i,void 0),Rh(n,e,o,i)}if(l=(o&n.childLanes)!==0,mi||l){if(i=Ln,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ps(n,r),gr(i,n,r,-1))}return ny(),i=Ng(Error(ye(421))),Rh(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=YP.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,bi=qs(r.nextSibling),Ii=e,Yt=!0,dr=null,n!==null&&(Ji[Ki++]=as,Ji[Ki++]=ls,Ji[Ki++]=ia,as=n.id,ls=n.overflow,ia=e),e=J1(e,i.children),e.flags|=4096,e)}function IS(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),iv(n.return,e,t)}function Ug(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function Ow(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(ni(n,e,i.children,t),i=Zt.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&IS(n,t,e);else if(n.tag===19)IS(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(kt(Zt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&sp(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Ug(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&sp(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Ug(e,!0,t,null,s);break;case"together":Ug(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pd(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ms(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),sa|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ye(153));if(e.child!==null){for(n=e.child,t=Qs(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Qs(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function DP(n,e,t){switch(e.tag){case 3:Uw(e),Il();break;case 5:uw(e);break;case 1:vi(e.type)&&$d(e);break;case 4:V1(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;kt(np,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(kt(Zt,Zt.current&1),e.flags|=128,null):t&e.child.childLanes?Dw(n,e,t):(kt(Zt,Zt.current&1),n=ms(n,e,t),n!==null?n.sibling:null);kt(Zt,Zt.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return Ow(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),kt(Zt,Zt.current),i)break;return null;case 22:case 23:return e.lanes=0,Iw(n,e,t)}return ms(n,e,t)}var Fw,fv,kw,zw;Fw=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};fv=function(){};kw=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Wo(Br.current);var s=null;switch(t){case"input":r=N0(n,r),i=N0(n,i),s=[];break;case"select":r=Qt({},r,{value:void 0}),i=Qt({},i,{value:void 0}),s=[];break;case"textarea":r=O0(n,r),i=O0(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Kd)}k0(t,i);var o;t=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var l=r[f];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(lc.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in i){var c=i[f];if(l=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&c!==l&&(c!=null||l!=null))if(f==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(s||(s=[]),s.push(f,t)),t=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(lc.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Vt("scroll",n),s||l===c||(s=[])):(s=s||[]).push(f,c))}t&&(s=s||[]).push("style",t);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};zw=function(n,e,t,i){t!==i&&(e.flags|=4)};function Au(n,e){if(!Yt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function jn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function OP(n,e,t){var i=e.pendingProps;switch(D1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(e),null;case 1:return vi(e.type)&&Qd(),jn(e),null;case 3:return i=e.stateNode,Ul(),Wt(gi),Wt(Kn),W1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Ch(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dr!==null&&(_v(dr),dr=null))),fv(n,e),jn(e),null;case 5:G1(e);var r=Wo(xc.current);if(t=e.type,n!==null&&e.stateNode!=null)kw(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ye(166));return jn(e),null}if(n=Wo(Br.current),Ch(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Dr]=e,i[yc]=s,n=(e.mode&1)!==0,t){case"dialog":Vt("cancel",i),Vt("close",i);break;case"iframe":case"object":case"embed":Vt("load",i);break;case"video":case"audio":for(r=0;r<Wu.length;r++)Vt(Wu[r],i);break;case"source":Vt("error",i);break;case"img":case"image":case"link":Vt("error",i),Vt("load",i);break;case"details":Vt("toggle",i);break;case"input":Hx(i,s),Vt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Vt("invalid",i);break;case"textarea":Gx(i,s),Vt("invalid",i)}k0(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&Th(i.textContent,l,n),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Th(i.textContent,l,n),r=["children",""+l]):lc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Vt("scroll",i)}switch(t){case"input":vh(i),Vx(i,s,!0);break;case"textarea":vh(i),Wx(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Kd)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=hE(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Dr]=e,n[yc]=i,Fw(n,e,!1,!1),e.stateNode=n;e:{switch(o=z0(t,i),t){case"dialog":Vt("cancel",n),Vt("close",n),r=i;break;case"iframe":case"object":case"embed":Vt("load",n),r=i;break;case"video":case"audio":for(r=0;r<Wu.length;r++)Vt(Wu[r],n);r=i;break;case"source":Vt("error",n),r=i;break;case"img":case"image":case"link":Vt("error",n),Vt("load",n),r=i;break;case"details":Vt("toggle",n),r=i;break;case"input":Hx(n,i),r=N0(n,i),Vt("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Qt({},i,{value:void 0}),Vt("invalid",n);break;case"textarea":Gx(n,i),r=O0(n,i),Vt("invalid",n);break;default:r=i}k0(t,r),l=r;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?mE(n,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&dE(n,c)):s==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&uc(n,c):typeof c=="number"&&uc(n,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(lc.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Vt("scroll",n):c!=null&&x1(n,s,c,o))}switch(t){case"input":vh(n),Vx(n,i,!1);break;case"textarea":vh(n),Wx(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ro(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Sl(n,!!i.multiple,s,!1):i.defaultValue!=null&&Sl(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Kd)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jn(e),null;case 6:if(n&&e.stateNode!=null)zw(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ye(166));if(t=Wo(xc.current),Wo(Br.current),Ch(e)){if(i=e.stateNode,t=e.memoizedProps,i[Dr]=e,(s=i.nodeValue!==t)&&(n=Ii,n!==null))switch(n.tag){case 3:Th(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Th(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Dr]=e,e.stateNode=i}return jn(e),null;case 13:if(Wt(Zt),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Yt&&bi!==null&&e.mode&1&&!(e.flags&128))nw(),Il(),e.flags|=98560,s=!1;else if(s=Ch(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(ye(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ye(317));s[Dr]=e}else Il(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jn(e),s=!1}else dr!==null&&(_v(dr),dr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Zt.current&1?Mn===0&&(Mn=3):ny())),e.updateQueue!==null&&(e.flags|=4),jn(e),null);case 4:return Ul(),fv(n,e),n===null&&gc(e.stateNode.containerInfo),jn(e),null;case 10:return z1(e.type._context),jn(e),null;case 17:return vi(e.type)&&Qd(),jn(e),null;case 19:if(Wt(Zt),s=e.memoizedState,s===null)return jn(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Au(s,!1);else{if(Mn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=sp(n),o!==null){for(e.flags|=128,Au(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return kt(Zt,Zt.current&1|2),e.child}n=n.sibling}s.tail!==null&&fn()>Ol&&(e.flags|=128,i=!0,Au(s,!1),e.lanes=4194304)}else{if(!i)if(n=sp(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Au(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Yt)return jn(e),null}else 2*fn()-s.renderingStartTime>Ol&&t!==1073741824&&(e.flags|=128,i=!0,Au(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=fn(),e.sibling=null,t=Zt.current,kt(Zt,i?t&1|2:t&1),e):(jn(e),null);case 22:case 23:return ty(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Pi&1073741824&&(jn(e),e.subtreeFlags&6&&(e.flags|=8192)):jn(e),null;case 24:return null;case 25:return null}throw Error(ye(156,e.tag))}function FP(n,e){switch(D1(e),e.tag){case 1:return vi(e.type)&&Qd(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Ul(),Wt(gi),Wt(Kn),W1(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return G1(e),null;case 13:if(Wt(Zt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ye(340));Il()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Wt(Zt),null;case 4:return Ul(),null;case 10:return z1(e.type._context),null;case 22:case 23:return ty(),null;case 24:return null;default:return null}}var Ph=!1,Zn=!1,kP=typeof WeakSet=="function"?WeakSet:Set,De=null;function pl(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){sn(n,e,i)}else t.current=null}function hv(n,e,t){try{t()}catch(i){sn(n,e,i)}}var NS=!1;function zP(n,e){if(Z0=qd,n=GE(),N1(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,l=-1,c=-1,f=0,h=0,d=n,m=null;t:for(;;){for(var v;d!==t||r!==0&&d.nodeType!==3||(l=o+r),d!==s||i!==0&&d.nodeType!==3||(c=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(v=d.firstChild)!==null;)m=d,d=v;for(;;){if(d===n)break t;if(m===t&&++f===r&&(l=o),m===s&&++h===i&&(c=o),(v=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=v}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(J0={focusedElem:n,selectionRange:t},qd=!1,De=e;De!==null;)if(e=De,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,De=n;else for(;De!==null;){e=De;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,M=_.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?E:cr(e.type,E),M);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(T){sn(e,e.return,T)}if(n=e.sibling,n!==null){n.return=e.return,De=n;break}De=e.return}return _=NS,NS=!1,_}function $u(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&hv(e,t,s)}r=r.next}while(r!==i)}}function Ip(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function dv(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Bw(n){var e=n.alternate;e!==null&&(n.alternate=null,Bw(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Dr],delete e[yc],delete e[$0],delete e[SP],delete e[MP])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Hw(n){return n.tag===5||n.tag===3||n.tag===4}function US(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Hw(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pv(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Kd));else if(i!==4&&(n=n.child,n!==null))for(pv(n,e,t),n=n.sibling;n!==null;)pv(n,e,t),n=n.sibling}function mv(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(mv(n,e,t),n=n.sibling;n!==null;)mv(n,e,t),n=n.sibling}var Un=null,hr=!1;function Ls(n,e,t){for(t=t.child;t!==null;)Vw(n,e,t),t=t.sibling}function Vw(n,e,t){if(zr&&typeof zr.onCommitFiberUnmount=="function")try{zr.onCommitFiberUnmount(wp,t)}catch{}switch(t.tag){case 5:Zn||pl(t,e);case 6:var i=Un,r=hr;Un=null,Ls(n,e,t),Un=i,hr=r,Un!==null&&(hr?(n=Un,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Un.removeChild(t.stateNode));break;case 18:Un!==null&&(hr?(n=Un,t=t.stateNode,n.nodeType===8?Ag(n.parentNode,t):n.nodeType===1&&Ag(n,t),dc(n)):Ag(Un,t.stateNode));break;case 4:i=Un,r=hr,Un=t.stateNode.containerInfo,hr=!0,Ls(n,e,t),Un=i,hr=r;break;case 0:case 11:case 14:case 15:if(!Zn&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&hv(t,e,o),r=r.next}while(r!==i)}Ls(n,e,t);break;case 1:if(!Zn&&(pl(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(l){sn(t,e,l)}Ls(n,e,t);break;case 21:Ls(n,e,t);break;case 22:t.mode&1?(Zn=(i=Zn)||t.memoizedState!==null,Ls(n,e,t),Zn=i):Ls(n,e,t);break;default:Ls(n,e,t)}}function DS(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new kP),e.forEach(function(i){var r=qP.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function or(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Un=l.stateNode,hr=!1;break e;case 3:Un=l.stateNode.containerInfo,hr=!0;break e;case 4:Un=l.stateNode.containerInfo,hr=!0;break e}l=l.return}if(Un===null)throw Error(ye(160));Vw(s,o,r),Un=null,hr=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(f){sn(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gw(e,n),e=e.sibling}function Gw(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(or(e,n),Nr(n),i&4){try{$u(3,n,n.return),Ip(3,n)}catch(E){sn(n,n.return,E)}try{$u(5,n,n.return)}catch(E){sn(n,n.return,E)}}break;case 1:or(e,n),Nr(n),i&512&&t!==null&&pl(t,t.return);break;case 5:if(or(e,n),Nr(n),i&512&&t!==null&&pl(t,t.return),n.flags&32){var r=n.stateNode;try{uc(r,"")}catch(E){sn(n,n.return,E)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&cE(r,s),z0(l,o);var f=z0(l,s);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?mE(r,d):h==="dangerouslySetInnerHTML"?dE(r,d):h==="children"?uc(r,d):x1(r,h,d,f)}switch(l){case"input":U0(r,s);break;case"textarea":fE(r,s);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Sl(r,!!s.multiple,v,!1):m!==!!s.multiple&&(s.defaultValue!=null?Sl(r,!!s.multiple,s.defaultValue,!0):Sl(r,!!s.multiple,s.multiple?[]:"",!1))}r[yc]=s}catch(E){sn(n,n.return,E)}}break;case 6:if(or(e,n),Nr(n),i&4){if(n.stateNode===null)throw Error(ye(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(E){sn(n,n.return,E)}}break;case 3:if(or(e,n),Nr(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{dc(e.containerInfo)}catch(E){sn(n,n.return,E)}break;case 4:or(e,n),Nr(n);break;case 13:or(e,n),Nr(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||($1=fn())),i&4&&DS(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Zn=(f=Zn)||h,or(e,n),Zn=f):or(e,n),Nr(n),i&8192){if(f=n.memoizedState!==null,(n.stateNode.isHidden=f)&&!h&&n.mode&1)for(De=n,h=n.child;h!==null;){for(d=De=h;De!==null;){switch(m=De,v=m.child,m.tag){case 0:case 11:case 14:case 15:$u(4,m,m.return);break;case 1:pl(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){i=m,t=m.return;try{e=i,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(E){sn(i,t,E)}}break;case 5:pl(m,m.return);break;case 22:if(m.memoizedState!==null){FS(d);continue}}v!==null?(v.return=m,De=v):FS(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,f?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=pE("display",o))}catch(E){sn(n,n.return,E)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(E){sn(n,n.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:or(e,n),Nr(n),i&4&&DS(n);break;case 21:break;default:or(e,n),Nr(n)}}function Nr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Hw(t)){var i=t;break e}t=t.return}throw Error(ye(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(uc(r,""),i.flags&=-33);var s=US(n);mv(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,l=US(n);pv(n,l,o);break;default:throw Error(ye(161))}}catch(c){sn(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function BP(n,e,t){De=n,Ww(n)}function Ww(n,e,t){for(var i=(n.mode&1)!==0;De!==null;){var r=De,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Ph;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||Zn;l=Ph;var f=Zn;if(Ph=o,(Zn=c)&&!f)for(De=r;De!==null;)o=De,c=o.child,o.tag===22&&o.memoizedState!==null?kS(r):c!==null?(c.return=o,De=c):kS(r);for(;s!==null;)De=s,Ww(s),s=s.sibling;De=r,Ph=l,Zn=f}OS(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,De=s):OS(n)}}function OS(n){for(;De!==null;){var e=De;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zn||Ip(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Zn)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:cr(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&_S(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}_S(e,o,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&dc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}Zn||e.flags&512&&dv(e)}catch(m){sn(e,e.return,m)}}if(e===n){De=null;break}if(t=e.sibling,t!==null){t.return=e.return,De=t;break}De=e.return}}function FS(n){for(;De!==null;){var e=De;if(e===n){De=null;break}var t=e.sibling;if(t!==null){t.return=e.return,De=t;break}De=e.return}}function kS(n){for(;De!==null;){var e=De;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Ip(4,e)}catch(c){sn(e,t,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){sn(e,r,c)}}var s=e.return;try{dv(e)}catch(c){sn(e,s,c)}break;case 5:var o=e.return;try{dv(e)}catch(c){sn(e,o,c)}}}catch(c){sn(e,e.return,c)}if(e===n){De=null;break}var l=e.sibling;if(l!==null){l.return=e.return,De=l;break}De=e.return}}var HP=Math.ceil,lp=ys.ReactCurrentDispatcher,K1=ys.ReactCurrentOwner,$i=ys.ReactCurrentBatchConfig,Tt=0,Ln=null,vn=null,On=0,Pi=0,ml=fo(0),Mn=0,wc=null,sa=0,Np=0,Q1=0,ec=null,hi=null,$1=0,Ol=1/0,rs=null,up=!1,gv=null,Js=null,bh=!1,Gs=null,cp=0,tc=0,vv=null,bd=-1,Ld=0;function ii(){return Tt&6?fn():bd!==-1?bd:bd=fn()}function Ks(n){return n.mode&1?Tt&2&&On!==0?On&-On:wP.transition!==null?(Ld===0&&(Ld=AE()),Ld):(n=Nt,n!==0||(n=window.event,n=n===void 0?16:UE(n.type)),n):1}function gr(n,e,t,i){if(50<tc)throw tc=0,vv=null,Error(ye(185));jc(n,t,i),(!(Tt&2)||n!==Ln)&&(n===Ln&&(!(Tt&2)&&(Np|=t),Mn===4&&Hs(n,On)),yi(n,i),t===1&&Tt===0&&!(e.mode&1)&&(Ol=fn()+500,Pp&&ho()))}function yi(n,e){var t=n.callbackNode;wR(n,e);var i=Yd(n,n===Ln?On:0);if(i===0)t!==null&&Yx(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&Yx(t),e===1)n.tag===0?EP(zS.bind(null,n)):$E(zS.bind(null,n)),_P(function(){!(Tt&6)&&ho()}),t=null;else{switch(RE(i)){case 1:t=T1;break;case 4:t=TE;break;case 16:t=jd;break;case 536870912:t=CE;break;default:t=jd}t=Qw(t,Xw.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Xw(n,e){if(bd=-1,Ld=0,Tt&6)throw Error(ye(327));var t=n.callbackNode;if(Cl()&&n.callbackNode!==t)return null;var i=Yd(n,n===Ln?On:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=fp(n,i);else{e=i;var r=Tt;Tt|=2;var s=Yw();(Ln!==n||On!==e)&&(rs=null,Ol=fn()+500,Jo(n,e));do try{WP();break}catch(l){jw(n,l)}while(1);k1(),lp.current=s,Tt=r,vn!==null?e=0:(Ln=null,On=0,e=Mn)}if(e!==0){if(e===2&&(r=W0(n),r!==0&&(i=r,e=yv(n,r))),e===1)throw t=wc,Jo(n,0),Hs(n,i),yi(n,fn()),t;if(e===6)Hs(n,i);else{if(r=n.current.alternate,!(i&30)&&!VP(r)&&(e=fp(n,i),e===2&&(s=W0(n),s!==0&&(i=s,e=yv(n,s))),e===1))throw t=wc,Jo(n,0),Hs(n,i),yi(n,fn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(ye(345));case 2:ko(n,hi,rs);break;case 3:if(Hs(n,i),(i&130023424)===i&&(e=$1+500-fn(),10<e)){if(Yd(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){ii(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=Q0(ko.bind(null,n,hi,rs),e);break}ko(n,hi,rs);break;case 4:if(Hs(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-mr(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=fn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*HP(i/1960))-i,10<i){n.timeoutHandle=Q0(ko.bind(null,n,hi,rs),i);break}ko(n,hi,rs);break;case 5:ko(n,hi,rs);break;default:throw Error(ye(329))}}}return yi(n,fn()),n.callbackNode===t?Xw.bind(null,n):null}function yv(n,e){var t=ec;return n.current.memoizedState.isDehydrated&&(Jo(n,e).flags|=256),n=fp(n,e),n!==2&&(e=hi,hi=t,e!==null&&_v(e)),n}function _v(n){hi===null?hi=n:hi.push.apply(hi,n)}function VP(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!yr(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hs(n,e){for(e&=~Q1,e&=~Np,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-mr(e),i=1<<t;n[t]=-1,e&=~i}}function zS(n){if(Tt&6)throw Error(ye(327));Cl();var e=Yd(n,0);if(!(e&1))return yi(n,fn()),null;var t=fp(n,e);if(n.tag!==0&&t===2){var i=W0(n);i!==0&&(e=i,t=yv(n,i))}if(t===1)throw t=wc,Jo(n,0),Hs(n,e),yi(n,fn()),t;if(t===6)throw Error(ye(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ko(n,hi,rs),yi(n,fn()),null}function ey(n,e){var t=Tt;Tt|=1;try{return n(e)}finally{Tt=t,Tt===0&&(Ol=fn()+500,Pp&&ho())}}function oa(n){Gs!==null&&Gs.tag===0&&!(Tt&6)&&Cl();var e=Tt;Tt|=1;var t=$i.transition,i=Nt;try{if($i.transition=null,Nt=1,n)return n()}finally{Nt=i,$i.transition=t,Tt=e,!(Tt&6)&&ho()}}function ty(){Pi=ml.current,Wt(ml)}function Jo(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,yP(t)),vn!==null)for(t=vn.return;t!==null;){var i=t;switch(D1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Qd();break;case 3:Ul(),Wt(gi),Wt(Kn),W1();break;case 5:G1(i);break;case 4:Ul();break;case 13:Wt(Zt);break;case 19:Wt(Zt);break;case 10:z1(i.type._context);break;case 22:case 23:ty()}t=t.return}if(Ln=n,vn=n=Qs(n.current,null),On=Pi=e,Mn=0,wc=null,Q1=Np=sa=0,hi=ec=null,Go!==null){for(e=0;e<Go.length;e++)if(t=Go[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Go=null}return n}function jw(n,e){do{var t=vn;try{if(k1(),Ad.current=ap,op){for(var i=Kt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}op=!1}if(ra=0,Pn=Sn=Kt=null,Qu=!1,Sc=0,K1.current=null,t===null||t.return===null){Mn=1,wc=e,vn=null;break}e:{var s=n,o=t.return,l=t,c=e;if(e=On,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=CS(o);if(v!==null){v.flags&=-257,AS(v,o,l,s,e),v.mode&1&&TS(s,f,e),e=v,c=f;var _=e.updateQueue;if(_===null){var E=new Set;E.add(c),e.updateQueue=E}else _.add(c);break e}else{if(!(e&1)){TS(s,f,e),ny();break e}c=Error(ye(426))}}else if(Yt&&l.mode&1){var M=CS(o);if(M!==null){!(M.flags&65536)&&(M.flags|=256),AS(M,o,l,s,e),O1(Dl(c,l));break e}}s=c=Dl(c,l),Mn!==4&&(Mn=2),ec===null?ec=[s]:ec.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=Pw(s,c,e);yS(s,g);break e;case 1:l=c;var x=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Js===null||!Js.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=bw(s,l,e);yS(s,T);break e}}s=s.return}while(s!==null)}Zw(t)}catch(A){e=A,vn===t&&t!==null&&(vn=t=t.return);continue}break}while(1)}function Yw(){var n=lp.current;return lp.current=ap,n===null?ap:n}function ny(){(Mn===0||Mn===3||Mn===2)&&(Mn=4),Ln===null||!(sa&268435455)&&!(Np&268435455)||Hs(Ln,On)}function fp(n,e){var t=Tt;Tt|=2;var i=Yw();(Ln!==n||On!==e)&&(rs=null,Jo(n,e));do try{GP();break}catch(r){jw(n,r)}while(1);if(k1(),Tt=t,lp.current=i,vn!==null)throw Error(ye(261));return Ln=null,On=0,Mn}function GP(){for(;vn!==null;)qw(vn)}function WP(){for(;vn!==null&&!mR();)qw(vn)}function qw(n){var e=Kw(n.alternate,n,Pi);n.memoizedProps=n.pendingProps,e===null?Zw(n):vn=e,K1.current=null}function Zw(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=FP(t,e),t!==null){t.flags&=32767,vn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Mn=6,vn=null;return}}else if(t=OP(t,e,Pi),t!==null){vn=t;return}if(e=e.sibling,e!==null){vn=e;return}vn=e=n}while(e!==null);Mn===0&&(Mn=5)}function ko(n,e,t){var i=Nt,r=$i.transition;try{$i.transition=null,Nt=1,XP(n,e,t,i)}finally{$i.transition=r,Nt=i}return null}function XP(n,e,t,i){do Cl();while(Gs!==null);if(Tt&6)throw Error(ye(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ye(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(TR(n,s),n===Ln&&(vn=Ln=null,On=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||bh||(bh=!0,Qw(jd,function(){return Cl(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=$i.transition,$i.transition=null;var o=Nt;Nt=1;var l=Tt;Tt|=4,K1.current=null,zP(n,t),Gw(t,n),fP(J0),qd=!!Z0,J0=Z0=null,n.current=t,BP(t),gR(),Tt=l,Nt=o,$i.transition=s}else n.current=t;if(bh&&(bh=!1,Gs=n,cp=r),s=n.pendingLanes,s===0&&(Js=null),_R(t.stateNode),yi(n,fn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(up)throw up=!1,n=gv,gv=null,n;return cp&1&&n.tag!==0&&Cl(),s=n.pendingLanes,s&1?n===vv?tc++:(tc=0,vv=n):tc=0,ho(),null}function Cl(){if(Gs!==null){var n=RE(cp),e=$i.transition,t=Nt;try{if($i.transition=null,Nt=16>n?16:n,Gs===null)var i=!1;else{if(n=Gs,Gs=null,cp=0,Tt&6)throw Error(ye(331));var r=Tt;for(Tt|=4,De=n.current;De!==null;){var s=De,o=s.child;if(De.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var f=l[c];for(De=f;De!==null;){var h=De;switch(h.tag){case 0:case 11:case 15:$u(8,h,s)}var d=h.child;if(d!==null)d.return=h,De=d;else for(;De!==null;){h=De;var m=h.sibling,v=h.return;if(Bw(h),h===f){De=null;break}if(m!==null){m.return=v,De=m;break}De=v}}}var _=s.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var M=E.sibling;E.sibling=null,E=M}while(E!==null)}}De=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,De=o;else e:for(;De!==null;){if(s=De,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$u(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,De=g;break e}De=s.return}}var x=n.current;for(De=x;De!==null;){o=De;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,De=S;else e:for(o=x;De!==null;){if(l=De,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ip(9,l)}}catch(A){sn(l,l.return,A)}if(l===o){De=null;break e}var T=l.sibling;if(T!==null){T.return=l.return,De=T;break e}De=l.return}}if(Tt=r,ho(),zr&&typeof zr.onPostCommitFiberRoot=="function")try{zr.onPostCommitFiberRoot(wp,n)}catch{}i=!0}return i}finally{Nt=t,$i.transition=e}}return!1}function BS(n,e,t){e=Dl(t,e),e=Pw(n,e,1),n=Zs(n,e,1),e=ii(),n!==null&&(jc(n,1,e),yi(n,e))}function sn(n,e,t){if(n.tag===3)BS(n,n,t);else for(;e!==null;){if(e.tag===3){BS(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Js===null||!Js.has(i))){n=Dl(t,n),n=bw(e,n,1),e=Zs(e,n,1),n=ii(),e!==null&&(jc(e,1,n),yi(e,n));break}}e=e.return}}function jP(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=ii(),n.pingedLanes|=n.suspendedLanes&t,Ln===n&&(On&t)===t&&(Mn===4||Mn===3&&(On&130023424)===On&&500>fn()-$1?Jo(n,0):Q1|=t),yi(n,e)}function Jw(n,e){e===0&&(n.mode&1?(e=xh,xh<<=1,!(xh&130023424)&&(xh=4194304)):e=1);var t=ii();n=ps(n,e),n!==null&&(jc(n,e,t),yi(n,t))}function YP(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Jw(n,t)}function qP(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(ye(314))}i!==null&&i.delete(e),Jw(n,t)}var Kw;Kw=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||gi.current)mi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return mi=!1,DP(n,e,t);mi=!!(n.flags&131072)}else mi=!1,Yt&&e.flags&1048576&&ew(e,tp,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Pd(n,e),n=e.pendingProps;var r=Ll(e,Kn.current);Tl(e,t),r=j1(null,e,i,n,r,t);var s=Y1();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vi(i)?(s=!0,$d(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,H1(e),r.updater=bp,e.stateNode=r,r._reactInternals=e,sv(e,i,n,t),e=lv(null,e,i,!0,s,t)):(e.tag=0,Yt&&s&&U1(e),ni(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Pd(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=JP(i),n=cr(i,n),r){case 0:e=av(null,e,i,n,t);break e;case 1:e=bS(null,e,i,n,t);break e;case 11:e=RS(null,e,i,n,t);break e;case 14:e=PS(null,e,i,cr(i.type,n),t);break e}throw Error(ye(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cr(i,r),av(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cr(i,r),bS(n,e,i,r,t);case 3:e:{if(Uw(e),n===null)throw Error(ye(387));i=e.pendingProps,s=e.memoizedState,r=s.element,rw(n,e),rp(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Dl(Error(ye(423)),e),e=LS(n,e,i,t,r);break e}else if(i!==r){r=Dl(Error(ye(424)),e),e=LS(n,e,i,t,r);break e}else for(bi=qs(e.stateNode.containerInfo.firstChild),Ii=e,Yt=!0,dr=null,t=lw(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Il(),i===r){e=ms(n,e,t);break e}ni(n,e,i,t)}e=e.child}return e;case 5:return uw(e),n===null&&nv(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,K0(i,r)?o=null:s!==null&&K0(i,s)&&(e.flags|=32),Nw(n,e),ni(n,e,o,t),e.child;case 6:return n===null&&nv(e),null;case 13:return Dw(n,e,t);case 4:return V1(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Nl(e,null,i,t):ni(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cr(i,r),RS(n,e,i,r,t);case 7:return ni(n,e,e.pendingProps,t),e.child;case 8:return ni(n,e,e.pendingProps.children,t),e.child;case 12:return ni(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,kt(np,i._currentValue),i._currentValue=o,s!==null)if(yr(s.value,o)){if(s.children===r.children&&!gi.current){e=ms(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=cs(-1,t&-t),c.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?c.next=c:(c.next=h.next,h.next=c),f.pending=c}}s.lanes|=t,c=s.alternate,c!==null&&(c.lanes|=t),iv(s.return,t,e),l.lanes|=t;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ye(341));o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),iv(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ni(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Tl(e,t),r=er(r),i=i(r),e.flags|=1,ni(n,e,i,t),e.child;case 14:return i=e.type,r=cr(i,e.pendingProps),r=cr(i.type,r),PS(n,e,i,r,t);case 15:return Lw(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cr(i,r),Pd(n,e),e.tag=1,vi(i)?(n=!0,$d(e)):n=!1,Tl(e,t),ow(e,i,r),sv(e,i,r,t),lv(null,e,i,!0,n,t);case 19:return Ow(n,e,t);case 22:return Iw(n,e,t)}throw Error(ye(156,e.tag))};function Qw(n,e){return wE(n,e)}function ZP(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qi(n,e,t,i){return new ZP(n,e,t,i)}function iy(n){return n=n.prototype,!(!n||!n.isReactComponent)}function JP(n){if(typeof n=="function")return iy(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M1)return 11;if(n===E1)return 14}return 2}function Qs(n,e){var t=n.alternate;return t===null?(t=Qi(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Id(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")iy(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case sl:return Ko(t.children,r,s,e);case S1:o=8,r|=8;break;case P0:return n=Qi(12,t,e,r|2),n.elementType=P0,n.lanes=s,n;case b0:return n=Qi(13,t,e,r),n.elementType=b0,n.lanes=s,n;case L0:return n=Qi(19,t,e,r),n.elementType=L0,n.lanes=s,n;case aE:return Up(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case sE:o=10;break e;case oE:o=9;break e;case M1:o=11;break e;case E1:o=14;break e;case Fs:o=16,i=null;break e}throw Error(ye(130,n==null?n:typeof n,""))}return e=Qi(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Ko(n,e,t,i){return n=Qi(7,n,i,e),n.lanes=t,n}function Up(n,e,t,i){return n=Qi(22,n,i,e),n.elementType=aE,n.lanes=t,n.stateNode={isHidden:!1},n}function Dg(n,e,t){return n=Qi(6,n,null,e),n.lanes=t,n}function Og(n,e,t){return e=Qi(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function KP(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gg(0),this.expirationTimes=gg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gg(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ry(n,e,t,i,r,s,o,l,c){return n=new KP(n,e,t,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Qi(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},H1(s),n}function QP(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rl,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function $w(n){if(!n)return so;n=n._reactInternals;e:{if(ha(n)!==n||n.tag!==1)throw Error(ye(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ye(171))}if(n.tag===1){var t=n.type;if(vi(t))return QE(n,t,e)}return e}function eT(n,e,t,i,r,s,o,l,c){return n=ry(t,i,!0,n,r,s,o,l,c),n.context=$w(null),t=n.current,i=ii(),r=Ks(t),s=cs(i,r),s.callback=e??null,Zs(t,s,r),n.current.lanes=r,jc(n,r,i),yi(n,i),n}function Dp(n,e,t,i){var r=e.current,s=ii(),o=Ks(r);return t=$w(t),e.context===null?e.context=t:e.pendingContext=t,e=cs(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Zs(r,e,o),n!==null&&(gr(n,r,o,s),Cd(n,r,o)),o}function hp(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function HS(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function sy(n,e){HS(n,e),(n=n.alternate)&&HS(n,e)}function $P(){return null}var tT=typeof reportError=="function"?reportError:function(n){console.error(n)};function oy(n){this._internalRoot=n}Op.prototype.render=oy.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ye(409));Dp(n,e,null,null)};Op.prototype.unmount=oy.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;oa(function(){Dp(null,n,null,null)}),e[ds]=null}};function Op(n){this._internalRoot=n}Op.prototype.unstable_scheduleHydration=function(n){if(n){var e=LE();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Bs.length&&e!==0&&e<Bs[t].priority;t++);Bs.splice(t,0,n),t===0&&NE(n)}};function ay(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Fp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function VS(){}function eb(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var f=hp(o);s.call(f)}}var o=eT(e,i,n,0,null,!1,!1,"",VS);return n._reactRootContainer=o,n[ds]=o.current,gc(n.nodeType===8?n.parentNode:n),oa(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var f=hp(c);l.call(f)}}var c=ry(n,0,!1,null,null,!1,!1,"",VS);return n._reactRootContainer=c,n[ds]=c.current,gc(n.nodeType===8?n.parentNode:n),oa(function(){Dp(e,c,t,i)}),c}function kp(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var l=r;r=function(){var c=hp(o);l.call(c)}}Dp(e,o,n,r)}else o=eb(t,e,n,r,i);return hp(o)}PE=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Gu(e.pendingLanes);t!==0&&(C1(e,t|1),yi(e,fn()),!(Tt&6)&&(Ol=fn()+500,ho()))}break;case 13:oa(function(){var i=ps(n,1);if(i!==null){var r=ii();gr(i,n,1,r)}}),sy(n,1)}};A1=function(n){if(n.tag===13){var e=ps(n,134217728);if(e!==null){var t=ii();gr(e,n,134217728,t)}sy(n,134217728)}};bE=function(n){if(n.tag===13){var e=Ks(n),t=ps(n,e);if(t!==null){var i=ii();gr(t,n,e,i)}sy(n,e)}};LE=function(){return Nt};IE=function(n,e){var t=Nt;try{return Nt=n,e()}finally{Nt=t}};H0=function(n,e,t){switch(e){case"input":if(U0(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Rp(i);if(!r)throw Error(ye(90));uE(i),U0(i,r)}}}break;case"textarea":fE(n,t);break;case"select":e=t.value,e!=null&&Sl(n,!!t.multiple,e,!1)}};yE=ey;_E=oa;var tb={usingClientEntryPoint:!1,Events:[qc,ul,Rp,gE,vE,ey]},Ru={findFiberByHostInstance:Vo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nb={bundleType:Ru.bundleType,version:Ru.version,rendererPackageName:Ru.rendererPackageName,rendererConfig:Ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ME(n),n===null?null:n.stateNode},findFiberByHostInstance:Ru.findFiberByHostInstance||$P,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{wp=Lh.inject(nb),zr=Lh}catch{}}Oi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tb;Oi.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ay(e))throw Error(ye(200));return QP(n,e,null,t)};Oi.createRoot=function(n,e){if(!ay(n))throw Error(ye(299));var t=!1,i="",r=tT;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=ry(n,1,!1,null,null,t,!1,i,r),n[ds]=e.current,gc(n.nodeType===8?n.parentNode:n),new oy(e)};Oi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ye(188)):(n=Object.keys(n).join(","),Error(ye(268,n)));return n=ME(e),n=n===null?null:n.stateNode,n};Oi.flushSync=function(n){return oa(n)};Oi.hydrate=function(n,e,t){if(!Fp(e))throw Error(ye(200));return kp(null,n,e,!0,t)};Oi.hydrateRoot=function(n,e,t){if(!ay(n))throw Error(ye(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=tT;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=eT(e,null,n,1,t??null,r,!1,s,o),n[ds]=e.current,gc(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Op(e)};Oi.render=function(n,e,t){if(!Fp(e))throw Error(ye(200));return kp(null,n,e,!1,t)};Oi.unmountComponentAtNode=function(n){if(!Fp(n))throw Error(ye(40));return n._reactRootContainer?(oa(function(){kp(null,null,n,!1,function(){n._reactRootContainer=null,n[ds]=null})}),!0):!1};Oi.unstable_batchedUpdates=ey;Oi.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Fp(t))throw Error(ye(200));if(n==null||n._reactInternals===void 0)throw Error(ye(38));return kp(n,e,t,!1,i)};Oi.version="18.2.0-next-9e3b772b8-20220608";function nT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nT)}catch(n){console.error(n)}}nT(),eE.exports=Oi;var ib=eE.exports,GS=ib;A0.createRoot=GS.createRoot,A0.hydrateRoot=GS.hydrateRoot;/**
 * @remix-run/router v1.6.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tc(){return Tc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Tc.apply(this,arguments)}var Ws;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ws||(Ws={}));const WS="popstate";function rb(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:l}=i.location;return xv("",{pathname:s,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:dp(r)}return ob(e,t,null,n)}function yn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ly(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sb(){return Math.random().toString(36).substr(2,8)}function XS(n,e){return{usr:n.state,key:n.key,idx:e}}function xv(n,e,t,i){return t===void 0&&(t=null),Tc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Xl(e):e,{state:t,key:e&&e.key||i||sb()})}function dp(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Xl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function ob(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,l=Ws.Pop,c=null,f=h();f==null&&(f=0,o.replaceState(Tc({},o.state,{idx:f}),""));function h(){return(o.state||{idx:null}).idx}function d(){l=Ws.Pop;let M=h(),g=M==null?null:M-f;f=M,c&&c({action:l,location:E.location,delta:g})}function m(M,g){l=Ws.Push;let x=xv(E.location,M,g);t&&t(x,M),f=h()+1;let S=XS(x,f),T=E.createHref(x);try{o.pushState(S,"",T)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;r.location.assign(T)}s&&c&&c({action:l,location:E.location,delta:1})}function v(M,g){l=Ws.Replace;let x=xv(E.location,M,g);t&&t(x,M),f=h();let S=XS(x,f),T=E.createHref(x);o.replaceState(S,"",T),s&&c&&c({action:l,location:E.location,delta:0})}function _(M){let g=r.location.origin!=="null"?r.location.origin:r.location.href,x=typeof M=="string"?M:dp(M);return yn(g,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,g)}let E={get action(){return l},get location(){return n(r,o)},listen(M){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(WS,d),c=M,()=>{r.removeEventListener(WS,d),c=null}},createHref(M){return e(r,M)},createURL:_,encodeLocation(M){let g=_(M);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:v,go(M){return o.go(M)}};return E}var jS;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(jS||(jS={}));function ab(n,e,t){t===void 0&&(t="/");let i=typeof e=="string"?Xl(e):e,r=uy(i.pathname||"/",t);if(r==null)return null;let s=iT(n);lb(s);let o=null;for(let l=0;o==null&&l<s.length;++l)o=vb(s[l],xb(r));return o}function iT(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(yn(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let f=$s([i,c.relativePath]),h=t.concat(c);s.children&&s.children.length>0&&(yn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),iT(s.children,e,h,f)),!(s.path==null&&!s.index)&&e.push({path:f,score:mb(f,s.index),routesMeta:h})};return n.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))r(s,o);else for(let c of rT(s.path))r(s,o,c)}),e}function rT(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=rT(i.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),r&&l.push(...o),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function lb(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:gb(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const ub=/^:\w+$/,cb=3,fb=2,hb=1,db=10,pb=-2,YS=n=>n==="*";function mb(n,e){let t=n.split("/"),i=t.length;return t.some(YS)&&(i+=pb),e&&(i+=fb),t.filter(r=>!YS(r)).reduce((r,s)=>r+(ub.test(s)?cb:s===""?hb:db),i)}function gb(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function vb(n,e){let{routesMeta:t}=n,i={},r="/",s=[];for(let o=0;o<t.length;++o){let l=t[o],c=o===t.length-1,f=r==="/"?e:e.slice(r.length)||"/",h=yb({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f);if(!h)return null;Object.assign(i,h.params);let d=l.route;s.push({params:i,pathname:$s([r,h.pathname]),pathnameBase:wb($s([r,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(r=$s([r,h.pathnameBase]))}return s}function yb(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=_b(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((f,h,d)=>{if(h==="*"){let m=l[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}return f[h]=Sb(l[d]||"",h),f},{}),pathname:s,pathnameBase:o,pattern:n}}function _b(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),ly(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,l)=>(i.push(l),"/([^\\/]+)"));return n.endsWith("*")?(i.push("*"),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function xb(n){try{return decodeURI(n)}catch(e){return ly(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Sb(n,e){try{return decodeURIComponent(n)}catch(t){return ly(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+n+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+t+").")),n}}function uy(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function Mb(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Xl(n):n;return{pathname:t?t.startsWith("/")?t:Eb(t,e):e,search:Tb(i),hash:Cb(r)}}function Eb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Fg(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function oT(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Xl(n):(r=Tc({},n),yn(!r.pathname||!r.pathname.includes("?"),Fg("?","pathname","search",r)),yn(!r.pathname||!r.pathname.includes("#"),Fg("#","pathname","hash",r)),yn(!r.search||!r.search.includes("#"),Fg("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,l;if(i||o==null)l=t;else{let d=e.length-1;if(o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),d-=1;r.pathname=m.join("/")}l=d>=0?e[d]:"/"}let c=Mb(r,l),f=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}const $s=n=>n.join("/").replace(/\/\/+/g,"/"),wb=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Tb=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Cb=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Ab(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const aT=["post","put","patch","delete"];new Set(aT);const Rb=["get",...aT];new Set(Rb);/**
 * React Router v6.12.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pp(){return pp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},pp.apply(this,arguments)}const cy=K.createContext(null),Pb=K.createContext(null),jl=K.createContext(null),zp=K.createContext(null),po=K.createContext({outlet:null,matches:[],isDataRoute:!1}),lT=K.createContext(null);function bb(n,e){let{relative:t}=e===void 0?{}:e;Jc()||yn(!1);let{basename:i,navigator:r}=K.useContext(jl),{hash:s,pathname:o,search:l}=cT(n,{relative:t}),c=o;return i!=="/"&&(c=o==="/"?i:$s([i,o])),r.createHref({pathname:c,search:l,hash:s})}function Jc(){return K.useContext(zp)!=null}function Bp(){return Jc()||yn(!1),K.useContext(zp).location}function uT(n){K.useContext(jl).static||K.useLayoutEffect(n)}function Lb(){let{isDataRoute:n}=K.useContext(po);return n?jb():Ib()}function Ib(){Jc()||yn(!1);let n=K.useContext(cy),{basename:e,navigator:t}=K.useContext(jl),{matches:i}=K.useContext(po),{pathname:r}=Bp(),s=JSON.stringify(sT(i).map(c=>c.pathnameBase)),o=K.useRef(!1);return uT(()=>{o.current=!0}),K.useCallback(function(c,f){if(f===void 0&&(f={}),!o.current)return;if(typeof c=="number"){t.go(c);return}let h=oT(c,JSON.parse(s),r,f.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:$s([e,h.pathname])),(f.replace?t.replace:t.push)(h,f.state,f)},[e,t,s,r,n])}const Nb=K.createContext(null);function Ub(n){let e=K.useContext(po).outlet;return e&&K.createElement(Nb.Provider,{value:n},e)}function cT(n,e){let{relative:t}=e===void 0?{}:e,{matches:i}=K.useContext(po),{pathname:r}=Bp(),s=JSON.stringify(sT(i).map(o=>o.pathnameBase));return K.useMemo(()=>oT(n,JSON.parse(s),r,t==="path"),[n,s,r,t])}function Db(n,e){return Ob(n,e)}function Ob(n,e,t){Jc()||yn(!1);let{navigator:i}=K.useContext(jl),{matches:r}=K.useContext(po),s=r[r.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let c=Bp(),f;if(e){var h;let E=typeof e=="string"?Xl(e):e;l==="/"||(h=E.pathname)!=null&&h.startsWith(l)||yn(!1),f=E}else f=c;let d=f.pathname||"/",m=l==="/"?d:d.slice(l.length)||"/",v=ab(n,{pathname:m}),_=Hb(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},o,E.params),pathname:$s([l,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:$s([l,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),r,t);return e&&_?K.createElement(zp.Provider,{value:{location:pp({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ws.Pop}},_):_}function Fb(){let n=Xb(),e=Ab(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:r},t):null,s)}const kb=K.createElement(Fb,null);class zb extends K.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?K.createElement(po.Provider,{value:this.props.routeContext},K.createElement(lT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Bb(n){let{routeContext:e,match:t,children:i}=n,r=K.useContext(cy);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),K.createElement(po.Provider,{value:e},i)}function Hb(n,e,t){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),n==null){var r;if((r=t)!=null&&r.errors)n=t.matches;else return null}let s=n,o=(i=t)==null?void 0:i.errors;if(o!=null){let l=s.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id]));l>=0||yn(!1),s=s.slice(0,Math.min(s.length,l+1))}return s.reduceRight((l,c,f)=>{let h=c.route.id?o==null?void 0:o[c.route.id]:null,d=null;t&&(d=c.route.errorElement||kb);let m=e.concat(s.slice(0,f+1)),v=()=>{let _;return h?_=d:c.route.Component?_=K.createElement(c.route.Component,null):c.route.element?_=c.route.element:_=l,K.createElement(Bb,{match:c,routeContext:{outlet:l,matches:m,isDataRoute:t!=null},children:_})};return t&&(c.route.ErrorBoundary||c.route.errorElement||f===0)?K.createElement(zb,{location:t.location,revalidation:t.revalidation,component:d,error:h,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()},null)}var Sv;(function(n){n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate"})(Sv||(Sv={}));var Cc;(function(n){n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId"})(Cc||(Cc={}));function Vb(n){let e=K.useContext(cy);return e||yn(!1),e}function Gb(n){let e=K.useContext(Pb);return e||yn(!1),e}function Wb(n){let e=K.useContext(po);return e||yn(!1),e}function fT(n){let e=Wb(),t=e.matches[e.matches.length-1];return t.route.id||yn(!1),t.route.id}function Xb(){var n;let e=K.useContext(lT),t=Gb(Cc.UseRouteError),i=fT(Cc.UseRouteError);return e||((n=t.errors)==null?void 0:n[i])}function jb(){let{router:n}=Vb(Sv.UseNavigateStable),e=fT(Cc.UseNavigateStable),t=K.useRef(!1);return uT(()=>{t.current=!0}),K.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,pp({fromRouteId:e},s)))},[n,e])}function Yb(n){return Ub(n.context)}function Mv(n){yn(!1)}function qb(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Ws.Pop,navigator:s,static:o=!1}=n;Jc()&&yn(!1);let l=e.replace(/^\/*/,"/"),c=K.useMemo(()=>({basename:l,navigator:s,static:o}),[l,s,o]);typeof i=="string"&&(i=Xl(i));let{pathname:f="/",search:h="",hash:d="",state:m=null,key:v="default"}=i,_=K.useMemo(()=>{let E=uy(f,l);return E==null?null:{location:{pathname:E,search:h,hash:d,state:m,key:v},navigationType:r}},[l,f,h,d,m,v,r]);return _==null?null:K.createElement(jl.Provider,{value:c},K.createElement(zp.Provider,{children:t,value:_}))}function Zb(n){let{children:e,location:t}=n;return Db(Ev(e),t)}var qS;(function(n){n[n.pending=0]="pending",n[n.success=1]="success",n[n.error=2]="error"})(qS||(qS={}));new Promise(()=>{});function Ev(n,e){e===void 0&&(e=[]);let t=[];return K.Children.forEach(n,(i,r)=>{if(!K.isValidElement(i))return;let s=[...e,r];if(i.type===K.Fragment){t.push.apply(t,Ev(i.props.children,s));return}i.type!==Mv&&yn(!1),!i.props.index||!i.props.children||yn(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Ev(i.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.12.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wv(){return wv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},wv.apply(this,arguments)}function Jb(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Kb(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Qb(n,e){return n.button===0&&(!e||e==="_self")&&!Kb(n)}const $b=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],ZS="startTransition";function e4(n){let{basename:e,children:t,window:i}=n,r=K.useRef();r.current==null&&(r.current=rb({window:i,v5Compat:!0}));let s=r.current,[o,l]=K.useState({action:s.action,location:s.location}),c=K.useCallback(f=>{ZS in Fx?Fx[ZS](()=>l(f)):l(f)},[l]);return K.useLayoutEffect(()=>s.listen(c),[s,c]),K.createElement(qb,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s})}const t4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",n4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i4=K.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:l,target:c,to:f,preventScrollReset:h}=e,d=Jb(e,$b),{basename:m}=K.useContext(jl),v,_=!1;if(typeof f=="string"&&n4.test(f)&&(v=f,t4))try{let x=new URL(window.location.href),S=f.startsWith("//")?new URL(x.protocol+f):new URL(f),T=uy(S.pathname,m);S.origin===x.origin&&T!=null?f=T+S.search+S.hash:_=!0}catch{}let E=bb(f,{relative:r}),M=r4(f,{replace:o,state:l,target:c,preventScrollReset:h,relative:r});function g(x){i&&i(x),x.defaultPrevented||M(x)}return K.createElement("a",wv({},d,{href:v||E,onClick:_||s?i:g,ref:t,target:c}))});var JS;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmitImpl="useSubmitImpl",n.UseFetcher="useFetcher"})(JS||(JS={}));var KS;(function(n){n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(KS||(KS={}));function r4(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o}=e===void 0?{}:e,l=Lb(),c=Bp(),f=cT(n,{relative:o});return K.useCallback(h=>{if(Qb(h,t)){h.preventDefault();let d=i!==void 0?i:dp(c)===dp(f);l(n,{replace:d,state:r,preventScrollReset:s,relative:o})}},[c,l,f,i,r,t,n,s,o])}const s4=n=>K.createElement("svg",{width:148,height:40,viewBox:"0 0 148 40",xmlns:"http://www.w3.org/2000/svg",...n},K.createElement("path",{d:"M32.3136 16.8446C32.1592 16.3593 31.8501 16.1191 31.4049 16.1191H22.7617L27.0563 1.6515C27.2434 1.02494 27.081 0.549128 26.6644 0.195795C26.2964 -0.115113 25.7576 -0.0444568 25.4527 0.327714L7.8988 21.7723C7.59389 22.1445 7.52166 22.6109 7.68514 23.1385C7.84255 23.6473 8.1486 23.8923 8.59376 23.8923H17.2369L12.9423 38.3787C12.7557 39.0052 12.9146 39.467 13.3343 39.8108C13.6099 40.0417 14.1677 40.1406 14.5817 39.6366L32.0999 18.1919C32.4044 17.8198 32.4801 17.3722 32.3136 16.8446Z",fill:"#D9D9D9"}),K.createElement("path",{d:"M41.1985 25V14.0909H42.8445V23.5831H47.7876V25H41.1985ZM54.7203 21.6069V16.8182H56.3184V25H54.7523V23.5831H54.6671C54.4789 24.0199 54.177 24.3839 53.7615 24.6751C53.3496 24.9627 52.8365 25.1065 52.2221 25.1065C51.6966 25.1065 51.2314 24.9911 50.8265 24.7603C50.4252 24.5259 50.1092 24.1797 49.8784 23.7216C49.6511 23.2635 49.5375 22.6971 49.5375 22.0224V16.8182H51.1301V21.8306C51.1301 22.3881 51.2846 22.832 51.5936 23.1623C51.9025 23.4925 52.3038 23.6577 52.7974 23.6577C53.0957 23.6577 53.3922 23.5831 53.687 23.4339C53.9853 23.2848 54.2321 23.0593 54.4274 22.7575C54.6262 22.4556 54.7239 22.0721 54.7203 21.6069ZM58.4584 25V16.8182H60.051V25H58.4584ZM59.2627 15.5558C58.9857 15.5558 58.7478 15.4634 58.5489 15.2788C58.3536 15.0906 58.2559 14.8668 58.2559 14.6076C58.2559 14.3448 58.3536 14.1211 58.5489 13.9364C58.7478 13.7482 58.9857 13.6541 59.2627 13.6541C59.5397 13.6541 59.7758 13.7482 59.9711 13.9364C60.17 14.1211 60.2694 14.3448 60.2694 14.6076C60.2694 14.8668 60.17 15.0906 59.9711 15.2788C59.7758 15.4634 59.5397 15.5558 59.2627 15.5558ZM68.3248 18.8157L66.8812 19.0714C66.8208 18.8867 66.725 18.7109 66.5936 18.544C66.4657 18.3771 66.2917 18.2404 66.0716 18.1339C65.8514 18.0273 65.5762 17.9741 65.2459 17.9741C64.7949 17.9741 64.4185 18.0753 64.1167 18.2777C63.8148 18.4766 63.6639 18.734 63.6639 19.0501C63.6639 19.3235 63.7651 19.5437 63.9675 19.7106C64.1699 19.8775 64.4966 20.0142 64.9476 20.1207L66.2473 20.419C67.0002 20.593 67.5613 20.8612 67.9306 21.2234C68.2999 21.5856 68.4846 22.0561 68.4846 22.6349C68.4846 23.125 68.3425 23.5618 68.0584 23.9453C67.7779 24.3253 67.3855 24.6236 66.8812 24.8402C66.3805 25.0568 65.7999 25.1651 65.1394 25.1651C64.2232 25.1651 63.4757 24.9698 62.8968 24.5792C62.318 24.185 61.9629 23.6257 61.8315 22.9013L63.3709 22.6669C63.4668 23.0682 63.6639 23.3718 63.9622 23.5778C64.2605 23.7802 64.6493 23.8814 65.1287 23.8814C65.6507 23.8814 66.068 23.7731 66.3805 23.5565C66.693 23.3363 66.8493 23.0682 66.8493 22.7521C66.8493 22.4964 66.7534 22.2816 66.5616 22.1076C66.3734 21.9336 66.084 21.8022 65.6934 21.7134L64.3084 21.4098C63.5449 21.2358 62.9803 20.9588 62.6145 20.5788C62.2523 20.1989 62.0712 19.7177 62.0712 19.1353C62.0712 18.6523 62.2061 18.2298 62.476 17.8675C62.7459 17.5053 63.1188 17.223 63.5946 17.0206C64.0705 16.8146 64.6156 16.7116 65.2299 16.7116C66.1142 16.7116 66.8102 16.9034 67.318 17.2869C67.8258 17.6669 68.1614 18.1765 68.3248 18.8157ZM70.0812 25V23.9027L75.8181 15.5078H70.0333V14.0909H77.8316V15.1882L72.0947 23.5831H77.8795V25H70.0812ZM82.1968 25.1811C81.6784 25.1811 81.2096 25.0852 80.7906 24.8935C80.3715 24.6982 80.0395 24.4158 79.7945 24.0465C79.553 23.6772 79.4323 23.2244 79.4323 22.6882C79.4323 22.2266 79.521 21.8466 79.6986 21.5483C79.8762 21.25 80.1159 21.0138 80.4177 20.8398C80.7195 20.6658 81.0569 20.5344 81.4298 20.4457C81.8026 20.3569 82.1826 20.2894 82.5697 20.2433C83.0597 20.1864 83.4575 20.1403 83.7629 20.1048C84.0683 20.0657 84.2902 20.0036 84.4287 19.9183C84.5672 19.8331 84.6365 19.6946 84.6365 19.5028V19.4656C84.6365 19.0004 84.5051 18.6399 84.2423 18.3842C83.983 18.1286 83.596 18.0007 83.0811 18.0007C82.5448 18.0007 82.1222 18.1197 81.8133 18.3576C81.5079 18.592 81.2966 18.853 81.1794 19.1406L79.6826 18.7997C79.8602 18.3026 80.1194 17.9013 80.4603 17.5959C80.8048 17.2869 81.2007 17.0632 81.6482 16.9247C82.0956 16.7827 82.5661 16.7116 83.0597 16.7116C83.3865 16.7116 83.7327 16.7507 84.0985 16.8288C84.4678 16.9034 84.8122 17.0419 85.1318 17.2443C85.455 17.4467 85.7195 17.7362 85.9255 18.1126C86.1315 18.4854 86.2345 18.9702 86.2345 19.5668V25H84.6791V23.8814H84.6151C84.5122 24.0874 84.3577 24.2898 84.1517 24.4886C83.9458 24.6875 83.6812 24.8526 83.358 24.984C83.0349 25.1154 82.6478 25.1811 82.1968 25.1811ZM82.5431 23.9027C82.9834 23.9027 83.3598 23.8157 83.6723 23.6417C83.9884 23.4677 84.2281 23.2404 84.3914 22.9599C84.5583 22.6758 84.6418 22.3722 84.6418 22.049V20.9943C84.585 21.0511 84.4749 21.1044 84.3115 21.1541C84.1517 21.2003 83.9688 21.2411 83.7629 21.2766C83.5569 21.3086 83.3563 21.3388 83.161 21.3672C82.9656 21.392 82.8023 21.4134 82.6709 21.4311C82.3619 21.4702 82.0796 21.5359 81.824 21.6282C81.5718 21.7205 81.3694 21.8537 81.2167 22.0277C81.0676 22.1982 80.993 22.4254 80.993 22.7095C80.993 23.1037 81.1386 23.402 81.4298 23.6044C81.721 23.8033 82.0921 23.9027 82.5431 23.9027ZM88.3558 28.0682V16.8182H89.9112V18.1445H90.0444C90.1367 17.9741 90.2699 17.777 90.4439 17.5533C90.6179 17.3295 90.8594 17.1342 91.1683 16.9673C91.4773 16.7969 91.8857 16.7116 92.3935 16.7116C93.054 16.7116 93.6435 16.8786 94.1619 17.2124C94.6804 17.5462 95.087 18.0273 95.3817 18.6559C95.68 19.2844 95.8292 20.0408 95.8292 20.9251C95.8292 21.8093 95.6818 22.5675 95.3871 23.1996C95.0923 23.8281 94.6875 24.3129 94.1726 24.6538C93.6577 24.9911 93.07 25.1598 92.4094 25.1598C91.9123 25.1598 91.5057 25.0763 91.1896 24.9094C90.8771 24.7425 90.6321 24.5472 90.4545 24.3235C90.277 24.0998 90.1403 23.9009 90.0444 23.7269H89.9485V28.0682H88.3558ZM89.9165 20.9091C89.9165 21.4844 90 21.9886 90.1669 22.4219C90.3338 22.8551 90.5753 23.1942 90.8913 23.4393C91.2074 23.6808 91.5945 23.8015 92.0526 23.8015C92.5284 23.8015 92.9261 23.6754 93.2457 23.4233C93.5653 23.1676 93.8068 22.8214 93.9702 22.3846C94.1371 21.9478 94.2205 21.456 94.2205 20.9091C94.2205 20.3693 94.1388 19.8846 93.9755 19.4549C93.8157 19.0252 93.5742 18.6861 93.2511 18.4375C92.9315 18.1889 92.532 18.0646 92.0526 18.0646C91.5909 18.0646 91.2003 18.1836 90.8807 18.4215C90.5646 18.6594 90.3249 18.9915 90.1616 19.4176C89.9982 19.8437 89.9165 20.3409 89.9165 20.9091ZM99.9947 25.1811C99.4762 25.1811 99.0075 25.0852 98.5884 24.8935C98.1694 24.6982 97.8374 24.4158 97.5923 24.0465C97.3509 23.6772 97.2301 23.2244 97.2301 22.6882C97.2301 22.2266 97.3189 21.8466 97.4964 21.5483C97.674 21.25 97.9137 21.0138 98.2156 20.8398C98.5174 20.6658 98.8548 20.5344 99.2276 20.4457C99.6005 20.3569 99.9805 20.2894 100.368 20.2433C100.858 20.1864 101.255 20.1403 101.561 20.1048C101.866 20.0657 102.088 20.0036 102.227 19.9183C102.365 19.8331 102.434 19.6946 102.434 19.5028V19.4656C102.434 19.0004 102.303 18.6399 102.04 18.3842C101.781 18.1286 101.394 18.0007 100.879 18.0007C100.343 18.0007 99.9201 18.1197 99.6112 18.3576C99.3058 18.592 99.0945 18.853 98.9773 19.1406L97.4805 18.7997C97.658 18.3026 97.9173 17.9013 98.2582 17.5959C98.6026 17.2869 98.9986 17.0632 99.446 16.9247C99.8935 16.7827 100.364 16.7116 100.858 16.7116C101.184 16.7116 101.531 16.7507 101.896 16.8288C102.266 16.9034 102.61 17.0419 102.93 17.2443C103.253 17.4467 103.517 17.7362 103.723 18.1126C103.929 18.4854 104.032 18.9702 104.032 19.5668V25H102.477V23.8814H102.413C102.31 24.0874 102.156 24.2898 101.95 24.4886C101.744 24.6875 101.479 24.8526 101.156 24.984C100.833 25.1154 100.446 25.1811 99.9947 25.1811ZM100.341 23.9027C100.781 23.9027 101.158 23.8157 101.47 23.6417C101.786 23.4677 102.026 23.2404 102.189 22.9599C102.356 22.6758 102.44 22.3722 102.44 22.049V20.9943C102.383 21.0511 102.273 21.1044 102.109 21.1541C101.95 21.2003 101.767 21.2411 101.561 21.2766C101.355 21.3086 101.154 21.3388 100.959 21.3672C100.763 21.392 100.6 21.4134 100.469 21.4311C100.16 21.4702 99.8775 21.5359 99.6218 21.6282C99.3697 21.7205 99.1673 21.8537 99.0146 22.0277C98.8654 22.1982 98.7908 22.4254 98.7908 22.7095C98.7908 23.1037 98.9364 23.402 99.2276 23.6044C99.5188 23.8033 99.8899 23.9027 100.341 23.9027ZM109.973 16.8182V18.0966H105.504V16.8182H109.973ZM106.702 14.858H108.295V22.5977C108.295 22.9066 108.341 23.1392 108.434 23.2955C108.526 23.4482 108.645 23.5529 108.79 23.6097C108.94 23.663 109.101 23.6896 109.275 23.6896C109.403 23.6896 109.515 23.6808 109.611 23.663C109.707 23.6452 109.781 23.631 109.834 23.6204L110.122 24.9361C110.03 24.9716 109.898 25.0071 109.728 25.0426C109.557 25.0817 109.344 25.103 109.089 25.1065C108.67 25.1136 108.279 25.0391 107.917 24.8828C107.555 24.7266 107.262 24.4851 107.038 24.1584C106.814 23.8317 106.702 23.4215 106.702 22.9279V14.858ZM114.116 25.1811C113.597 25.1811 113.129 25.0852 112.71 24.8935C112.29 24.6982 111.958 24.4158 111.713 24.0465C111.472 23.6772 111.351 23.2244 111.351 22.6882C111.351 22.2266 111.44 21.8466 111.618 21.5483C111.795 21.25 112.035 21.0138 112.337 20.8398C112.638 20.6658 112.976 20.5344 113.349 20.4457C113.722 20.3569 114.102 20.2894 114.489 20.2433C114.979 20.1864 115.376 20.1403 115.682 20.1048C115.987 20.0657 116.209 20.0036 116.348 19.9183C116.486 19.8331 116.555 19.6946 116.555 19.5028V19.4656C116.555 19.0004 116.424 18.6399 116.161 18.3842C115.902 18.1286 115.515 18.0007 115 18.0007C114.464 18.0007 114.041 18.1197 113.732 18.3576C113.427 18.592 113.216 18.853 113.098 19.1406L111.602 18.7997C111.779 18.3026 112.038 17.9013 112.379 17.5959C112.724 17.2869 113.12 17.0632 113.567 16.9247C114.015 16.7827 114.485 16.7116 114.979 16.7116C115.305 16.7116 115.652 16.7507 116.017 16.8288C116.387 16.9034 116.731 17.0419 117.051 17.2443C117.374 17.4467 117.638 17.7362 117.844 18.1126C118.05 18.4854 118.153 18.9702 118.153 19.5668V25H116.598V23.8814H116.534C116.431 24.0874 116.277 24.2898 116.071 24.4886C115.865 24.6875 115.6 24.8526 115.277 24.984C114.954 25.1154 114.567 25.1811 114.116 25.1811ZM114.462 23.9027C114.902 23.9027 115.279 23.8157 115.591 23.6417C115.907 23.4677 116.147 23.2404 116.31 22.9599C116.477 22.6758 116.561 22.3722 116.561 22.049V20.9943C116.504 21.0511 116.394 21.1044 116.23 21.1541C116.071 21.2003 115.888 21.2411 115.682 21.2766C115.476 21.3086 115.275 21.3388 115.08 21.3672C114.885 21.392 114.721 21.4134 114.59 21.4311C114.281 21.4702 113.999 21.5359 113.743 21.6282C113.491 21.7205 113.288 21.8537 113.136 22.0277C112.987 22.1982 112.912 22.4254 112.912 22.7095C112.912 23.1037 113.058 23.402 113.349 23.6044C113.64 23.8033 114.011 23.9027 114.462 23.9027ZM123.934 25H120.403V14.0909H124.046C125.115 14.0909 126.033 14.3093 126.8 14.7461C127.567 15.1793 128.155 15.8026 128.563 16.6158C128.975 17.4254 129.181 18.3967 129.181 19.5295C129.181 20.6658 128.973 21.6424 128.558 22.4592C128.146 23.2759 127.549 23.9045 126.768 24.3448C125.987 24.7816 125.042 25 123.934 25ZM122.049 23.5618H123.844C124.675 23.5618 125.365 23.4055 125.916 23.093C126.466 22.777 126.878 22.3207 127.152 21.7241C127.425 21.1239 127.562 20.3924 127.562 19.5295C127.562 18.6737 127.425 17.9474 127.152 17.3509C126.882 16.7543 126.479 16.3015 125.942 15.9925C125.406 15.6836 124.74 15.5291 123.945 15.5291H122.049V23.5618ZM134.626 25.1651C133.82 25.1651 133.126 24.9929 132.544 24.6484C131.965 24.3004 131.517 23.8121 131.201 23.1836C130.889 22.5515 130.732 21.8111 130.732 20.9624C130.732 20.1243 130.889 19.3857 131.201 18.7464C131.517 18.1072 131.958 17.6083 132.522 17.2496C133.09 16.891 133.754 16.7116 134.514 16.7116C134.976 16.7116 135.423 16.788 135.857 16.9407C136.29 17.0934 136.679 17.3331 137.023 17.6598C137.368 17.9865 137.639 18.4109 137.838 18.9329C138.037 19.4513 138.137 20.0817 138.137 20.8239V21.3885H131.633V20.1953H136.576C136.576 19.7763 136.491 19.4052 136.32 19.082C136.15 18.7553 135.91 18.4979 135.601 18.3097C135.296 18.1214 134.937 18.0273 134.525 18.0273C134.078 18.0273 133.687 18.1374 133.353 18.3576C133.023 18.5742 132.767 18.8583 132.586 19.2099C132.409 19.5579 132.32 19.9361 132.32 20.3445V21.2766C132.32 21.8235 132.416 22.2887 132.607 22.6722C132.803 23.0558 133.074 23.3487 133.422 23.5511C133.77 23.75 134.177 23.8494 134.642 23.8494C134.944 23.8494 135.219 23.8068 135.468 23.7216C135.716 23.6328 135.931 23.5014 136.112 23.3274C136.294 23.1534 136.432 22.9386 136.528 22.6829L138.035 22.9545C137.915 23.3984 137.698 23.7873 137.385 24.1211C137.077 24.4513 136.688 24.7088 136.219 24.8935C135.754 25.0746 135.223 25.1651 134.626 25.1651ZM146.669 16.8182L143.702 25H141.997L139.025 16.8182H140.735L142.807 23.1143H142.892L144.959 16.8182H146.669Z",fill:"#D9D9D9"})),o4=n=>K.createElement("svg",{width:30,height:30,viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},K.createElement("path",{d:"M14.982 0.00322284C14.9515 0.00879699 14.9209 0.0171572 14.8931 0.025518C14.5624 0.100764 14.3289 0.398963 14.3372 0.738964V5.01964C14.3345 5.27603 14.4679 5.51571 14.6902 5.64669C14.9125 5.77489 15.1849 5.77489 15.4073 5.64669C15.6296 5.51571 15.763 5.27603 15.7602 5.01964V0.738964C15.7686 0.532734 15.6852 0.334864 15.5379 0.195518C15.3878 0.0533872 15.1849 -0.0162856 14.982 0.00322284ZM4.84313 4.19472C4.57632 4.24209 4.36231 4.43718 4.28727 4.69636C4.21223 4.95833 4.29005 5.23702 4.48738 5.42095L7.51126 8.4531C7.68358 8.6649 7.95873 8.76244 8.22554 8.70113C8.48958 8.63982 8.69802 8.4308 8.75917 8.16605C8.82031 7.89851 8.72304 7.6226 8.51181 7.44981L5.48793 4.41767C5.34062 4.25882 5.12662 4.178 4.90983 4.19472C4.8876 4.19472 4.86536 4.19472 4.84313 4.19472ZM25.032 4.19472C24.8708 4.21701 24.7207 4.29783 24.6095 4.41767L21.5857 7.44981C21.3744 7.6226 21.2772 7.89851 21.3383 8.16605C21.3994 8.4308 21.6079 8.63982 21.8719 8.70113C22.1387 8.76244 22.4139 8.6649 22.5862 8.4531L25.6101 5.42095C25.8324 5.20915 25.8964 4.87751 25.7657 4.59882C25.6323 4.31734 25.3377 4.1557 25.032 4.19472ZM15.0487 7.87342C11.1244 7.87342 7.93371 11.0728 7.93371 15.0079C7.93371 18.943 11.1244 22.1423 15.0487 22.1423C18.9731 22.1423 22.1638 18.943 22.1638 15.0079C22.1638 11.0728 18.9731 7.87342 15.0487 7.87342ZM0.618586 14.2944C0.226704 14.3502 -0.048447 14.7153 0.00713912 15.1082C0.0627252 15.5012 0.426814 15.7771 0.818696 15.7213H5.08771C5.3434 15.7241 5.58242 15.5903 5.71305 15.3674C5.8409 15.1444 5.8409 14.8713 5.71305 14.6484C5.58242 14.4254 5.3434 14.2916 5.08771 14.2944H0.818696C0.796462 14.2944 0.774227 14.2944 0.751993 14.2944C0.729758 14.2944 0.707524 14.2944 0.685289 14.2944C0.663055 14.2944 0.640821 14.2944 0.618586 14.2944ZM24.8097 14.2944C24.4178 14.3502 24.1426 14.7153 24.1982 15.1082C24.2538 15.5012 24.6179 15.7771 25.0098 15.7213H29.2788C29.5345 15.7241 29.7735 15.5903 29.9041 15.3674C30.032 15.1444 30.032 14.8713 29.9041 14.6484C29.7735 14.4254 29.5345 14.2916 29.2788 14.2944H25.0098C24.9875 14.2944 24.9653 14.2944 24.9431 14.2944C24.9208 14.2944 24.8986 14.2944 24.8764 14.2944C24.8541 14.2944 24.8319 14.2944 24.8097 14.2944ZM7.93371 21.3397C7.77252 21.362 7.62243 21.4428 7.51126 21.5627L4.48738 24.5948C4.27615 24.7676 4.17887 25.0435 4.24002 25.311C4.30116 25.5758 4.50961 25.7848 4.77365 25.8461C5.04046 25.9074 5.31561 25.8099 5.48793 25.5981L8.51181 22.5659C8.72304 22.3625 8.78696 22.0476 8.67301 21.7773C8.56184 21.5069 8.29224 21.3341 8.00042 21.3397C7.97818 21.3397 7.95595 21.3397 7.93371 21.3397ZM21.9414 21.3397C21.6746 21.3871 21.4606 21.5822 21.3855 21.8414C21.3105 22.1033 21.3883 22.382 21.5857 22.5659L24.6095 25.5981C24.7819 25.8099 25.057 25.9074 25.3238 25.8461C25.5879 25.7848 25.7963 25.5758 25.8574 25.311C25.9186 25.0435 25.8213 24.7676 25.6101 24.5948L22.5862 21.5627C22.4528 21.4205 22.2694 21.3425 22.0748 21.3397C22.0526 21.3397 22.0303 21.3397 22.0081 21.3397C21.9859 21.3397 21.9636 21.3397 21.9414 21.3397ZM14.982 24.2604C14.9515 24.266 14.9209 24.2743 14.8931 24.2827C14.5624 24.3579 14.3289 24.6561 14.3372 24.9961V29.2768C14.3345 29.5332 14.4679 29.7729 14.6902 29.9039C14.9125 30.032 15.1849 30.032 15.4073 29.9039C15.6296 29.7729 15.763 29.5332 15.7602 29.2768V24.9961C15.7686 24.7899 15.6852 24.592 15.5379 24.4527C15.3878 24.3105 15.1849 24.2409 14.982 24.2604Z",fill:"#FCF8A1"})),a4=n=>K.createElement("svg",{width:26,height:26,viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},K.createElement("path",{d:"M7.91639 3.28405C7.91639 11.5419 13.5809 18.2356 20.5678 18.2356C22.3047 18.2356 23.9595 17.82 25.4667 17.073C23.6128 21.9511 18.9086 25.4248 13.3797 25.4248C6.23421 25.4248 0.440613 19.6312 0.440613 12.4858C0.440613 7.21389 3.59936 2.68686 8.12202 0.669983C7.99514 1.52092 7.91639 2.39045 7.91639 3.28405Z",fill:"#FAF6B1"}));const Kc=K.createContext(),l4=({children:n})=>{const[e,t]=K.useState("dark"),[i,r]=K.useState("EN");return Ve.jsx(Kc.Provider,{value:{theme:e,setTheme:t,language:i,setLanguage:r},children:n})},QS=({text:n,icon:e,to:t,ph:i="0",pv:r="0",h:s="0",w:o="0",bgcolor:l="var(--yellow)",txcolor:c="var(--black)",fsize:f="1.5rem",c:h=""})=>{const{theme:d,setTheme:m,language:v,setLanguage:_}=K.useContext(Kc);return Ve.jsx(i4,{to:t,className:`button-component ${d} ${h}`,children:Ve.jsxs("div",{style:{paddingLeft:i,paddingRight:i,paddingTop:r,paddingBottom:r,height:s,width:o},children:[Ve.jsx("span",{className:"text",style:{fontSize:f},children:n}),e&&{icon:e}," "]})})},u4={home:{EN:"Home",ES:"Inicio"},about:{EN:"About",ES:"Sobre m"},skills:{EN:"Skills",ES:"Habilidades"},experience:{EN:"Experience",ES:"Experiencia"},blog:{EN:"Blog",ES:"Blog"},learning:{EN:"Learning",ES:"Aprendizaje"}},c4={hello:{EN:"Hi, I'm",ES:"Hola, soy"},description:{EN:"I am a front-end developer, back-end developer and soon to be data scientist.",ES:"Soy un desarrollador front-end, desarrollador back-end y pronto ser un cientfico de datos."},enjoy:{EN:"Enjoy your trip!",ES:"Disfruta tu viaje!"},download:{EN:"Download CV",ES:"Descargar CV"}},f4={title:{EN:"About me",ES:"Sobre m"},description:{EN:"I am a systems engineering student and software developer with experience in combining technologies to create high-quality, high-performance applications. My focus is on utilizing my technical knowledge to design innovative solutions that provide an excellent user experience and improve efficiency.",ES:"Soy un estudiante de ingeniera de sistemas y desarrollador de software con experiencia EN combinar tecnologas para crear aplicaciones de alta calidad y alto rendimiento. Mi enfoque est EN utilizar mis conocimientos tcnicos para disear soluciones innovadoras que brinden una excelente experiencia de usuario y mejoren la eficiencia."},email:{EN:"Email",ES:"Correo electrnico"},place:{EN:"Place",ES:"Lugar"}},h4={title:{EN:"Skills",ES:"Habilidades"},others:{EN:"Others",ES:"Otros"},skills:{EN:"Skills/Tools",ES:"Habilidades/Herramientas"}},d4={title:{EN:"Experience",ES:"Experiencia"},valhalla:{enterprise:"Valhalla",link:"https://valhalla.com.pe/",subtitle:{EN:"Back-End Developer / Technical Support",ES:"Desarrollador Back-End / Soporte Tcnico"},time:{EN:"Sept. 2022 - present",ES:"Sept. 2022 - presente"},description:{EN:"Development and maintenance of the back-end of the Valhalla project. Technical support of websites using WordPress and Shopify.",ES:"Desarrollo y mantenimiento del back-end del proyecto Valhalla. Soporte tcnico de sitios web utilizando WordPress y Shopify."},skills:{EN:"Skills",ES:"Habilidades"}}},$S={header:u4,home:c4,about:f4,skills:h4,experience:d4},p4=()=>{const{theme:n,setTheme:e,language:t,setLanguage:i}=K.useContext(Kc);let r=$S.header;const s=()=>{e(n==="dark"?"light":"dark")},o=()=>{i(t==="ES"?"EN":"ES")};return K.useEffect(()=>{r=$S.header,console.log(r)},[n,t]),Ve.jsx("header",{className:`header ${n}`,children:Ve.jsxs("div",{className:"container",children:[Ve.jsx(s4,{className:"logo-icon"}),Ve.jsx("nav",{className:"navbar",children:Ve.jsxs("ul",{children:[Ve.jsx("li",{className:"inav",children:r.home[t]}),Ve.jsx("li",{className:"inav",children:r.about[t]}),Ve.jsx("li",{className:"inav",children:r.skills[t]}),Ve.jsx("li",{className:"inav",children:r.experience[t]}),Ve.jsx("li",{children:Ve.jsx(QS,{to:"/blog/",text:`${r.blog[t]}`,c:"inav",w:"12rem",h:"3.5rem"})}),Ve.jsx("li",{children:Ve.jsx(QS,{to:"/learning/",text:`${r.learning[t]}`,c:"inav",w:"12rem",h:"3.5rem"})})]})}),Ve.jsxs("div",{className:"settings",children:[Ve.jsx("div",{className:"icon-theme",children:n==="dark"?Ve.jsx(o4,{onClick:s}):Ve.jsx(a4,{onClick:s})}),Ve.jsx("span",{className:"language",onClick:o,children:t})]})]})})};function m4(){return Ve.jsxs(Ve.Fragment,{children:[Ve.jsx(p4,{}),Ve.jsx(Yb,{})]})}const g4=n=>K.createElement("svg",{width:44,height:46,viewBox:"0 0 44 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},K.createElement("rect",{width:9,height:43,rx:4.5,transform:"matrix(-0.52099 -0.853563 -0.877651 0.479299 43.428 8.1012)",fill:"#FF4F3E"}),K.createElement("rect",{width:9,height:43,rx:4.5,transform:"matrix(-0.52099 0.853563 0.877651 0.479299 4.68896 17)",fill:"#3D89FF"})),v4=n=>K.createElement("svg",{width:46,height:47,viewBox:"0 0 46 47",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},K.createElement("rect",{width:9,height:46.5174,rx:4.5,transform:"matrix(-0.52099 0.853563 0.877651 0.4793 4.95178 0)",fill:"#38A852"}),K.createElement("rect",{width:9,height:43,rx:4.5,transform:"matrix(-0.52099 -0.853563 -0.877651 0.4793 45.9849 25.6821)",fill:"#FFBB00"}));/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Hp="153",y4={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},_4={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},hT=0,Tv=1,dT=2,x4=3,pT=0,Vp=1,nc=2,fr=3,gs=0,ri=1,Or=2,S4=2,fs=0,Qo=1,Al=2,Cv=3,Av=4,mT=5,Bo=100,gT=101,vT=102,Rv=103,Pv=104,yT=200,_T=201,xT=202,ST=203,fy=204,hy=205,MT=206,ET=207,wT=208,TT=209,CT=210,AT=0,RT=1,PT=2,mp=3,bT=4,LT=5,IT=6,NT=7,Qc=0,UT=1,DT=2,vr=0,OT=1,FT=2,kT=3,dy=4,zT=5,Gp=300,oo=301,ao=302,Ac=303,Rc=304,Yl=306,Pc=1e3,Jn=1001,bc=1002,cn=1003,gp=1004,M4=1004,ic=1005,E4=1005,hn=1006,py=1007,w4=1007,lo=1008,T4=1008,Hr=1009,BT=1010,HT=1011,Wp=1012,my=1013,us=1014,Fr=1015,Fl=1016,gy=1017,vy=1018,eo=1020,VT=1021,pi=1023,GT=1024,WT=1025,to=1026,aa=1027,XT=1028,yy=1029,jT=1030,_y=1031,xy=1033,Nd=33776,Ud=33777,Dd=33778,Od=33779,bv=35840,Lv=35841,Iv=35842,Nv=35843,YT=36196,Uv=37492,Dv=37496,Ov=37808,Fv=37809,kv=37810,zv=37811,Bv=37812,Hv=37813,Vv=37814,Gv=37815,Wv=37816,Xv=37817,jv=37818,Yv=37819,qv=37820,Zv=37821,Fd=36492,qT=36283,Jv=36284,Kv=36285,Qv=36286,ZT=2200,JT=2201,KT=2202,Lc=2300,Ic=2301,kd=2302,Xo=2400,jo=2401,Nc=2402,Xp=2500,Sy=2501,C4=0,A4=1,R4=2,My=3e3,no=3001,QT=3200,$T=3201,mo=0,e3=1,io="",ft="srgb",_r="srgb-linear",Ey="display-p3",P4=0,zd=7680,b4=7681,L4=7682,I4=7683,N4=34055,U4=34056,D4=5386,O4=512,F4=513,k4=514,z4=515,B4=516,H4=517,V4=518,t3=519,n3=512,i3=513,r3=514,s3=515,o3=516,a3=517,l3=518,u3=519,Uc=35044,G4=35048,W4=35040,X4=35045,j4=35049,Y4=35041,q4=35046,Z4=35050,J4=35042,K4="100",$v="300 es",vp=1035,kr=2e3,Dc=2001;class _s{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Yn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let eM=1234567;const $o=Math.PI/180,kl=180/Math.PI;function Ni(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Yn[n&255]+Yn[n>>8&255]+Yn[n>>16&255]+Yn[n>>24&255]+"-"+Yn[e&255]+Yn[e>>8&255]+"-"+Yn[e>>16&15|64]+Yn[e>>24&255]+"-"+Yn[t&63|128]+Yn[t>>8&255]+"-"+Yn[t>>16&255]+Yn[t>>24&255]+Yn[i&255]+Yn[i>>8&255]+Yn[i>>16&255]+Yn[i>>24&255]).toLowerCase()}function on(n,e,t){return Math.max(e,Math.min(t,n))}function wy(n,e){return(n%e+e)%e}function Q4(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function $4(n,e,t){return n!==e?(t-n)/(e-n):0}function rc(n,e,t){return(1-t)*n+t*e}function eL(n,e,t,i){return rc(n,e,1-Math.exp(-t*i))}function tL(n,e=1){return e-Math.abs(wy(n,e*2)-e)}function nL(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function iL(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function rL(n,e){return n+Math.floor(Math.random()*(e-n+1))}function sL(n,e){return n+Math.random()*(e-n)}function oL(n){return n*(.5-Math.random())}function aL(n){n!==void 0&&(eM=n);let e=eM+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function lL(n){return n*$o}function uL(n){return n*kl}function e1(n){return(n&n-1)===0&&n!==0}function c3(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function yp(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function cL(n,e,t,i,r){const s=Math.cos,o=Math.sin,l=s(t/2),c=o(t/2),f=s((e+i)/2),h=o((e+i)/2),d=s((e-i)/2),m=o((e-i)/2),v=s((i-e)/2),_=o((i-e)/2);switch(r){case"XYX":n.set(l*h,c*d,c*m,l*f);break;case"YZY":n.set(c*m,l*h,c*d,l*f);break;case"ZXZ":n.set(c*d,c*m,l*h,l*f);break;case"XZX":n.set(l*h,c*_,c*v,l*f);break;case"YXY":n.set(c*v,l*h,c*_,l*f);break;case"ZYZ":n.set(c*_,c*v,l*h,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Li(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function vt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const fL={DEG2RAD:$o,RAD2DEG:kl,generateUUID:Ni,clamp:on,euclideanModulo:wy,mapLinear:Q4,inverseLerp:$4,lerp:rc,damp:eL,pingpong:tL,smoothstep:nL,smootherstep:iL,randInt:rL,randFloat:sL,randFloatSpread:oL,seededRandom:aL,degToRad:lL,radToDeg:uL,isPowerOfTwo:e1,ceilPowerOfTwo:c3,floorPowerOfTwo:yp,setQuaternionFromProperEuler:cL,normalize:vt,denormalize:Li};class pe{constructor(e=0,t=0){pe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(on(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class gt{constructor(e,t,i,r,s,o,l,c,f){gt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,l,c,f)}set(e,t,i,r,s,o,l,c,f){const h=this.elements;return h[0]=e,h[1]=r,h[2]=l,h[3]=t,h[4]=s,h[5]=c,h[6]=i,h[7]=o,h[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[3],c=i[6],f=i[1],h=i[4],d=i[7],m=i[2],v=i[5],_=i[8],E=r[0],M=r[3],g=r[6],x=r[1],S=r[4],T=r[7],A=r[2],P=r[5],L=r[8];return s[0]=o*E+l*x+c*A,s[3]=o*M+l*S+c*P,s[6]=o*g+l*T+c*L,s[1]=f*E+h*x+d*A,s[4]=f*M+h*S+d*P,s[7]=f*g+h*T+d*L,s[2]=m*E+v*x+_*A,s[5]=m*M+v*S+_*P,s[8]=m*g+v*T+_*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],f=e[7],h=e[8];return t*o*h-t*l*f-i*s*h+i*l*c+r*s*f-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],f=e[7],h=e[8],d=h*o-l*f,m=l*c-h*s,v=f*s-o*c,_=t*d+i*m+r*v;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/_;return e[0]=d*E,e[1]=(r*f-h*i)*E,e[2]=(l*i-r*o)*E,e[3]=m*E,e[4]=(h*t-r*c)*E,e[5]=(r*s-l*t)*E,e[6]=v*E,e[7]=(i*c-f*t)*E,e[8]=(o*t-i*s)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,l){const c=Math.cos(s),f=Math.sin(s);return this.set(i*c,i*f,-i*(c*o+f*l)+o+e,-r*f,r*c,-r*(-f*o+c*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(kg.makeScale(e,t)),this}rotate(e){return this.premultiply(kg.makeRotation(-e)),this}translate(e,t){return this.premultiply(kg.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const kg=new gt;function f3(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const hL={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function gl(n,e){return new hL[n](e)}function Oc(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const tM={};function sc(n){n in tM||(tM[n]=!0,console.warn(n))}function Rl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function zg(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const dL=new gt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),pL=new gt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function mL(n){return n.convertSRGBToLinear().applyMatrix3(pL)}function gL(n){return n.applyMatrix3(dL).convertLinearToSRGB()}const vL={[_r]:n=>n,[ft]:n=>n.convertSRGBToLinear(),[Ey]:mL},yL={[_r]:n=>n,[ft]:n=>n.convertLinearToSRGB(),[Ey]:gL},qi={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return _r},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=vL[e],r=yL[t];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let Ia;class Ty{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ia===void 0&&(Ia=Oc("canvas")),Ia.width=e.width,Ia.height=e.height;const i=Ia.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Ia}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Oc("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Rl(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Rl(t[i]/255)*255):t[i]=Rl(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let _L=0;class Yo{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_L++}),this.uuid=Ni(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)r[o].isDataTexture?s.push(Bg(r[o].image)):s.push(Bg(r[o]))}else s=Bg(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function Bg(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Ty.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let xL=0;class an extends _s{constructor(e=an.DEFAULT_IMAGE,t=an.DEFAULT_MAPPING,i=Jn,r=Jn,s=hn,o=lo,l=pi,c=Hr,f=an.DEFAULT_ANISOTROPY,h=io){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:xL++}),this.uuid=Ni(),this.name="",this.source=new Yo(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=c,this.offset=new pe(0,0),this.repeat=new pe(1,1),this.center=new pe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(sc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===no?ft:io),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Gp)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Pc:e.x=e.x-Math.floor(e.x);break;case Jn:e.x=e.x<0?0:1;break;case bc:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Pc:e.y=e.y-Math.floor(e.y);break;case Jn:e.y=e.y<0?0:1;break;case bc:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return sc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ft?no:My}set encoding(e){sc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===no?ft:io}}an.DEFAULT_IMAGE=null;an.DEFAULT_MAPPING=Gp;an.DEFAULT_ANISOTROPY=1;class It{constructor(e=0,t=0,i=0,r=1){It.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,f=c[0],h=c[4],d=c[8],m=c[1],v=c[5],_=c[9],E=c[2],M=c[6],g=c[10];if(Math.abs(h-m)<.01&&Math.abs(d-E)<.01&&Math.abs(_-M)<.01){if(Math.abs(h+m)<.1&&Math.abs(d+E)<.1&&Math.abs(_+M)<.1&&Math.abs(f+v+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(f+1)/2,T=(v+1)/2,A=(g+1)/2,P=(h+m)/4,L=(d+E)/4,N=(_+M)/4;return S>T&&S>A?S<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(S),r=P/i,s=L/i):T>A?T<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(T),i=P/r,s=N/r):A<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(A),i=L/s,r=N/s),this.set(i,r,s,t),this}let x=Math.sqrt((M-_)*(M-_)+(d-E)*(d-E)+(m-h)*(m-h));return Math.abs(x)<.001&&(x=1),this.x=(M-_)/x,this.y=(d-E)/x,this.z=(m-h)/x,this.w=Math.acos((f+v+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class xr extends _s{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new It(0,0,e,t),this.scissorTest=!1,this.viewport=new It(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(sc("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===no?ft:io),this.texture=new an(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:hn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Yo(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class jp extends an{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=cn,this.minFilter=cn,this.wrapR=Jn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class SL extends xr{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new jp(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Cy extends an{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=cn,this.minFilter=cn,this.wrapR=Jn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ML extends xr{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Cy(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class EL extends xr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class _i{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,l){let c=i[r+0],f=i[r+1],h=i[r+2],d=i[r+3];const m=s[o+0],v=s[o+1],_=s[o+2],E=s[o+3];if(l===0){e[t+0]=c,e[t+1]=f,e[t+2]=h,e[t+3]=d;return}if(l===1){e[t+0]=m,e[t+1]=v,e[t+2]=_,e[t+3]=E;return}if(d!==E||c!==m||f!==v||h!==_){let M=1-l;const g=c*m+f*v+h*_+d*E,x=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const A=Math.sqrt(S),P=Math.atan2(A,g*x);M=Math.sin(M*P)/A,l=Math.sin(l*P)/A}const T=l*x;if(c=c*M+m*T,f=f*M+v*T,h=h*M+_*T,d=d*M+E*T,M===1-l){const A=1/Math.sqrt(c*c+f*f+h*h+d*d);c*=A,f*=A,h*=A,d*=A}}e[t]=c,e[t+1]=f,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const l=i[r],c=i[r+1],f=i[r+2],h=i[r+3],d=s[o],m=s[o+1],v=s[o+2],_=s[o+3];return e[t]=l*_+h*d+c*v-f*m,e[t+1]=c*_+h*m+f*d-l*v,e[t+2]=f*_+h*v+l*m-c*d,e[t+3]=h*_-l*d-c*m-f*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,l=Math.cos,c=Math.sin,f=l(i/2),h=l(r/2),d=l(s/2),m=c(i/2),v=c(r/2),_=c(s/2);switch(o){case"XYZ":this._x=m*h*d+f*v*_,this._y=f*v*d-m*h*_,this._z=f*h*_+m*v*d,this._w=f*h*d-m*v*_;break;case"YXZ":this._x=m*h*d+f*v*_,this._y=f*v*d-m*h*_,this._z=f*h*_-m*v*d,this._w=f*h*d+m*v*_;break;case"ZXY":this._x=m*h*d-f*v*_,this._y=f*v*d+m*h*_,this._z=f*h*_+m*v*d,this._w=f*h*d-m*v*_;break;case"ZYX":this._x=m*h*d-f*v*_,this._y=f*v*d+m*h*_,this._z=f*h*_-m*v*d,this._w=f*h*d+m*v*_;break;case"YZX":this._x=m*h*d+f*v*_,this._y=f*v*d+m*h*_,this._z=f*h*_-m*v*d,this._w=f*h*d-m*v*_;break;case"XZY":this._x=m*h*d-f*v*_,this._y=f*v*d-m*h*_,this._z=f*h*_+m*v*d,this._w=f*h*d+m*v*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],l=t[5],c=t[9],f=t[2],h=t[6],d=t[10],m=i+l+d;if(m>0){const v=.5/Math.sqrt(m+1);this._w=.25/v,this._x=(h-c)*v,this._y=(s-f)*v,this._z=(o-r)*v}else if(i>l&&i>d){const v=2*Math.sqrt(1+i-l-d);this._w=(h-c)/v,this._x=.25*v,this._y=(r+o)/v,this._z=(s+f)/v}else if(l>d){const v=2*Math.sqrt(1+l-i-d);this._w=(s-f)/v,this._x=(r+o)/v,this._y=.25*v,this._z=(c+h)/v}else{const v=2*Math.sqrt(1+d-i-l);this._w=(o-r)/v,this._x=(s+f)/v,this._y=(c+h)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(on(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,l=t._x,c=t._y,f=t._z,h=t._w;return this._x=i*h+o*l+r*f-s*c,this._y=r*h+o*c+s*l-i*f,this._z=s*h+o*f+i*c-r*l,this._w=o*h-i*l-r*c-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let l=o*e._w+i*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const v=1-t;return this._w=v*o+t*this._w,this._x=v*i+t*this._x,this._y=v*r+t*this._y,this._z=v*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(c),h=Math.atan2(f,l),d=Math.sin((1-t)*h)/f,m=Math.sin(t*h)/f;return this._w=o*d+this._w*m,this._x=i*d+this._x*m,this._y=r*d+this._y*m,this._z=s*d+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class O{constructor(e=0,t=0,i=0){O.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(nM.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(nM.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,l=e.z,c=e.w,f=c*t+o*r-l*i,h=c*i+l*t-s*r,d=c*r+s*i-o*t,m=-s*t-o*i-l*r;return this.x=f*c+m*-s+h*-l-d*-o,this.y=h*c+m*-o+d*-s-f*-l,this.z=d*c+m*-l+f*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,l=t.y,c=t.z;return this.x=r*c-s*l,this.y=s*o-i*c,this.z=i*l-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Hg.copy(this).projectOnVector(e),this.sub(Hg)}reflect(e){return this.sub(Hg.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(on(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Hg=new O,nM=new _i;class Gr{constructor(e=new O(1/0,1/0,1/0),t=new O(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Qr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Qr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Qr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Na.copy(e.boundingBox),Na.applyMatrix4(e.matrixWorld),this.union(Na);else{const r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,l=s.count;o<l;o++)Qr.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Qr)}else r.boundingBox===null&&r.computeBoundingBox(),Na.copy(r.boundingBox),Na.applyMatrix4(e.matrixWorld),this.union(Na)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Qr),Qr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Pu),Ih.subVectors(this.max,Pu),Ua.subVectors(e.a,Pu),Da.subVectors(e.b,Pu),Oa.subVectors(e.c,Pu),Is.subVectors(Da,Ua),Ns.subVectors(Oa,Da),Ro.subVectors(Ua,Oa);let t=[0,-Is.z,Is.y,0,-Ns.z,Ns.y,0,-Ro.z,Ro.y,Is.z,0,-Is.x,Ns.z,0,-Ns.x,Ro.z,0,-Ro.x,-Is.y,Is.x,0,-Ns.y,Ns.x,0,-Ro.y,Ro.x,0];return!Vg(t,Ua,Da,Oa,Ih)||(t=[1,0,0,0,1,0,0,0,1],!Vg(t,Ua,Da,Oa,Ih))?!1:(Nh.crossVectors(Is,Ns),t=[Nh.x,Nh.y,Nh.z],Vg(t,Ua,Da,Oa,Ih))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Qr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Qr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Kr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Kr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Kr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Kr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Kr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Kr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Kr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Kr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Kr),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Kr=[new O,new O,new O,new O,new O,new O,new O,new O],Qr=new O,Na=new Gr,Ua=new O,Da=new O,Oa=new O,Is=new O,Ns=new O,Ro=new O,Pu=new O,Ih=new O,Nh=new O,Po=new O;function Vg(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Po.fromArray(n,s);const l=r.x*Math.abs(Po.x)+r.y*Math.abs(Po.y)+r.z*Math.abs(Po.z),c=e.dot(Po),f=t.dot(Po),h=i.dot(Po);if(Math.max(-Math.max(c,f,h),Math.min(c,f,h))>l)return!1}return!0}const wL=new Gr,bu=new O,Gg=new O;class Sr{constructor(e=new O,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):wL.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;bu.subVectors(e,this.center);const t=bu.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(bu,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Gg.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(bu.copy(e.center).add(Gg)),this.expandByPoint(bu.copy(e.center).sub(Gg))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const $r=new O,Wg=new O,Uh=new O,Us=new O,Xg=new O,Dh=new O,jg=new O;class ql{constructor(e=new O,t=new O(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$r)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$r.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($r.copy(this.origin).addScaledVector(this.direction,t),$r.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Wg.copy(e).add(t).multiplyScalar(.5),Uh.copy(t).sub(e).normalize(),Us.copy(this.origin).sub(Wg);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Uh),l=Us.dot(this.direction),c=-Us.dot(Uh),f=Us.lengthSq(),h=Math.abs(1-o*o);let d,m,v,_;if(h>0)if(d=o*c-l,m=o*l-c,_=s*h,d>=0)if(m>=-_)if(m<=_){const E=1/h;d*=E,m*=E,v=d*(d+o*m+2*l)+m*(o*d+m+2*c)+f}else m=s,d=Math.max(0,-(o*m+l)),v=-d*d+m*(m+2*c)+f;else m=-s,d=Math.max(0,-(o*m+l)),v=-d*d+m*(m+2*c)+f;else m<=-_?(d=Math.max(0,-(-o*s+l)),m=d>0?-s:Math.min(Math.max(-s,-c),s),v=-d*d+m*(m+2*c)+f):m<=_?(d=0,m=Math.min(Math.max(-s,-c),s),v=m*(m+2*c)+f):(d=Math.max(0,-(o*s+l)),m=d>0?s:Math.min(Math.max(-s,-c),s),v=-d*d+m*(m+2*c)+f);else m=o>0?-s:s,d=Math.max(0,-(o*m+l)),v=-d*d+m*(m+2*c)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(Wg).addScaledVector(Uh,m),v}intersectSphere(e,t){$r.subVectors(e.center,this.origin);const i=$r.dot(this.direction),r=$r.dot($r)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=i-o,c=i+o;return c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,l,c;const f=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,m=this.origin;return f>=0?(i=(e.min.x-m.x)*f,r=(e.max.x-m.x)*f):(i=(e.max.x-m.x)*f,r=(e.min.x-m.x)*f),h>=0?(s=(e.min.y-m.y)*h,o=(e.max.y-m.y)*h):(s=(e.max.y-m.y)*h,o=(e.min.y-m.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(l=(e.min.z-m.z)*d,c=(e.max.z-m.z)*d):(l=(e.max.z-m.z)*d,c=(e.min.z-m.z)*d),i>c||l>r)||((l>i||i!==i)&&(i=l),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,$r)!==null}intersectTriangle(e,t,i,r,s){Xg.subVectors(t,e),Dh.subVectors(i,e),jg.crossVectors(Xg,Dh);let o=this.direction.dot(jg),l;if(o>0){if(r)return null;l=1}else if(o<0)l=-1,o=-o;else return null;Us.subVectors(this.origin,e);const c=l*this.direction.dot(Dh.crossVectors(Us,Dh));if(c<0)return null;const f=l*this.direction.dot(Xg.cross(Us));if(f<0||c+f>o)return null;const h=-l*Us.dot(jg);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ct{constructor(e,t,i,r,s,o,l,c,f,h,d,m,v,_,E,M){ct.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,l,c,f,h,d,m,v,_,E,M)}set(e,t,i,r,s,o,l,c,f,h,d,m,v,_,E,M){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=l,g[13]=c,g[2]=f,g[6]=h,g[10]=d,g[14]=m,g[3]=v,g[7]=_,g[11]=E,g[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ct().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Fa.setFromMatrixColumn(e,0).length(),s=1/Fa.setFromMatrixColumn(e,1).length(),o=1/Fa.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),f=Math.sin(r),h=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const m=o*h,v=o*d,_=l*h,E=l*d;t[0]=c*h,t[4]=-c*d,t[8]=f,t[1]=v+_*f,t[5]=m-E*f,t[9]=-l*c,t[2]=E-m*f,t[6]=_+v*f,t[10]=o*c}else if(e.order==="YXZ"){const m=c*h,v=c*d,_=f*h,E=f*d;t[0]=m+E*l,t[4]=_*l-v,t[8]=o*f,t[1]=o*d,t[5]=o*h,t[9]=-l,t[2]=v*l-_,t[6]=E+m*l,t[10]=o*c}else if(e.order==="ZXY"){const m=c*h,v=c*d,_=f*h,E=f*d;t[0]=m-E*l,t[4]=-o*d,t[8]=_+v*l,t[1]=v+_*l,t[5]=o*h,t[9]=E-m*l,t[2]=-o*f,t[6]=l,t[10]=o*c}else if(e.order==="ZYX"){const m=o*h,v=o*d,_=l*h,E=l*d;t[0]=c*h,t[4]=_*f-v,t[8]=m*f+E,t[1]=c*d,t[5]=E*f+m,t[9]=v*f-_,t[2]=-f,t[6]=l*c,t[10]=o*c}else if(e.order==="YZX"){const m=o*c,v=o*f,_=l*c,E=l*f;t[0]=c*h,t[4]=E-m*d,t[8]=_*d+v,t[1]=d,t[5]=o*h,t[9]=-l*h,t[2]=-f*h,t[6]=v*d+_,t[10]=m-E*d}else if(e.order==="XZY"){const m=o*c,v=o*f,_=l*c,E=l*f;t[0]=c*h,t[4]=-d,t[8]=f*h,t[1]=m*d+E,t[5]=o*h,t[9]=v*d-_,t[2]=_*d-v,t[6]=l*h,t[10]=E*d+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(TL,e,CL)}lookAt(e,t,i){const r=this.elements;return Ai.subVectors(e,t),Ai.lengthSq()===0&&(Ai.z=1),Ai.normalize(),Ds.crossVectors(i,Ai),Ds.lengthSq()===0&&(Math.abs(i.z)===1?Ai.x+=1e-4:Ai.z+=1e-4,Ai.normalize(),Ds.crossVectors(i,Ai)),Ds.normalize(),Oh.crossVectors(Ai,Ds),r[0]=Ds.x,r[4]=Oh.x,r[8]=Ai.x,r[1]=Ds.y,r[5]=Oh.y,r[9]=Ai.y,r[2]=Ds.z,r[6]=Oh.z,r[10]=Ai.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[4],c=i[8],f=i[12],h=i[1],d=i[5],m=i[9],v=i[13],_=i[2],E=i[6],M=i[10],g=i[14],x=i[3],S=i[7],T=i[11],A=i[15],P=r[0],L=r[4],N=r[8],R=r[12],b=r[1],G=r[5],J=r[9],j=r[13],Z=r[2],$=r[6],ae=r[10],ne=r[14],U=r[3],H=r[7],z=r[11],te=r[15];return s[0]=o*P+l*b+c*Z+f*U,s[4]=o*L+l*G+c*$+f*H,s[8]=o*N+l*J+c*ae+f*z,s[12]=o*R+l*j+c*ne+f*te,s[1]=h*P+d*b+m*Z+v*U,s[5]=h*L+d*G+m*$+v*H,s[9]=h*N+d*J+m*ae+v*z,s[13]=h*R+d*j+m*ne+v*te,s[2]=_*P+E*b+M*Z+g*U,s[6]=_*L+E*G+M*$+g*H,s[10]=_*N+E*J+M*ae+g*z,s[14]=_*R+E*j+M*ne+g*te,s[3]=x*P+S*b+T*Z+A*U,s[7]=x*L+S*G+T*$+A*H,s[11]=x*N+S*J+T*ae+A*z,s[15]=x*R+S*j+T*ne+A*te,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],l=e[5],c=e[9],f=e[13],h=e[2],d=e[6],m=e[10],v=e[14],_=e[3],E=e[7],M=e[11],g=e[15];return _*(+s*c*d-r*f*d-s*l*m+i*f*m+r*l*v-i*c*v)+E*(+t*c*v-t*f*m+s*o*m-r*o*v+r*f*h-s*c*h)+M*(+t*f*d-t*l*v-s*o*d+i*o*v+s*l*h-i*f*h)+g*(-r*l*h-t*c*d+t*l*m+r*o*d-i*o*m+i*c*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],f=e[7],h=e[8],d=e[9],m=e[10],v=e[11],_=e[12],E=e[13],M=e[14],g=e[15],x=d*M*f-E*m*f+E*c*v-l*M*v-d*c*g+l*m*g,S=_*m*f-h*M*f-_*c*v+o*M*v+h*c*g-o*m*g,T=h*E*f-_*d*f+_*l*v-o*E*v-h*l*g+o*d*g,A=_*d*c-h*E*c-_*l*m+o*E*m+h*l*M-o*d*M,P=t*x+i*S+r*T+s*A;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/P;return e[0]=x*L,e[1]=(E*m*s-d*M*s-E*r*v+i*M*v+d*r*g-i*m*g)*L,e[2]=(l*M*s-E*c*s+E*r*f-i*M*f-l*r*g+i*c*g)*L,e[3]=(d*c*s-l*m*s-d*r*f+i*m*f+l*r*v-i*c*v)*L,e[4]=S*L,e[5]=(h*M*s-_*m*s+_*r*v-t*M*v-h*r*g+t*m*g)*L,e[6]=(_*c*s-o*M*s-_*r*f+t*M*f+o*r*g-t*c*g)*L,e[7]=(o*m*s-h*c*s+h*r*f-t*m*f-o*r*v+t*c*v)*L,e[8]=T*L,e[9]=(_*d*s-h*E*s-_*i*v+t*E*v+h*i*g-t*d*g)*L,e[10]=(o*E*s-_*l*s+_*i*f-t*E*f-o*i*g+t*l*g)*L,e[11]=(h*l*s-o*d*s-h*i*f+t*d*f+o*i*v-t*l*v)*L,e[12]=A*L,e[13]=(h*E*r-_*d*r+_*i*m-t*E*m-h*i*M+t*d*M)*L,e[14]=(_*l*r-o*E*r-_*i*c+t*E*c+o*i*M-t*l*M)*L,e[15]=(o*d*r-h*l*r+h*i*c-t*d*c-o*i*m+t*l*m)*L,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,l=e.y,c=e.z,f=s*o,h=s*l;return this.set(f*o+i,f*l-r*c,f*c+r*l,0,f*l+r*c,h*l+i,h*c-r*o,0,f*c-r*l,h*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,l=t._z,c=t._w,f=s+s,h=o+o,d=l+l,m=s*f,v=s*h,_=s*d,E=o*h,M=o*d,g=l*d,x=c*f,S=c*h,T=c*d,A=i.x,P=i.y,L=i.z;return r[0]=(1-(E+g))*A,r[1]=(v+T)*A,r[2]=(_-S)*A,r[3]=0,r[4]=(v-T)*P,r[5]=(1-(m+g))*P,r[6]=(M+x)*P,r[7]=0,r[8]=(_+S)*L,r[9]=(M-x)*L,r[10]=(1-(m+E))*L,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Fa.set(r[0],r[1],r[2]).length();const o=Fa.set(r[4],r[5],r[6]).length(),l=Fa.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ar.copy(this);const f=1/s,h=1/o,d=1/l;return ar.elements[0]*=f,ar.elements[1]*=f,ar.elements[2]*=f,ar.elements[4]*=h,ar.elements[5]*=h,ar.elements[6]*=h,ar.elements[8]*=d,ar.elements[9]*=d,ar.elements[10]*=d,t.setFromRotationMatrix(ar),i.x=s,i.y=o,i.z=l,this}makePerspective(e,t,i,r,s,o,l=kr){const c=this.elements,f=2*s/(t-e),h=2*s/(i-r),d=(t+e)/(t-e),m=(i+r)/(i-r);let v,_;if(l===kr)v=-(o+s)/(o-s),_=-2*o*s/(o-s);else if(l===Dc)v=-o/(o-s),_=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=f,c[4]=0,c[8]=d,c[12]=0,c[1]=0,c[5]=h,c[9]=m,c[13]=0,c[2]=0,c[6]=0,c[10]=v,c[14]=_,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,s,o,l=kr){const c=this.elements,f=1/(t-e),h=1/(i-r),d=1/(o-s),m=(t+e)*f,v=(i+r)*h;let _,E;if(l===kr)_=(o+s)*d,E=-2*d;else if(l===Dc)_=s*d,E=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*f,c[4]=0,c[8]=0,c[12]=-m,c[1]=0,c[5]=2*h,c[9]=0,c[13]=-v,c[2]=0,c[6]=0,c[10]=E,c[14]=-_,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Fa=new O,ar=new ct,TL=new O(0,0,0),CL=new O(1,1,1),Ds=new O,Oh=new O,Ai=new O,iM=new ct,rM=new _i;class $c{constructor(e=0,t=0,i=0,r=$c.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],l=r[8],c=r[1],f=r[5],h=r[9],d=r[2],m=r[6],v=r[10];switch(t){case"XYZ":this._y=Math.asin(on(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,v),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,f),this._z=0);break;case"YXZ":this._x=Math.asin(-on(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,v),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(on(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-d,v),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-on(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(m,v),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(on(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(l,v));break;case"XZY":this._z=Math.asin(-on(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-h,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return iM.makeRotationFromQuaternion(e),this.setFromRotationMatrix(iM,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return rM.setFromEuler(this),this.setFromQuaternion(rM,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}$c.DEFAULT_ORDER="XYZ";class ea{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let AL=0;const sM=new O,ka=new _i,es=new ct,Fh=new O,Lu=new O,RL=new O,PL=new _i,oM=new O(1,0,0),aM=new O(0,1,0),lM=new O(0,0,1),bL={type:"added"},uM={type:"removed"};class Pt extends _s{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:AL++}),this.uuid=Ni(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Pt.DEFAULT_UP.clone();const e=new O,t=new $c,i=new _i,r=new O(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ct},normalMatrix:{value:new gt}}),this.matrix=new ct,this.matrixWorld=new ct,this.matrixAutoUpdate=Pt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Pt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new ea,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ka.setFromAxisAngle(e,t),this.quaternion.multiply(ka),this}rotateOnWorldAxis(e,t){return ka.setFromAxisAngle(e,t),this.quaternion.premultiply(ka),this}rotateX(e){return this.rotateOnAxis(oM,e)}rotateY(e){return this.rotateOnAxis(aM,e)}rotateZ(e){return this.rotateOnAxis(lM,e)}translateOnAxis(e,t){return sM.copy(e).applyQuaternion(this.quaternion),this.position.add(sM.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(oM,e)}translateY(e){return this.translateOnAxis(aM,e)}translateZ(e){return this.translateOnAxis(lM,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(es.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Fh.copy(e):Fh.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Lu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?es.lookAt(Lu,Fh,this.up):es.lookAt(Fh,Lu,this.up),this.quaternion.setFromRotationMatrix(es),r&&(es.extractRotation(r.matrixWorld),ka.setFromRotationMatrix(es),this.quaternion.premultiply(ka.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(bL)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(uM)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(uM)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),es.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),es.multiply(e.parent.matrixWorld)),e.applyMatrix4(es),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lu,e,RL),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lu,PL,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const l=r[s];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let f=0,h=c.length;f<h;f++){const d=c[f];s(e.shapes,d)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,f=this.material.length;c<f;c++)l.push(s(e.materials,this.material[c]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];r.animations.push(s(e.animations,c))}}if(t){const l=o(e.geometries),c=o(e.materials),f=o(e.textures),h=o(e.images),d=o(e.shapes),m=o(e.skeletons),v=o(e.animations),_=o(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),f.length>0&&(i.textures=f),h.length>0&&(i.images=h),d.length>0&&(i.shapes=d),m.length>0&&(i.skeletons=m),v.length>0&&(i.animations=v),_.length>0&&(i.nodes=_)}return i.object=r,i;function o(l){const c=[];for(const f in l){const h=l[f];delete h.metadata,c.push(h)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Pt.DEFAULT_UP=new O(0,1,0);Pt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Pt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const lr=new O,ts=new O,Yg=new O,ns=new O,za=new O,Ba=new O,cM=new O,qg=new O,Zg=new O,Jg=new O;let kh=!1;class di{constructor(e=new O,t=new O,i=new O){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),lr.subVectors(e,t),r.cross(lr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){lr.subVectors(r,t),ts.subVectors(i,t),Yg.subVectors(e,t);const o=lr.dot(lr),l=lr.dot(ts),c=lr.dot(Yg),f=ts.dot(ts),h=ts.dot(Yg),d=o*f-l*l;if(d===0)return s.set(-2,-1,-1);const m=1/d,v=(f*c-l*h)*m,_=(o*h-l*c)*m;return s.set(1-v-_,_,v)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ns),ns.x>=0&&ns.y>=0&&ns.x+ns.y<=1}static getUV(e,t,i,r,s,o,l,c){return kh===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),kh=!0),this.getInterpolation(e,t,i,r,s,o,l,c)}static getInterpolation(e,t,i,r,s,o,l,c){return this.getBarycoord(e,t,i,r,ns),c.setScalar(0),c.addScaledVector(s,ns.x),c.addScaledVector(o,ns.y),c.addScaledVector(l,ns.z),c}static isFrontFacing(e,t,i,r){return lr.subVectors(i,t),ts.subVectors(e,t),lr.cross(ts).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return lr.subVectors(this.c,this.b),ts.subVectors(this.a,this.b),lr.cross(ts).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return di.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return di.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return kh===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),kh=!0),di.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return di.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return di.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return di.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,l;za.subVectors(r,i),Ba.subVectors(s,i),qg.subVectors(e,i);const c=za.dot(qg),f=Ba.dot(qg);if(c<=0&&f<=0)return t.copy(i);Zg.subVectors(e,r);const h=za.dot(Zg),d=Ba.dot(Zg);if(h>=0&&d<=h)return t.copy(r);const m=c*d-h*f;if(m<=0&&c>=0&&h<=0)return o=c/(c-h),t.copy(i).addScaledVector(za,o);Jg.subVectors(e,s);const v=za.dot(Jg),_=Ba.dot(Jg);if(_>=0&&v<=_)return t.copy(s);const E=v*f-c*_;if(E<=0&&f>=0&&_<=0)return l=f/(f-_),t.copy(i).addScaledVector(Ba,l);const M=h*_-v*d;if(M<=0&&d-h>=0&&v-_>=0)return cM.subVectors(s,r),l=(d-h)/(d-h+(v-_)),t.copy(r).addScaledVector(cM,l);const g=1/(M+E+m);return o=E*g,l=m*g,t.copy(i).addScaledVector(za,o).addScaledVector(Ba,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let LL=0;class kn extends _s{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:LL++}),this.uuid=Ni(),this.name="",this.type="Material",this.blending=Qo,this.side=gs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=fy,this.blendDst=hy,this.blendEquation=Bo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=mp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=t3,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=zd,this.stencilZFail=zd,this.stencilZPass=zd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Qo&&(i.blending=this.blending),this.side!==gs&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const l in s){const c=s[l];delete c.metadata,o.push(c)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const h3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ur={h:0,s:0,l:0},zh={h:0,s:0,l:0};function Kg(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Ne{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ft){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,qi.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=qi.workingColorSpace){return this.r=e,this.g=t,this.b=i,qi.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=qi.workingColorSpace){if(e=wy(e,1),t=on(t,0,1),i=on(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=Kg(o,s,e+1/3),this.g=Kg(o,s,e),this.b=Kg(o,s,e-1/3)}return qi.toWorkingColorSpace(this,r),this}setStyle(e,t=ft){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],l=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ft){const i=h3[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Rl(e.r),this.g=Rl(e.g),this.b=Rl(e.b),this}copyLinearToSRGB(e){return this.r=zg(e.r),this.g=zg(e.g),this.b=zg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ft){return qi.fromWorkingColorSpace(qn.copy(this),e),Math.round(on(qn.r*255,0,255))*65536+Math.round(on(qn.g*255,0,255))*256+Math.round(on(qn.b*255,0,255))}getHexString(e=ft){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=qi.workingColorSpace){qi.fromWorkingColorSpace(qn.copy(this),t);const i=qn.r,r=qn.g,s=qn.b,o=Math.max(i,r,s),l=Math.min(i,r,s);let c,f;const h=(l+o)/2;if(l===o)c=0,f=0;else{const d=o-l;switch(f=h<=.5?d/(o+l):d/(2-o-l),o){case i:c=(r-s)/d+(r<s?6:0);break;case r:c=(s-i)/d+2;break;case s:c=(i-r)/d+4;break}c/=6}return e.h=c,e.s=f,e.l=h,e}getRGB(e,t=qi.workingColorSpace){return qi.fromWorkingColorSpace(qn.copy(this),t),e.r=qn.r,e.g=qn.g,e.b=qn.b,e}getStyle(e=ft){qi.fromWorkingColorSpace(qn.copy(this),e);const t=qn.r,i=qn.g,r=qn.b;return e!==ft?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(ur),ur.h+=e,ur.s+=t,ur.l+=i,this.setHSL(ur.h,ur.s,ur.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ur),e.getHSL(zh);const i=rc(ur.h,zh.h,t),r=rc(ur.s,zh.s,t),s=rc(ur.l,zh.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const qn=new Ne;Ne.NAMES=h3;class go extends kn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Qc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const os=IL();function IL(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const f=c-127;f<-27?(i[c]=0,i[c|256]=32768,r[c]=24,r[c|256]=24):f<-14?(i[c]=1024>>-f-14,i[c|256]=1024>>-f-14|32768,r[c]=-f-1,r[c|256]=-f-1):f<=15?(i[c]=f+15<<10,i[c|256]=f+15<<10|32768,r[c]=13,r[c|256]=13):f<128?(i[c]=31744,i[c|256]=64512,r[c]=24,r[c|256]=24):(i[c]=31744,i[c|256]=64512,r[c]=13,r[c|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let f=c<<13,h=0;for(;!(f&8388608);)f<<=1,h-=8388608;f&=-8388609,h+=947912704,s[c]=f|h}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:l}}function fi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=on(n,-65504,65504),os.floatView[0]=n;const e=os.uint32View[0],t=e>>23&511;return os.baseTable[t]+((e&8388607)>>os.shiftTable[t])}function Xu(n){const e=n>>10;return os.uint32View[0]=os.mantissaTable[os.offsetTable[e]+(n&1023)]+os.exponentTable[e],os.floatView[0]}const NL={toHalfFloat:fi,fromHalfFloat:Xu},gn=new O,Bh=new pe;class Ft{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Uc,this.updateRange={offset:0,count:-1},this.gpuType=Fr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Bh.fromBufferAttribute(this,t),Bh.applyMatrix3(e),this.setXY(t,Bh.x,Bh.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)gn.fromBufferAttribute(this,t),gn.applyMatrix3(e),this.setXYZ(t,gn.x,gn.y,gn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)gn.fromBufferAttribute(this,t),gn.applyMatrix4(e),this.setXYZ(t,gn.x,gn.y,gn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)gn.fromBufferAttribute(this,t),gn.applyNormalMatrix(e),this.setXYZ(t,gn.x,gn.y,gn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)gn.fromBufferAttribute(this,t),gn.transformDirection(e),this.setXYZ(t,gn.x,gn.y,gn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Li(t,this.array)),t}setX(e,t){return this.normalized&&(t=vt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Li(t,this.array)),t}setY(e,t){return this.normalized&&(t=vt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Li(t,this.array)),t}setZ(e,t){return this.normalized&&(t=vt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Li(t,this.array)),t}setW(e,t){return this.normalized&&(t=vt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=vt(t,this.array),i=vt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=vt(t,this.array),i=vt(i,this.array),r=vt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=vt(t,this.array),i=vt(i,this.array),r=vt(r,this.array),s=vt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Uc&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class UL extends Ft{constructor(e,t,i){super(new Int8Array(e),t,i)}}class DL extends Ft{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class OL extends Ft{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class FL extends Ft{constructor(e,t,i){super(new Int16Array(e),t,i)}}class Ay extends Ft{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class kL extends Ft{constructor(e,t,i){super(new Int32Array(e),t,i)}}class Ry extends Ft{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class zL extends Ft{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Xu(this.array[e*this.itemSize]);return this.normalized&&(t=Li(t,this.array)),t}setX(e,t){return this.normalized&&(t=vt(t,this.array)),this.array[e*this.itemSize]=fi(t),this}getY(e){let t=Xu(this.array[e*this.itemSize+1]);return this.normalized&&(t=Li(t,this.array)),t}setY(e,t){return this.normalized&&(t=vt(t,this.array)),this.array[e*this.itemSize+1]=fi(t),this}getZ(e){let t=Xu(this.array[e*this.itemSize+2]);return this.normalized&&(t=Li(t,this.array)),t}setZ(e,t){return this.normalized&&(t=vt(t,this.array)),this.array[e*this.itemSize+2]=fi(t),this}getW(e){let t=Xu(this.array[e*this.itemSize+3]);return this.normalized&&(t=Li(t,this.array)),t}setW(e,t){return this.normalized&&(t=vt(t,this.array)),this.array[e*this.itemSize+3]=fi(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=vt(t,this.array),i=vt(i,this.array)),this.array[e+0]=fi(t),this.array[e+1]=fi(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=vt(t,this.array),i=vt(i,this.array),r=vt(r,this.array)),this.array[e+0]=fi(t),this.array[e+1]=fi(i),this.array[e+2]=fi(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=vt(t,this.array),i=vt(i,this.array),r=vt(r,this.array),s=vt(s,this.array)),this.array[e+0]=fi(t),this.array[e+1]=fi(i),this.array[e+2]=fi(r),this.array[e+3]=fi(s),this}}class He extends Ft{constructor(e,t,i){super(new Float32Array(e),t,i)}}class BL extends Ft{constructor(e,t,i){super(new Float64Array(e),t,i)}}let HL=0;const Yi=new ct,Qg=new Pt,Ha=new O,Ri=new Gr,Iu=new Gr,Rn=new O;class ht extends _s{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:HL++}),this.uuid=Ni(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(f3(e)?Ry:Ay)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new gt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Yi.makeRotationFromQuaternion(e),this.applyMatrix4(Yi),this}rotateX(e){return Yi.makeRotationX(e),this.applyMatrix4(Yi),this}rotateY(e){return Yi.makeRotationY(e),this.applyMatrix4(Yi),this}rotateZ(e){return Yi.makeRotationZ(e),this.applyMatrix4(Yi),this}translate(e,t,i){return Yi.makeTranslation(e,t,i),this.applyMatrix4(Yi),this}scale(e,t,i){return Yi.makeScale(e,t,i),this.applyMatrix4(Yi),this}lookAt(e){return Qg.lookAt(e),Qg.updateMatrix(),this.applyMatrix4(Qg.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ha).negate(),this.translate(Ha.x,Ha.y,Ha.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new He(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new O(-1/0,-1/0,-1/0),new O(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Ri.setFromBufferAttribute(s),this.morphTargetsRelative?(Rn.addVectors(this.boundingBox.min,Ri.min),this.boundingBox.expandByPoint(Rn),Rn.addVectors(this.boundingBox.max,Ri.max),this.boundingBox.expandByPoint(Rn)):(this.boundingBox.expandByPoint(Ri.min),this.boundingBox.expandByPoint(Ri.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new O,1/0);return}if(e){const i=this.boundingSphere.center;if(Ri.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const l=t[s];Iu.setFromBufferAttribute(l),this.morphTargetsRelative?(Rn.addVectors(Ri.min,Iu.min),Ri.expandByPoint(Rn),Rn.addVectors(Ri.max,Iu.max),Ri.expandByPoint(Rn)):(Ri.expandByPoint(Iu.min),Ri.expandByPoint(Iu.max))}Ri.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Rn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Rn));if(t)for(let s=0,o=t.length;s<o;s++){const l=t[s],c=this.morphTargetsRelative;for(let f=0,h=l.count;f<h;f++)Rn.fromBufferAttribute(l,f),c&&(Ha.fromBufferAttribute(e,f),Rn.add(Ha)),r=Math.max(r,i.distanceToSquared(Rn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,l=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ft(new Float32Array(4*l),4));const c=this.getAttribute("tangent").array,f=[],h=[];for(let b=0;b<l;b++)f[b]=new O,h[b]=new O;const d=new O,m=new O,v=new O,_=new pe,E=new pe,M=new pe,g=new O,x=new O;function S(b,G,J){d.fromArray(r,b*3),m.fromArray(r,G*3),v.fromArray(r,J*3),_.fromArray(o,b*2),E.fromArray(o,G*2),M.fromArray(o,J*2),m.sub(d),v.sub(d),E.sub(_),M.sub(_);const j=1/(E.x*M.y-M.x*E.y);isFinite(j)&&(g.copy(m).multiplyScalar(M.y).addScaledVector(v,-E.y).multiplyScalar(j),x.copy(v).multiplyScalar(E.x).addScaledVector(m,-M.x).multiplyScalar(j),f[b].add(g),f[G].add(g),f[J].add(g),h[b].add(x),h[G].add(x),h[J].add(x))}let T=this.groups;T.length===0&&(T=[{start:0,count:i.length}]);for(let b=0,G=T.length;b<G;++b){const J=T[b],j=J.start,Z=J.count;for(let $=j,ae=j+Z;$<ae;$+=3)S(i[$+0],i[$+1],i[$+2])}const A=new O,P=new O,L=new O,N=new O;function R(b){L.fromArray(s,b*3),N.copy(L);const G=f[b];A.copy(G),A.sub(L.multiplyScalar(L.dot(G))).normalize(),P.crossVectors(N,G);const j=P.dot(h[b])<0?-1:1;c[b*4]=A.x,c[b*4+1]=A.y,c[b*4+2]=A.z,c[b*4+3]=j}for(let b=0,G=T.length;b<G;++b){const J=T[b],j=J.start,Z=J.count;for(let $=j,ae=j+Z;$<ae;$+=3)R(i[$+0]),R(i[$+1]),R(i[$+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ft(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let m=0,v=i.count;m<v;m++)i.setXYZ(m,0,0,0);const r=new O,s=new O,o=new O,l=new O,c=new O,f=new O,h=new O,d=new O;if(e)for(let m=0,v=e.count;m<v;m+=3){const _=e.getX(m+0),E=e.getX(m+1),M=e.getX(m+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,E),o.fromBufferAttribute(t,M),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),l.fromBufferAttribute(i,_),c.fromBufferAttribute(i,E),f.fromBufferAttribute(i,M),l.add(h),c.add(h),f.add(h),i.setXYZ(_,l.x,l.y,l.z),i.setXYZ(E,c.x,c.y,c.z),i.setXYZ(M,f.x,f.y,f.z)}else for(let m=0,v=t.count;m<v;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),i.setXYZ(m+0,h.x,h.y,h.z),i.setXYZ(m+1,h.x,h.y,h.z),i.setXYZ(m+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Rn.fromBufferAttribute(e,t),Rn.normalize(),e.setXYZ(t,Rn.x,Rn.y,Rn.z)}toNonIndexed(){function e(l,c){const f=l.array,h=l.itemSize,d=l.normalized,m=new f.constructor(c.length*h);let v=0,_=0;for(let E=0,M=c.length;E<M;E++){l.isInterleavedBufferAttribute?v=c[E]*l.data.stride+l.offset:v=c[E]*h;for(let g=0;g<h;g++)m[_++]=f[v++]}return new Ft(m,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ht,i=this.index.array,r=this.attributes;for(const l in r){const c=r[l],f=e(c,i);t.setAttribute(l,f)}const s=this.morphAttributes;for(const l in s){const c=[],f=s[l];for(let h=0,d=f.length;h<d;h++){const m=f[h],v=e(m,i);c.push(v)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,c=o.length;l<c;l++){const f=o[l];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(e[f]=c[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const f=i[c];e.data.attributes[c]=f.toJSON(e.data)}const r={};let s=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],h=[];for(let d=0,m=f.length;d<m;d++){const v=f[d];h.push(v.toJSON(e.data))}h.length>0&&(r[c]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const f in r){const h=r[f];this.setAttribute(f,h.clone(t))}const s=e.morphAttributes;for(const f in s){const h=[],d=s[f];for(let m=0,v=d.length;m<v;m++)h.push(d[m].clone(t));this.morphAttributes[f]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,h=o.length;f<h;f++){const d=o[f];this.addGroup(d.start,d.count,d.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const fM=new ct,bo=new ql,Hh=new Sr,hM=new O,Va=new O,Ga=new O,Wa=new O,$g=new O,Vh=new O,Gh=new pe,Wh=new pe,Xh=new pe,dM=new O,pM=new O,mM=new O,jh=new O,Yh=new O;class Dn extends Pt{constructor(e=new ht,t=new go){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&&l){Vh.set(0,0,0);for(let c=0,f=s.length;c<f;c++){const h=l[c],d=s[c];h!==0&&($g.fromBufferAttribute(d,e),o?Vh.addScaledVector($g,h):Vh.addScaledVector($g.sub(t),h))}t.add(Vh)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Hh.copy(i.boundingSphere),Hh.applyMatrix4(s),bo.copy(e.ray).recast(e.near),!(Hh.containsPoint(bo.origin)===!1&&(bo.intersectSphere(Hh,hM)===null||bo.origin.distanceToSquared(hM)>(e.far-e.near)**2))&&(fM.copy(s).invert(),bo.copy(e.ray).applyMatrix4(fM),!(i.boundingBox!==null&&bo.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,bo)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,l=s.index,c=s.attributes.position,f=s.attributes.uv,h=s.attributes.uv1,d=s.attributes.normal,m=s.groups,v=s.drawRange;if(l!==null)if(Array.isArray(o))for(let _=0,E=m.length;_<E;_++){const M=m[_],g=o[M.materialIndex],x=Math.max(M.start,v.start),S=Math.min(l.count,Math.min(M.start+M.count,v.start+v.count));for(let T=x,A=S;T<A;T+=3){const P=l.getX(T),L=l.getX(T+1),N=l.getX(T+2);r=qh(this,g,e,i,f,h,d,P,L,N),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=M.materialIndex,t.push(r))}}else{const _=Math.max(0,v.start),E=Math.min(l.count,v.start+v.count);for(let M=_,g=E;M<g;M+=3){const x=l.getX(M),S=l.getX(M+1),T=l.getX(M+2);r=qh(this,o,e,i,f,h,d,x,S,T),r&&(r.faceIndex=Math.floor(M/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(o))for(let _=0,E=m.length;_<E;_++){const M=m[_],g=o[M.materialIndex],x=Math.max(M.start,v.start),S=Math.min(c.count,Math.min(M.start+M.count,v.start+v.count));for(let T=x,A=S;T<A;T+=3){const P=T,L=T+1,N=T+2;r=qh(this,g,e,i,f,h,d,P,L,N),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=M.materialIndex,t.push(r))}}else{const _=Math.max(0,v.start),E=Math.min(c.count,v.start+v.count);for(let M=_,g=E;M<g;M+=3){const x=M,S=M+1,T=M+2;r=qh(this,o,e,i,f,h,d,x,S,T),r&&(r.faceIndex=Math.floor(M/3),t.push(r))}}}}function VL(n,e,t,i,r,s,o,l){let c;if(e.side===ri?c=i.intersectTriangle(o,s,r,!0,l):c=i.intersectTriangle(r,s,o,e.side===gs,l),c===null)return null;Yh.copy(l),Yh.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(Yh);return f<t.near||f>t.far?null:{distance:f,point:Yh.clone(),object:n}}function qh(n,e,t,i,r,s,o,l,c,f){n.getVertexPosition(l,Va),n.getVertexPosition(c,Ga),n.getVertexPosition(f,Wa);const h=VL(n,e,t,i,Va,Ga,Wa,jh);if(h){r&&(Gh.fromBufferAttribute(r,l),Wh.fromBufferAttribute(r,c),Xh.fromBufferAttribute(r,f),h.uv=di.getInterpolation(jh,Va,Ga,Wa,Gh,Wh,Xh,new pe)),s&&(Gh.fromBufferAttribute(s,l),Wh.fromBufferAttribute(s,c),Xh.fromBufferAttribute(s,f),h.uv1=di.getInterpolation(jh,Va,Ga,Wa,Gh,Wh,Xh,new pe),h.uv2=h.uv1),o&&(dM.fromBufferAttribute(o,l),pM.fromBufferAttribute(o,c),mM.fromBufferAttribute(o,f),h.normal=di.getInterpolation(jh,Va,Ga,Wa,dM,pM,mM,new O),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const d={a:l,b:c,c:f,normal:new O,materialIndex:0};di.getNormal(Va,Ga,Wa,d.normal),h.face=d}return h}class vo extends ht{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],f=[],h=[],d=[];let m=0,v=0;_("z","y","x",-1,-1,i,t,e,o,s,0),_("z","y","x",1,-1,i,t,-e,o,s,1),_("x","z","y",1,1,e,i,t,r,o,2),_("x","z","y",1,-1,e,i,-t,r,o,3),_("x","y","z",1,-1,e,t,i,r,s,4),_("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new He(f,3)),this.setAttribute("normal",new He(h,3)),this.setAttribute("uv",new He(d,2));function _(E,M,g,x,S,T,A,P,L,N,R){const b=T/L,G=A/N,J=T/2,j=A/2,Z=P/2,$=L+1,ae=N+1;let ne=0,U=0;const H=new O;for(let z=0;z<ae;z++){const te=z*G-j;for(let B=0;B<$;B++){const he=B*b-J;H[E]=he*x,H[M]=te*S,H[g]=Z,f.push(H.x,H.y,H.z),H[E]=0,H[M]=0,H[g]=P>0?1:-1,h.push(H.x,H.y,H.z),d.push(B/L),d.push(1-z/N),ne+=1}}for(let z=0;z<N;z++)for(let te=0;te<L;te++){const B=m+te+$*z,he=m+te+$*(z+1),se=m+(te+1)+$*(z+1),Ee=m+(te+1)+$*z;c.push(B,he,Ee),c.push(he,se,Ee),U+=6}l.addGroup(v,U,R),v+=U,m+=ne}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function zl(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function ti(n){const e={};for(let t=0;t<n.length;t++){const i=zl(n[t]);for(const r in i)e[r]=i[r]}return e}function GL(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function d3(n){return n.getRenderTarget()===null?n.outputColorSpace:_r}const p3={clone:zl,merge:ti};var WL=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,XL=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ui extends kn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=WL,this.fragmentShader=XL,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zl(e.uniforms),this.uniformsGroups=GL(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class ef extends Pt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ct,this.projectionMatrix=new ct,this.projectionMatrixInverse=new ct,this.coordinateSystem=kr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class bn extends ef{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=kl*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan($o*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return kl*2*Math.atan(Math.tan($o*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan($o*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,f=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/f,r*=o.width/c,i*=o.height/f}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Xa=-90,ja=1;class m3 extends Pt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null;const r=new bn(Xa,ja,e,t);r.layers=this.layers,this.add(r);const s=new bn(Xa,ja,e,t);s.layers=this.layers,this.add(s);const o=new bn(Xa,ja,e,t);o.layers=this.layers,this.add(o);const l=new bn(Xa,ja,e,t);l.layers=this.layers,this.add(l);const c=new bn(Xa,ja,e,t);c.layers=this.layers,this.add(c);const f=new bn(Xa,ja,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,l,c]=t;for(const f of t)this.remove(f);if(e===kr)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Dc)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,s,o,l,c,f]=this.children,h=e.getRenderTarget(),d=e.toneMapping,m=e.xr.enabled;e.toneMapping=vr,e.xr.enabled=!1;const v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,l),e.setRenderTarget(i,4),e.render(t,c),i.texture.generateMipmaps=v,e.setRenderTarget(i,5),e.render(t,f),e.setRenderTarget(h),e.toneMapping=d,e.xr.enabled=m,i.texture.needsPMREMUpdate=!0}}class tf extends an{constructor(e,t,i,r,s,o,l,c,f,h){e=e!==void 0?e:[],t=t!==void 0?t:oo,super(e,t,i,r,s,o,l,c,f,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class g3 extends xr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(sc("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===no?ft:io),this.texture=new tf(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:hn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new vo(5,5,5),s=new Ui({name:"CubemapFromEquirect",uniforms:zl(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ri,blending:fs});s.uniforms.tEquirect.value=t;const o=new Dn(r,s),l=t.minFilter;return t.minFilter===lo&&(t.minFilter=hn),new m3(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const e0=new O,jL=new O,YL=new gt;class zs{constructor(e=new O(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=e0.subVectors(i,t).cross(jL.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(e0),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||YL.getNormalMatrix(e),r=this.coplanarPoint(e0).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Lo=new Sr,Zh=new O;class Yp{constructor(e=new zs,t=new zs,i=new zs,r=new zs,s=new zs,o=new zs){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=kr){const i=this.planes,r=e.elements,s=r[0],o=r[1],l=r[2],c=r[3],f=r[4],h=r[5],d=r[6],m=r[7],v=r[8],_=r[9],E=r[10],M=r[11],g=r[12],x=r[13],S=r[14],T=r[15];if(i[0].setComponents(c-s,m-f,M-v,T-g).normalize(),i[1].setComponents(c+s,m+f,M+v,T+g).normalize(),i[2].setComponents(c+o,m+h,M+_,T+x).normalize(),i[3].setComponents(c-o,m-h,M-_,T-x).normalize(),i[4].setComponents(c-l,m-d,M-E,T-S).normalize(),t===kr)i[5].setComponents(c+l,m+d,M+E,T+S).normalize();else if(t===Dc)i[5].setComponents(l,d,E,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Lo.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Lo.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Lo)}intersectsSprite(e){return Lo.center.set(0,0,0),Lo.radius=.7071067811865476,Lo.applyMatrix4(e.matrixWorld),this.intersectsSphere(Lo)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Zh.x=r.normal.x>0?e.max.x:e.min.x,Zh.y=r.normal.y>0?e.max.y:e.min.y,Zh.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Zh)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function v3(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function qL(n,e){const t=e.isWebGL2,i=new WeakMap;function r(f,h){const d=f.array,m=f.usage,v=n.createBuffer();n.bindBuffer(h,v),n.bufferData(h,d,m),f.onUploadCallback();let _;if(d instanceof Float32Array)_=n.FLOAT;else if(d instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)_=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else _=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)_=n.SHORT;else if(d instanceof Uint32Array)_=n.UNSIGNED_INT;else if(d instanceof Int32Array)_=n.INT;else if(d instanceof Int8Array)_=n.BYTE;else if(d instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:v,type:_,bytesPerElement:d.BYTES_PER_ELEMENT,version:f.version}}function s(f,h,d){const m=h.array,v=h.updateRange;n.bindBuffer(d,f),v.count===-1?n.bufferSubData(d,0,m):(t?n.bufferSubData(d,v.offset*m.BYTES_PER_ELEMENT,m,v.offset,v.count):n.bufferSubData(d,v.offset*m.BYTES_PER_ELEMENT,m.subarray(v.offset,v.offset+v.count)),v.count=-1),h.onUploadCallback()}function o(f){return f.isInterleavedBufferAttribute&&(f=f.data),i.get(f)}function l(f){f.isInterleavedBufferAttribute&&(f=f.data);const h=i.get(f);h&&(n.deleteBuffer(h.buffer),i.delete(f))}function c(f,h){if(f.isGLBufferAttribute){const m=i.get(f);(!m||m.version<f.version)&&i.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const d=i.get(f);d===void 0?i.set(f,r(f,h)):d.version<f.version&&(s(d.buffer,f,h),d.version=f.version)}return{get:o,remove:l,update:c}}class Zl extends ht{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,l=Math.floor(i),c=Math.floor(r),f=l+1,h=c+1,d=e/l,m=t/c,v=[],_=[],E=[],M=[];for(let g=0;g<h;g++){const x=g*m-o;for(let S=0;S<f;S++){const T=S*d-s;_.push(T,-x,0),E.push(0,0,1),M.push(S/l),M.push(1-g/c)}}for(let g=0;g<c;g++)for(let x=0;x<l;x++){const S=x+f*g,T=x+f*(g+1),A=x+1+f*(g+1),P=x+1+f*g;v.push(S,T,P),v.push(T,A,P)}this.setIndex(v),this.setAttribute("position",new He(_,3)),this.setAttribute("normal",new He(E,3)),this.setAttribute("uv",new He(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zl(e.width,e.height,e.widthSegments,e.heightSegments)}}var ZL=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,JL=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,KL=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,QL=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,$L=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,eI=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,tI="vec3 transformed = vec3( position );",nI=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,iI=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,rI=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,sI=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,oI=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,aI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,lI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,uI=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,cI=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,fI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,hI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,dI=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,pI=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,mI=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,gI=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,vI=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,yI=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,_I=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,xI=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,SI="gl_FragColor = linearToOutputTexel( gl_FragColor );",MI=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,EI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,wI=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,TI=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,CI=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,AI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,RI=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,PI=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,bI=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,LI=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,II=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,NI=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,UI=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,DI=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,OI=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,FI=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,kI=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,zI=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,BI=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,HI=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,VI=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,GI=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,WI=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,XI=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,jI=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,YI=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,qI=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,ZI=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,JI=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,KI=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,QI=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,$I=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,eN=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,tN=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nN=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,iN=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,rN=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,sN=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,oN=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,aN=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,lN=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,uN=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,cN=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,fN=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,hN=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,dN=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,pN=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,mN=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,gN=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,vN=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,yN=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,_N=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,xN=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,SN=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,MN=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,EN=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,wN=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,TN=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,CN=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,AN=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,RN=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,PN=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,bN=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,LN=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,IN=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,NN=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,UN=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,DN=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ON=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,FN=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,kN=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,zN=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,BN=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,HN=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,VN=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,GN=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const WN=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,XN=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,jN=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,YN=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,qN=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ZN=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,JN=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,KN=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,QN=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,$N=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,e5=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,t5=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,n5=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,i5=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,r5=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,s5=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,o5=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,a5=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,l5=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,u5=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,c5=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,f5=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,h5=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,d5=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,p5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,m5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,g5=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,v5=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,y5=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,_5=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,x5=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,S5=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,M5=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,E5=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,mt={alphamap_fragment:ZL,alphamap_pars_fragment:JL,alphatest_fragment:KL,alphatest_pars_fragment:QL,aomap_fragment:$L,aomap_pars_fragment:eI,begin_vertex:tI,beginnormal_vertex:nI,bsdfs:iI,iridescence_fragment:rI,bumpmap_pars_fragment:sI,clipping_planes_fragment:oI,clipping_planes_pars_fragment:aI,clipping_planes_pars_vertex:lI,clipping_planes_vertex:uI,color_fragment:cI,color_pars_fragment:fI,color_pars_vertex:hI,color_vertex:dI,common:pI,cube_uv_reflection_fragment:mI,defaultnormal_vertex:gI,displacementmap_pars_vertex:vI,displacementmap_vertex:yI,emissivemap_fragment:_I,emissivemap_pars_fragment:xI,encodings_fragment:SI,encodings_pars_fragment:MI,envmap_fragment:EI,envmap_common_pars_fragment:wI,envmap_pars_fragment:TI,envmap_pars_vertex:CI,envmap_physical_pars_fragment:kI,envmap_vertex:AI,fog_vertex:RI,fog_pars_vertex:PI,fog_fragment:bI,fog_pars_fragment:LI,gradientmap_pars_fragment:II,lightmap_fragment:NI,lightmap_pars_fragment:UI,lights_lambert_fragment:DI,lights_lambert_pars_fragment:OI,lights_pars_begin:FI,lights_toon_fragment:zI,lights_toon_pars_fragment:BI,lights_phong_fragment:HI,lights_phong_pars_fragment:VI,lights_physical_fragment:GI,lights_physical_pars_fragment:WI,lights_fragment_begin:XI,lights_fragment_maps:jI,lights_fragment_end:YI,logdepthbuf_fragment:qI,logdepthbuf_pars_fragment:ZI,logdepthbuf_pars_vertex:JI,logdepthbuf_vertex:KI,map_fragment:QI,map_pars_fragment:$I,map_particle_fragment:eN,map_particle_pars_fragment:tN,metalnessmap_fragment:nN,metalnessmap_pars_fragment:iN,morphcolor_vertex:rN,morphnormal_vertex:sN,morphtarget_pars_vertex:oN,morphtarget_vertex:aN,normal_fragment_begin:lN,normal_fragment_maps:uN,normal_pars_fragment:cN,normal_pars_vertex:fN,normal_vertex:hN,normalmap_pars_fragment:dN,clearcoat_normal_fragment_begin:pN,clearcoat_normal_fragment_maps:mN,clearcoat_pars_fragment:gN,iridescence_pars_fragment:vN,output_fragment:yN,packing:_N,premultiplied_alpha_fragment:xN,project_vertex:SN,dithering_fragment:MN,dithering_pars_fragment:EN,roughnessmap_fragment:wN,roughnessmap_pars_fragment:TN,shadowmap_pars_fragment:CN,shadowmap_pars_vertex:AN,shadowmap_vertex:RN,shadowmask_pars_fragment:PN,skinbase_vertex:bN,skinning_pars_vertex:LN,skinning_vertex:IN,skinnormal_vertex:NN,specularmap_fragment:UN,specularmap_pars_fragment:DN,tonemapping_fragment:ON,tonemapping_pars_fragment:FN,transmission_fragment:kN,transmission_pars_fragment:zN,uv_pars_fragment:BN,uv_pars_vertex:HN,uv_vertex:VN,worldpos_vertex:GN,background_vert:WN,background_frag:XN,backgroundCube_vert:jN,backgroundCube_frag:YN,cube_vert:qN,cube_frag:ZN,depth_vert:JN,depth_frag:KN,distanceRGBA_vert:QN,distanceRGBA_frag:$N,equirect_vert:e5,equirect_frag:t5,linedashed_vert:n5,linedashed_frag:i5,meshbasic_vert:r5,meshbasic_frag:s5,meshlambert_vert:o5,meshlambert_frag:a5,meshmatcap_vert:l5,meshmatcap_frag:u5,meshnormal_vert:c5,meshnormal_frag:f5,meshphong_vert:h5,meshphong_frag:d5,meshphysical_vert:p5,meshphysical_frag:m5,meshtoon_vert:g5,meshtoon_frag:v5,points_vert:y5,points_frag:_5,shadow_vert:x5,shadow_frag:S5,sprite_vert:M5,sprite_frag:E5},Te={common:{diffuse:{value:new Ne(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new gt},alphaMap:{value:null},alphaMapTransform:{value:new gt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new gt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new gt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new gt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new gt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new gt},normalScale:{value:new pe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new gt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new gt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new gt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new gt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ne(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ne(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new gt},alphaTest:{value:0},uvTransform:{value:new gt}},sprite:{diffuse:{value:new Ne(16777215)},opacity:{value:1},center:{value:new pe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new gt},alphaMap:{value:null},alphaMapTransform:{value:new gt},alphaTest:{value:0}}},pr={basic:{uniforms:ti([Te.common,Te.specularmap,Te.envmap,Te.aomap,Te.lightmap,Te.fog]),vertexShader:mt.meshbasic_vert,fragmentShader:mt.meshbasic_frag},lambert:{uniforms:ti([Te.common,Te.specularmap,Te.envmap,Te.aomap,Te.lightmap,Te.emissivemap,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.fog,Te.lights,{emissive:{value:new Ne(0)}}]),vertexShader:mt.meshlambert_vert,fragmentShader:mt.meshlambert_frag},phong:{uniforms:ti([Te.common,Te.specularmap,Te.envmap,Te.aomap,Te.lightmap,Te.emissivemap,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.fog,Te.lights,{emissive:{value:new Ne(0)},specular:{value:new Ne(1118481)},shininess:{value:30}}]),vertexShader:mt.meshphong_vert,fragmentShader:mt.meshphong_frag},standard:{uniforms:ti([Te.common,Te.envmap,Te.aomap,Te.lightmap,Te.emissivemap,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.roughnessmap,Te.metalnessmap,Te.fog,Te.lights,{emissive:{value:new Ne(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag},toon:{uniforms:ti([Te.common,Te.aomap,Te.lightmap,Te.emissivemap,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.gradientmap,Te.fog,Te.lights,{emissive:{value:new Ne(0)}}]),vertexShader:mt.meshtoon_vert,fragmentShader:mt.meshtoon_frag},matcap:{uniforms:ti([Te.common,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.fog,{matcap:{value:null}}]),vertexShader:mt.meshmatcap_vert,fragmentShader:mt.meshmatcap_frag},points:{uniforms:ti([Te.points,Te.fog]),vertexShader:mt.points_vert,fragmentShader:mt.points_frag},dashed:{uniforms:ti([Te.common,Te.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mt.linedashed_vert,fragmentShader:mt.linedashed_frag},depth:{uniforms:ti([Te.common,Te.displacementmap]),vertexShader:mt.depth_vert,fragmentShader:mt.depth_frag},normal:{uniforms:ti([Te.common,Te.bumpmap,Te.normalmap,Te.displacementmap,{opacity:{value:1}}]),vertexShader:mt.meshnormal_vert,fragmentShader:mt.meshnormal_frag},sprite:{uniforms:ti([Te.sprite,Te.fog]),vertexShader:mt.sprite_vert,fragmentShader:mt.sprite_frag},background:{uniforms:{uvTransform:{value:new gt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:mt.background_vert,fragmentShader:mt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:mt.backgroundCube_vert,fragmentShader:mt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:mt.cube_vert,fragmentShader:mt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mt.equirect_vert,fragmentShader:mt.equirect_frag},distanceRGBA:{uniforms:ti([Te.common,Te.displacementmap,{referencePosition:{value:new O},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mt.distanceRGBA_vert,fragmentShader:mt.distanceRGBA_frag},shadow:{uniforms:ti([Te.lights,Te.fog,{color:{value:new Ne(0)},opacity:{value:1}}]),vertexShader:mt.shadow_vert,fragmentShader:mt.shadow_frag}};pr.physical={uniforms:ti([pr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new gt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new gt},clearcoatNormalScale:{value:new pe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new gt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new gt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new gt},sheen:{value:0},sheenColor:{value:new Ne(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new gt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new gt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new gt},transmissionSamplerSize:{value:new pe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new gt},attenuationDistance:{value:0},attenuationColor:{value:new Ne(0)},specularColor:{value:new Ne(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new gt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new gt},anisotropyVector:{value:new pe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new gt}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag};const Jh={r:0,b:0,g:0};function w5(n,e,t,i,r,s,o){const l=new Ne(0);let c=s===!0?0:1,f,h,d=null,m=0,v=null;function _(M,g){let x=!1,S=g.isScene===!0?g.background:null;switch(S&&S.isTexture&&(S=(g.backgroundBlurriness>0?t:e).get(S)),S===null?E(l,c):S&&S.isColor&&(E(S,1),x=!0),n.xr.getEnvironmentBlendMode()){case"opaque":x=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,o),x=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,o),x=!0;break}(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===Yl)?(h===void 0&&(h=new Dn(new vo(1,1,1),new Ui({name:"BackgroundCubeMaterial",uniforms:zl(pr.backgroundCube.uniforms),vertexShader:pr.backgroundCube.vertexShader,fragmentShader:pr.backgroundCube.fragmentShader,side:ri,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(P,L,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),h.material.uniforms.envMap.value=S,h.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,h.material.toneMapped=S.colorSpace!==ft,(d!==S||m!==S.version||v!==n.toneMapping)&&(h.material.needsUpdate=!0,d=S,m=S.version,v=n.toneMapping),h.layers.enableAll(),M.unshift(h,h.geometry,h.material,0,0,null)):S&&S.isTexture&&(f===void 0&&(f=new Dn(new Zl(2,2),new Ui({name:"BackgroundMaterial",uniforms:zl(pr.background.uniforms),vertexShader:pr.background.vertexShader,fragmentShader:pr.background.fragmentShader,side:gs,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=S,f.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,f.material.toneMapped=S.colorSpace!==ft,S.matrixAutoUpdate===!0&&S.updateMatrix(),f.material.uniforms.uvTransform.value.copy(S.matrix),(d!==S||m!==S.version||v!==n.toneMapping)&&(f.material.needsUpdate=!0,d=S,m=S.version,v=n.toneMapping),f.layers.enableAll(),M.unshift(f,f.geometry,f.material,0,0,null))}function E(M,g){M.getRGB(Jh,d3(n)),i.buffers.color.setClear(Jh.r,Jh.g,Jh.b,g,o)}return{getClearColor:function(){return l},setClearColor:function(M,g=1){l.set(M),c=g,E(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(M){c=M,E(l,c)},render:_}}function T5(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,l={},c=M(null);let f=c,h=!1;function d(Z,$,ae,ne,U){let H=!1;if(o){const z=E(ne,ae,$);f!==z&&(f=z,v(f.object)),H=g(Z,ne,ae,U),H&&x(Z,ne,ae,U)}else{const z=$.wireframe===!0;(f.geometry!==ne.id||f.program!==ae.id||f.wireframe!==z)&&(f.geometry=ne.id,f.program=ae.id,f.wireframe=z,H=!0)}U!==null&&t.update(U,n.ELEMENT_ARRAY_BUFFER),(H||h)&&(h=!1,N(Z,$,ae,ne),U!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(U).buffer))}function m(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function v(Z){return i.isWebGL2?n.bindVertexArray(Z):s.bindVertexArrayOES(Z)}function _(Z){return i.isWebGL2?n.deleteVertexArray(Z):s.deleteVertexArrayOES(Z)}function E(Z,$,ae){const ne=ae.wireframe===!0;let U=l[Z.id];U===void 0&&(U={},l[Z.id]=U);let H=U[$.id];H===void 0&&(H={},U[$.id]=H);let z=H[ne];return z===void 0&&(z=M(m()),H[ne]=z),z}function M(Z){const $=[],ae=[],ne=[];for(let U=0;U<r;U++)$[U]=0,ae[U]=0,ne[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:ae,attributeDivisors:ne,object:Z,attributes:{},index:null}}function g(Z,$,ae,ne){const U=f.attributes,H=$.attributes;let z=0;const te=ae.getAttributes();for(const B in te)if(te[B].location>=0){const se=U[B];let Ee=H[B];if(Ee===void 0&&(B==="instanceMatrix"&&Z.instanceMatrix&&(Ee=Z.instanceMatrix),B==="instanceColor"&&Z.instanceColor&&(Ee=Z.instanceColor)),se===void 0||se.attribute!==Ee||Ee&&se.data!==Ee.data)return!0;z++}return f.attributesNum!==z||f.index!==ne}function x(Z,$,ae,ne){const U={},H=$.attributes;let z=0;const te=ae.getAttributes();for(const B in te)if(te[B].location>=0){let se=H[B];se===void 0&&(B==="instanceMatrix"&&Z.instanceMatrix&&(se=Z.instanceMatrix),B==="instanceColor"&&Z.instanceColor&&(se=Z.instanceColor));const Ee={};Ee.attribute=se,se&&se.data&&(Ee.data=se.data),U[B]=Ee,z++}f.attributes=U,f.attributesNum=z,f.index=ne}function S(){const Z=f.newAttributes;for(let $=0,ae=Z.length;$<ae;$++)Z[$]=0}function T(Z){A(Z,0)}function A(Z,$){const ae=f.newAttributes,ne=f.enabledAttributes,U=f.attributeDivisors;ae[Z]=1,ne[Z]===0&&(n.enableVertexAttribArray(Z),ne[Z]=1),U[Z]!==$&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Z,$),U[Z]=$)}function P(){const Z=f.newAttributes,$=f.enabledAttributes;for(let ae=0,ne=$.length;ae<ne;ae++)$[ae]!==Z[ae]&&(n.disableVertexAttribArray(ae),$[ae]=0)}function L(Z,$,ae,ne,U,H,z){z===!0?n.vertexAttribIPointer(Z,$,ae,U,H):n.vertexAttribPointer(Z,$,ae,ne,U,H)}function N(Z,$,ae,ne){if(i.isWebGL2===!1&&(Z.isInstancedMesh||ne.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const U=ne.attributes,H=ae.getAttributes(),z=$.defaultAttributeValues;for(const te in H){const B=H[te];if(B.location>=0){let he=U[te];if(he===void 0&&(te==="instanceMatrix"&&Z.instanceMatrix&&(he=Z.instanceMatrix),te==="instanceColor"&&Z.instanceColor&&(he=Z.instanceColor)),he!==void 0){const se=he.normalized,Ee=he.itemSize,ve=t.get(he);if(ve===void 0)continue;const Ce=ve.buffer,ot=ve.type,$e=ve.bytesPerElement,Et=i.isWebGL2===!0&&(ot===n.INT||ot===n.UNSIGNED_INT||he.gpuType===my);if(he.isInterleavedBufferAttribute){const Ye=he.data,V=Ye.stride,ge=he.offset;if(Ye.isInstancedInterleavedBuffer){for(let de=0;de<B.locationSize;de++)A(B.location+de,Ye.meshPerAttribute);Z.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=Ye.meshPerAttribute*Ye.count)}else for(let de=0;de<B.locationSize;de++)T(B.location+de);n.bindBuffer(n.ARRAY_BUFFER,Ce);for(let de=0;de<B.locationSize;de++)L(B.location+de,Ee/B.locationSize,ot,se,V*$e,(ge+Ee/B.locationSize*de)*$e,Et)}else{if(he.isInstancedBufferAttribute){for(let Ye=0;Ye<B.locationSize;Ye++)A(B.location+Ye,he.meshPerAttribute);Z.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let Ye=0;Ye<B.locationSize;Ye++)T(B.location+Ye);n.bindBuffer(n.ARRAY_BUFFER,Ce);for(let Ye=0;Ye<B.locationSize;Ye++)L(B.location+Ye,Ee/B.locationSize,ot,se,Ee*$e,Ee/B.locationSize*Ye*$e,Et)}}else if(z!==void 0){const se=z[te];if(se!==void 0)switch(se.length){case 2:n.vertexAttrib2fv(B.location,se);break;case 3:n.vertexAttrib3fv(B.location,se);break;case 4:n.vertexAttrib4fv(B.location,se);break;default:n.vertexAttrib1fv(B.location,se)}}}}P()}function R(){J();for(const Z in l){const $=l[Z];for(const ae in $){const ne=$[ae];for(const U in ne)_(ne[U].object),delete ne[U];delete $[ae]}delete l[Z]}}function b(Z){if(l[Z.id]===void 0)return;const $=l[Z.id];for(const ae in $){const ne=$[ae];for(const U in ne)_(ne[U].object),delete ne[U];delete $[ae]}delete l[Z.id]}function G(Z){for(const $ in l){const ae=l[$];if(ae[Z.id]===void 0)continue;const ne=ae[Z.id];for(const U in ne)_(ne[U].object),delete ne[U];delete ae[Z.id]}}function J(){j(),h=!0,f!==c&&(f=c,v(f.object))}function j(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:d,reset:J,resetDefaultState:j,dispose:R,releaseStatesOfGeometry:b,releaseStatesOfProgram:G,initAttributes:S,enableAttribute:T,disableUnusedAttributes:P}}function C5(n,e,t,i){const r=i.isWebGL2;let s;function o(f){s=f}function l(f,h){n.drawArrays(s,f,h),t.update(h,s,1)}function c(f,h,d){if(d===0)return;let m,v;if(r)m=n,v="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,f,h,d),t.update(h,s,d)}this.setMode=o,this.render=l,this.renderInstances=c}function A5(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let l=t.precision!==void 0?t.precision:"highp";const c=s(l);c!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",c,"instead."),l=c);const f=o||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),E=n.getParameter(n.MAX_VERTEX_ATTRIBS),M=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),x=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=m>0,T=o||e.has("OES_texture_float"),A=S&&T,P=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:f,getMaxAnisotropy:r,getMaxPrecision:s,precision:l,logarithmicDepthBuffer:h,maxTextures:d,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:_,maxAttributes:E,maxVertexUniforms:M,maxVaryings:g,maxFragmentUniforms:x,vertexTextures:S,floatFragmentTextures:T,floatVertexTextures:A,maxSamples:P}}function R5(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new zs,l=new gt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,m){const v=d.length!==0||m||i!==0||r;return r=m,i=d.length,v},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,m){t=h(d,m,0)},this.setState=function(d,m,v){const _=d.clippingPlanes,E=d.clipIntersection,M=d.clipShadows,g=n.get(d);if(!r||_===null||_.length===0||s&&!M)s?h(null):f();else{const x=s?0:i,S=x*4;let T=g.clippingState||null;c.value=T,T=h(_,m,S,v);for(let A=0;A!==S;++A)T[A]=t[A];g.clippingState=T,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=x}};function f(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(d,m,v,_){const E=d!==null?d.length:0;let M=null;if(E!==0){if(M=c.value,_!==!0||M===null){const g=v+E*4,x=m.matrixWorldInverse;l.getNormalMatrix(x),(M===null||M.length<g)&&(M=new Float32Array(g));for(let S=0,T=v;S!==E;++S,T+=4)o.copy(d[S]).applyMatrix4(x,l),o.normal.toArray(M,T),M[T+3]=o.constant}c.value=M,c.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,M}}function P5(n){let e=new WeakMap;function t(o,l){return l===Ac?o.mapping=oo:l===Rc&&(o.mapping=ao),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const l=o.mapping;if(l===Ac||l===Rc)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const f=new g3(c.height/2);return f.fromEquirectangularTexture(n,o),e.set(o,f),o.addEventListener("dispose",r),t(f.texture,o.mapping)}else return null}}return o}function r(o){const l=o.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class nf extends ef{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,l=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,l-=h*this.view.offsetY,c=l-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const vl=4,gM=[.125,.215,.35,.446,.526,.582],Ho=20,t0=new nf,vM=new Ne;let n0=null;const zo=(1+Math.sqrt(5))/2,Ya=1/zo,yM=[new O(1,1,1),new O(-1,1,1),new O(1,1,-1),new O(-1,1,-1),new O(0,zo,Ya),new O(0,zo,-Ya),new O(Ya,0,zo),new O(-Ya,0,zo),new O(zo,Ya,0),new O(-zo,Ya,0)];class t1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){n0=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=SM(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=xM(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(n0),e.scissorTest=!1,Kh(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===oo||e.mapping===ao?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),n0=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:hn,minFilter:hn,generateMipmaps:!1,type:Fl,format:pi,colorSpace:_r,depthBuffer:!1},r=_M(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_M(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=b5(s)),this._blurMaterial=L5(s,e,t)}return r}_compileMaterial(e){const t=new Dn(this._lodPlanes[0],e);this._renderer.compile(t,t0)}_sceneToCubeUV(e,t,i,r){const l=new bn(90,1,t,i),c=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,m=h.toneMapping;h.getClearColor(vM),h.toneMapping=vr,h.autoClear=!1;const v=new go({name:"PMREM.Background",side:ri,depthWrite:!1,depthTest:!1}),_=new Dn(new vo,v);let E=!1;const M=e.background;M?M.isColor&&(v.color.copy(M),e.background=null,E=!0):(v.color.copy(vM),E=!0);for(let g=0;g<6;g++){const x=g%3;x===0?(l.up.set(0,c[g],0),l.lookAt(f[g],0,0)):x===1?(l.up.set(0,0,c[g]),l.lookAt(0,f[g],0)):(l.up.set(0,c[g],0),l.lookAt(0,0,f[g]));const S=this._cubeSize;Kh(r,x*S,g>2?S:0,S,S),h.setRenderTarget(r),E&&h.render(_,l),h.render(e,l)}_.geometry.dispose(),_.material.dispose(),h.toneMapping=m,h.autoClear=d,e.background=M}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===oo||e.mapping===ao;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=SM()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=xM());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Dn(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const c=this._cubeSize;Kh(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,t0)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=yM[(r-1)%yM.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,l){const c=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=new Dn(this._lodPlanes[r],f),m=f.uniforms,v=this._sizeLods[i]-1,_=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*Ho-1),E=s/_,M=isFinite(s)?1+Math.floor(h*E):Ho;M>Ho&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${Ho}`);const g=[];let x=0;for(let L=0;L<Ho;++L){const N=L/E,R=Math.exp(-N*N/2);g.push(R),L===0?x+=R:L<M&&(x+=2*R)}for(let L=0;L<g.length;L++)g[L]=g[L]/x;m.envMap.value=e.texture,m.samples.value=M,m.weights.value=g,m.latitudinal.value=o==="latitudinal",l&&(m.poleAxis.value=l);const{_lodMax:S}=this;m.dTheta.value=_,m.mipInt.value=S-i;const T=this._sizeLods[r],A=3*T*(r>S-vl?r-S+vl:0),P=4*(this._cubeSize-T);Kh(t,A,P,3*T,2*T),c.setRenderTarget(t),c.render(d,t0)}}function b5(n){const e=[],t=[],i=[];let r=n;const s=n-vl+1+gM.length;for(let o=0;o<s;o++){const l=Math.pow(2,r);t.push(l);let c=1/l;o>n-vl?c=gM[o-n+vl-1]:o===0&&(c=0),i.push(c);const f=1/(l-2),h=-f,d=1+f,m=[h,h,d,h,d,d,h,h,d,d,h,d],v=6,_=6,E=3,M=2,g=1,x=new Float32Array(E*_*v),S=new Float32Array(M*_*v),T=new Float32Array(g*_*v);for(let P=0;P<v;P++){const L=P%3*2/3-1,N=P>2?0:-1,R=[L,N,0,L+2/3,N,0,L+2/3,N+1,0,L,N,0,L+2/3,N+1,0,L,N+1,0];x.set(R,E*_*P),S.set(m,M*_*P);const b=[P,P,P,P,P,P];T.set(b,g*_*P)}const A=new ht;A.setAttribute("position",new Ft(x,E)),A.setAttribute("uv",new Ft(S,M)),A.setAttribute("faceIndex",new Ft(T,g)),e.push(A),r>vl&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function _M(n,e,t){const i=new xr(n,e,t);return i.texture.mapping=Yl,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Kh(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function L5(n,e,t){const i=new Float32Array(Ho),r=new O(0,1,0);return new Ui({name:"SphericalGaussianBlur",defines:{n:Ho,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Py(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:fs,depthTest:!1,depthWrite:!1})}function xM(){return new Ui({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Py(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:fs,depthTest:!1,depthWrite:!1})}function SM(){return new Ui({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Py(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:fs,depthTest:!1,depthWrite:!1})}function Py(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function I5(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const c=l.mapping,f=c===Ac||c===Rc,h=c===oo||c===ao;if(f||h)if(l.isRenderTargetTexture&&l.needsPMREMUpdate===!0){l.needsPMREMUpdate=!1;let d=e.get(l);return t===null&&(t=new t1(n)),d=f?t.fromEquirectangular(l,d):t.fromCubemap(l,d),e.set(l,d),d.texture}else{if(e.has(l))return e.get(l).texture;{const d=l.image;if(f&&d&&d.height>0||h&&d&&r(d)){t===null&&(t=new t1(n));const m=f?t.fromEquirectangular(l):t.fromCubemap(l);return e.set(l,m),l.addEventListener("dispose",s),m.texture}else return null}}}return l}function r(l){let c=0;const f=6;for(let h=0;h<f;h++)l[h]!==void 0&&c++;return c===f}function s(l){const c=l.target;c.removeEventListener("dispose",s);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function N5(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function U5(n,e,t,i){const r={},s=new WeakMap;function o(d){const m=d.target;m.index!==null&&e.remove(m.index);for(const _ in m.attributes)e.remove(m.attributes[_]);for(const _ in m.morphAttributes){const E=m.morphAttributes[_];for(let M=0,g=E.length;M<g;M++)e.remove(E[M])}m.removeEventListener("dispose",o),delete r[m.id];const v=s.get(m);v&&(e.remove(v),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function l(d,m){return r[m.id]===!0||(m.addEventListener("dispose",o),r[m.id]=!0,t.memory.geometries++),m}function c(d){const m=d.attributes;for(const _ in m)e.update(m[_],n.ARRAY_BUFFER);const v=d.morphAttributes;for(const _ in v){const E=v[_];for(let M=0,g=E.length;M<g;M++)e.update(E[M],n.ARRAY_BUFFER)}}function f(d){const m=[],v=d.index,_=d.attributes.position;let E=0;if(v!==null){const x=v.array;E=v.version;for(let S=0,T=x.length;S<T;S+=3){const A=x[S+0],P=x[S+1],L=x[S+2];m.push(A,P,P,L,L,A)}}else{const x=_.array;E=_.version;for(let S=0,T=x.length/3-1;S<T;S+=3){const A=S+0,P=S+1,L=S+2;m.push(A,P,P,L,L,A)}}const M=new(f3(m)?Ry:Ay)(m,1);M.version=E;const g=s.get(d);g&&e.remove(g),s.set(d,M)}function h(d){const m=s.get(d);if(m){const v=d.index;v!==null&&m.version<v.version&&f(d)}else f(d);return s.get(d)}return{get:l,update:c,getWireframeAttribute:h}}function D5(n,e,t,i){const r=i.isWebGL2;let s;function o(m){s=m}let l,c;function f(m){l=m.type,c=m.bytesPerElement}function h(m,v){n.drawElements(s,v,l,m*c),t.update(v,s,1)}function d(m,v,_){if(_===0)return;let E,M;if(r)E=n,M="drawElementsInstanced";else if(E=e.get("ANGLE_instanced_arrays"),M="drawElementsInstancedANGLE",E===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}E[M](s,v,l,m*c,_),t.update(v,s,_)}this.setMode=o,this.setIndex=f,this.render=h,this.renderInstances=d}function O5(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,l){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=l*(s/3);break;case n.LINES:t.lines+=l*(s/2);break;case n.LINE_STRIP:t.lines+=l*(s-1);break;case n.LINE_LOOP:t.lines+=l*s;break;case n.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function F5(n,e){return n[0]-e[0]}function k5(n,e){return Math.abs(e[1])-Math.abs(n[1])}function z5(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new It,l=[];for(let f=0;f<8;f++)l[f]=[f,0];function c(f,h,d){const m=f.morphTargetInfluences;if(e.isWebGL2===!0){const _=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,E=_!==void 0?_.length:0;let M=s.get(h);if(M===void 0||M.count!==E){let $=function(){j.dispose(),s.delete(h),h.removeEventListener("dispose",$)};var v=$;M!==void 0&&M.texture.dispose();const S=h.morphAttributes.position!==void 0,T=h.morphAttributes.normal!==void 0,A=h.morphAttributes.color!==void 0,P=h.morphAttributes.position||[],L=h.morphAttributes.normal||[],N=h.morphAttributes.color||[];let R=0;S===!0&&(R=1),T===!0&&(R=2),A===!0&&(R=3);let b=h.attributes.position.count*R,G=1;b>e.maxTextureSize&&(G=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);const J=new Float32Array(b*G*4*E),j=new jp(J,b,G,E);j.type=Fr,j.needsUpdate=!0;const Z=R*4;for(let ae=0;ae<E;ae++){const ne=P[ae],U=L[ae],H=N[ae],z=b*G*4*ae;for(let te=0;te<ne.count;te++){const B=te*Z;S===!0&&(o.fromBufferAttribute(ne,te),J[z+B+0]=o.x,J[z+B+1]=o.y,J[z+B+2]=o.z,J[z+B+3]=0),T===!0&&(o.fromBufferAttribute(U,te),J[z+B+4]=o.x,J[z+B+5]=o.y,J[z+B+6]=o.z,J[z+B+7]=0),A===!0&&(o.fromBufferAttribute(H,te),J[z+B+8]=o.x,J[z+B+9]=o.y,J[z+B+10]=o.z,J[z+B+11]=H.itemSize===4?o.w:1)}}M={count:E,texture:j,size:new pe(b,G)},s.set(h,M),h.addEventListener("dispose",$)}let g=0;for(let S=0;S<m.length;S++)g+=m[S];const x=h.morphTargetsRelative?1:1-g;d.getUniforms().setValue(n,"morphTargetBaseInfluence",x),d.getUniforms().setValue(n,"morphTargetInfluences",m),d.getUniforms().setValue(n,"morphTargetsTexture",M.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",M.size)}else{const _=m===void 0?0:m.length;let E=i[h.id];if(E===void 0||E.length!==_){E=[];for(let T=0;T<_;T++)E[T]=[T,0];i[h.id]=E}for(let T=0;T<_;T++){const A=E[T];A[0]=T,A[1]=m[T]}E.sort(k5);for(let T=0;T<8;T++)T<_&&E[T][1]?(l[T][0]=E[T][0],l[T][1]=E[T][1]):(l[T][0]=Number.MAX_SAFE_INTEGER,l[T][1]=0);l.sort(F5);const M=h.morphAttributes.position,g=h.morphAttributes.normal;let x=0;for(let T=0;T<8;T++){const A=l[T],P=A[0],L=A[1];P!==Number.MAX_SAFE_INTEGER&&L?(M&&h.getAttribute("morphTarget"+T)!==M[P]&&h.setAttribute("morphTarget"+T,M[P]),g&&h.getAttribute("morphNormal"+T)!==g[P]&&h.setAttribute("morphNormal"+T,g[P]),r[T]=L,x+=L):(M&&h.hasAttribute("morphTarget"+T)===!0&&h.deleteAttribute("morphTarget"+T),g&&h.hasAttribute("morphNormal"+T)===!0&&h.deleteAttribute("morphNormal"+T),r[T]=0)}const S=h.morphTargetsRelative?1:1-x;d.getUniforms().setValue(n,"morphTargetBaseInfluence",S),d.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:c}}function B5(n,e,t,i){let r=new WeakMap;function s(c){const f=i.render.frame,h=c.geometry,d=e.get(c,h);return r.get(d)!==f&&(e.update(d),r.set(d,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER)),d}function o(){r=new WeakMap}function l(c){const f=c.target;f.removeEventListener("dispose",l),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:o}}const y3=new an,_3=new jp,x3=new Cy,S3=new tf,MM=[],EM=[],wM=new Float32Array(16),TM=new Float32Array(9),CM=new Float32Array(4);function Jl(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=MM[r];if(s===void 0&&(s=new Float32Array(r),MM[r]=s),e!==0){i.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,n[o].toArray(s,l)}return s}function En(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function wn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function qp(n,e){let t=EM[e];t===void 0&&(t=new Int32Array(e),EM[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function H5(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function V5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(En(t,e))return;n.uniform2fv(this.addr,e),wn(t,e)}}function G5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(En(t,e))return;n.uniform3fv(this.addr,e),wn(t,e)}}function W5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(En(t,e))return;n.uniform4fv(this.addr,e),wn(t,e)}}function X5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(En(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),wn(t,e)}else{if(En(t,i))return;CM.set(i),n.uniformMatrix2fv(this.addr,!1,CM),wn(t,i)}}function j5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(En(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),wn(t,e)}else{if(En(t,i))return;TM.set(i),n.uniformMatrix3fv(this.addr,!1,TM),wn(t,i)}}function Y5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(En(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),wn(t,e)}else{if(En(t,i))return;wM.set(i),n.uniformMatrix4fv(this.addr,!1,wM),wn(t,i)}}function q5(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Z5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(En(t,e))return;n.uniform2iv(this.addr,e),wn(t,e)}}function J5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(En(t,e))return;n.uniform3iv(this.addr,e),wn(t,e)}}function K5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(En(t,e))return;n.uniform4iv(this.addr,e),wn(t,e)}}function Q5(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function $5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(En(t,e))return;n.uniform2uiv(this.addr,e),wn(t,e)}}function eU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(En(t,e))return;n.uniform3uiv(this.addr,e),wn(t,e)}}function tU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(En(t,e))return;n.uniform4uiv(this.addr,e),wn(t,e)}}function nU(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||y3,r)}function iU(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||x3,r)}function rU(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||S3,r)}function sU(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||_3,r)}function oU(n){switch(n){case 5126:return H5;case 35664:return V5;case 35665:return G5;case 35666:return W5;case 35674:return X5;case 35675:return j5;case 35676:return Y5;case 5124:case 35670:return q5;case 35667:case 35671:return Z5;case 35668:case 35672:return J5;case 35669:case 35673:return K5;case 5125:return Q5;case 36294:return $5;case 36295:return eU;case 36296:return tU;case 35678:case 36198:case 36298:case 36306:case 35682:return nU;case 35679:case 36299:case 36307:return iU;case 35680:case 36300:case 36308:case 36293:return rU;case 36289:case 36303:case 36311:case 36292:return sU}}function aU(n,e){n.uniform1fv(this.addr,e)}function lU(n,e){const t=Jl(e,this.size,2);n.uniform2fv(this.addr,t)}function uU(n,e){const t=Jl(e,this.size,3);n.uniform3fv(this.addr,t)}function cU(n,e){const t=Jl(e,this.size,4);n.uniform4fv(this.addr,t)}function fU(n,e){const t=Jl(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function hU(n,e){const t=Jl(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function dU(n,e){const t=Jl(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function pU(n,e){n.uniform1iv(this.addr,e)}function mU(n,e){n.uniform2iv(this.addr,e)}function gU(n,e){n.uniform3iv(this.addr,e)}function vU(n,e){n.uniform4iv(this.addr,e)}function yU(n,e){n.uniform1uiv(this.addr,e)}function _U(n,e){n.uniform2uiv(this.addr,e)}function xU(n,e){n.uniform3uiv(this.addr,e)}function SU(n,e){n.uniform4uiv(this.addr,e)}function MU(n,e,t){const i=this.cache,r=e.length,s=qp(t,r);En(i,s)||(n.uniform1iv(this.addr,s),wn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||y3,s[o])}function EU(n,e,t){const i=this.cache,r=e.length,s=qp(t,r);En(i,s)||(n.uniform1iv(this.addr,s),wn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||x3,s[o])}function wU(n,e,t){const i=this.cache,r=e.length,s=qp(t,r);En(i,s)||(n.uniform1iv(this.addr,s),wn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||S3,s[o])}function TU(n,e,t){const i=this.cache,r=e.length,s=qp(t,r);En(i,s)||(n.uniform1iv(this.addr,s),wn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||_3,s[o])}function CU(n){switch(n){case 5126:return aU;case 35664:return lU;case 35665:return uU;case 35666:return cU;case 35674:return fU;case 35675:return hU;case 35676:return dU;case 5124:case 35670:return pU;case 35667:case 35671:return mU;case 35668:case 35672:return gU;case 35669:case 35673:return vU;case 5125:return yU;case 36294:return _U;case 36295:return xU;case 36296:return SU;case 35678:case 36198:case 36298:case 36306:case 35682:return MU;case 35679:case 36299:case 36307:return EU;case 35680:case 36300:case 36308:case 36293:return wU;case 36289:case 36303:case 36311:case 36292:return TU}}class AU{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=oU(t.type)}}class RU{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=CU(t.type)}}class PU{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(e,t[l.id],i)}}}const i0=/(\w+)(\])?(\[|\.)?/g;function AM(n,e){n.seq.push(e),n.map[e.id]=e}function bU(n,e,t){const i=n.name,r=i.length;for(i0.lastIndex=0;;){const s=i0.exec(i),o=i0.lastIndex;let l=s[1];const c=s[2]==="]",f=s[3];if(c&&(l=l|0),f===void 0||f==="["&&o+2===r){AM(t,f===void 0?new AU(l,n,e):new RU(l,n,e));break}else{let d=t.map[l];d===void 0&&(d=new PU(l),AM(t,d)),t=d}}}class Bd{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);bU(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const l=t[s],c=i[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function RM(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let LU=0;function IU(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const l=o+1;i.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return i.join(`
`)}function NU(n){switch(n){case _r:return["Linear","( value )"];case ft:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function PM(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+IU(n.getShaderSource(e),o)}else return r}function UU(n,e){const t=NU(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function DU(n,e){let t;switch(e){case OT:t="Linear";break;case FT:t="Reinhard";break;case kT:t="OptimizedCineon";break;case dy:t="ACESFilmic";break;case zT:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function OU(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ju).join(`
`)}function FU(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function kU(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let l=1;s.type===n.FLOAT_MAT2&&(l=2),s.type===n.FLOAT_MAT3&&(l=3),s.type===n.FLOAT_MAT4&&(l=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:l}}return t}function ju(n){return n!==""}function bM(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function LM(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const zU=/^[ \t]*#include +<([\w\d./]+)>/gm;function n1(n){return n.replace(zU,BU)}function BU(n,e){const t=mt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return n1(t)}const HU=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function IM(n){return n.replace(HU,VU)}function VU(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function NM(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function GU(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Vp?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===nc?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===fr&&(e="SHADOWMAP_TYPE_VSM"),e}function WU(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case oo:case ao:e="ENVMAP_TYPE_CUBE";break;case Yl:e="ENVMAP_TYPE_CUBE_UV";break}return e}function XU(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ao:e="ENVMAP_MODE_REFRACTION";break}return e}function jU(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Qc:e="ENVMAP_BLENDING_MULTIPLY";break;case UT:e="ENVMAP_BLENDING_MIX";break;case DT:e="ENVMAP_BLENDING_ADD";break}return e}function YU(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function qU(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const c=GU(t),f=WU(t),h=XU(t),d=jU(t),m=YU(t),v=t.isWebGL2?"":OU(t),_=FU(s),E=r.createProgram();let M,g,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(ju).join(`
`),M.length>0&&(M+=`
`),g=[v,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(ju).join(`
`),g.length>0&&(g+=`
`)):(M=[NM(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ju).join(`
`),g=[v,NM(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==vr?"#define TONE_MAPPING":"",t.toneMapping!==vr?mt.tonemapping_pars_fragment:"",t.toneMapping!==vr?DU("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",mt.encodings_pars_fragment,UU("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ju).join(`
`)),o=n1(o),o=bM(o,t),o=LM(o,t),l=n1(l),l=bM(l,t),l=LM(l,t),o=IM(o),l=IM(l),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,M=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,g=["#define varying in",t.glslVersion===$v?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===$v?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const S=x+M+o,T=x+g+l,A=RM(r,r.VERTEX_SHADER,S),P=RM(r,r.FRAGMENT_SHADER,T);if(r.attachShader(E,A),r.attachShader(E,P),t.index0AttributeName!==void 0?r.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(E,0,"position"),r.linkProgram(E),n.debug.checkShaderErrors){const R=r.getProgramInfoLog(E).trim(),b=r.getShaderInfoLog(A).trim(),G=r.getShaderInfoLog(P).trim();let J=!0,j=!0;if(r.getProgramParameter(E,r.LINK_STATUS)===!1)if(J=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,E,A,P);else{const Z=PM(r,A,"vertex"),$=PM(r,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(E,r.VALIDATE_STATUS)+`

Program Info Log: `+R+`
`+Z+`
`+$)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(b===""||G==="")&&(j=!1);j&&(this.diagnostics={runnable:J,programLog:R,vertexShader:{log:b,prefix:M},fragmentShader:{log:G,prefix:g}})}r.deleteShader(A),r.deleteShader(P);let L;this.getUniforms=function(){return L===void 0&&(L=new Bd(r,E)),L};let N;return this.getAttributes=function(){return N===void 0&&(N=kU(r,E)),N},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(E),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=LU++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=A,this.fragmentShader=P,this}let ZU=0;class JU{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new KU(e),t.set(e,i)),i}}class KU{constructor(e){this.id=ZU++,this.code=e,this.usedTimes=0}}function QU(n,e,t,i,r,s,o){const l=new ea,c=new JU,f=[],h=r.isWebGL2,d=r.logarithmicDepthBuffer,m=r.vertexTextures;let v=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(R){return R===0?"uv":`uv${R}`}function M(R,b,G,J,j){const Z=J.fog,$=j.geometry,ae=R.isMeshStandardMaterial?J.environment:null,ne=(R.isMeshStandardMaterial?t:e).get(R.envMap||ae),U=ne&&ne.mapping===Yl?ne.image.height:null,H=_[R.type];R.precision!==null&&(v=r.getMaxPrecision(R.precision),v!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",v,"instead."));const z=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,te=z!==void 0?z.length:0;let B=0;$.morphAttributes.position!==void 0&&(B=1),$.morphAttributes.normal!==void 0&&(B=2),$.morphAttributes.color!==void 0&&(B=3);let he,se,Ee,ve;if(H){const $t=pr[H];he=$t.vertexShader,se=$t.fragmentShader}else he=R.vertexShader,se=R.fragmentShader,c.update(R),Ee=c.getVertexShaderID(R),ve=c.getFragmentShaderID(R);const Ce=n.getRenderTarget(),ot=j.isInstancedMesh===!0,$e=!!R.map,Et=!!R.matcap,Ye=!!ne,V=!!R.aoMap,ge=!!R.lightMap,de=!!R.bumpMap,Me=!!R.normalMap,me=!!R.displacementMap,Ge=!!R.emissiveMap,Ue=!!R.metalnessMap,Oe=!!R.roughnessMap,et=R.anisotropy>0,xt=R.clearcoat>0,Xt=R.iridescence>0,k=R.sheen>0,I=R.transmission>0,le=et&&!!R.anisotropyMap,_e=xt&&!!R.clearcoatMap,xe=xt&&!!R.clearcoatNormalMap,Ae=xt&&!!R.clearcoatRoughnessMap,We=Xt&&!!R.iridescenceMap,Re=Xt&&!!R.iridescenceThicknessMap,fe=k&&!!R.sheenColorMap,qe=k&&!!R.sheenRoughnessMap,Ze=!!R.specularMap,Qe=!!R.specularColorMap,ze=!!R.specularIntensityMap,Be=I&&!!R.transmissionMap,dt=I&&!!R.thicknessMap,Ut=!!R.gradientMap,W=!!R.alphaMap,Pe=R.alphaTest>0,ie=!!R.extensions,we=!!$.attributes.uv1,Le=!!$.attributes.uv2,Mt=!!$.attributes.uv3;return{isWebGL2:h,shaderID:H,shaderType:R.type,shaderName:R.name,vertexShader:he,fragmentShader:se,defines:R.defines,customVertexShaderID:Ee,customFragmentShaderID:ve,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:v,instancing:ot,instancingColor:ot&&j.instanceColor!==null,supportsVertexTextures:m,outputColorSpace:Ce===null?n.outputColorSpace:Ce.isXRRenderTarget===!0?Ce.texture.colorSpace:_r,map:$e,matcap:Et,envMap:Ye,envMapMode:Ye&&ne.mapping,envMapCubeUVHeight:U,aoMap:V,lightMap:ge,bumpMap:de,normalMap:Me,displacementMap:m&&me,emissiveMap:Ge,normalMapObjectSpace:Me&&R.normalMapType===e3,normalMapTangentSpace:Me&&R.normalMapType===mo,metalnessMap:Ue,roughnessMap:Oe,anisotropy:et,anisotropyMap:le,clearcoat:xt,clearcoatMap:_e,clearcoatNormalMap:xe,clearcoatRoughnessMap:Ae,iridescence:Xt,iridescenceMap:We,iridescenceThicknessMap:Re,sheen:k,sheenColorMap:fe,sheenRoughnessMap:qe,specularMap:Ze,specularColorMap:Qe,specularIntensityMap:ze,transmission:I,transmissionMap:Be,thicknessMap:dt,gradientMap:Ut,opaque:R.transparent===!1&&R.blending===Qo,alphaMap:W,alphaTest:Pe,combine:R.combine,mapUv:$e&&E(R.map.channel),aoMapUv:V&&E(R.aoMap.channel),lightMapUv:ge&&E(R.lightMap.channel),bumpMapUv:de&&E(R.bumpMap.channel),normalMapUv:Me&&E(R.normalMap.channel),displacementMapUv:me&&E(R.displacementMap.channel),emissiveMapUv:Ge&&E(R.emissiveMap.channel),metalnessMapUv:Ue&&E(R.metalnessMap.channel),roughnessMapUv:Oe&&E(R.roughnessMap.channel),anisotropyMapUv:le&&E(R.anisotropyMap.channel),clearcoatMapUv:_e&&E(R.clearcoatMap.channel),clearcoatNormalMapUv:xe&&E(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ae&&E(R.clearcoatRoughnessMap.channel),iridescenceMapUv:We&&E(R.iridescenceMap.channel),iridescenceThicknessMapUv:Re&&E(R.iridescenceThicknessMap.channel),sheenColorMapUv:fe&&E(R.sheenColorMap.channel),sheenRoughnessMapUv:qe&&E(R.sheenRoughnessMap.channel),specularMapUv:Ze&&E(R.specularMap.channel),specularColorMapUv:Qe&&E(R.specularColorMap.channel),specularIntensityMapUv:ze&&E(R.specularIntensityMap.channel),transmissionMapUv:Be&&E(R.transmissionMap.channel),thicknessMapUv:dt&&E(R.thicknessMap.channel),alphaMapUv:W&&E(R.alphaMap.channel),vertexTangents:!!$.attributes.tangent&&(Me||et),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,vertexUv1s:we,vertexUv2s:Le,vertexUv3s:Mt,pointsUvs:j.isPoints===!0&&!!$.attributes.uv&&($e||W),fog:!!Z,useFog:R.fog===!0,fogExp2:Z&&Z.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:j.isSkinnedMesh===!0,morphTargets:$.morphAttributes.position!==void 0,morphNormals:$.morphAttributes.normal!==void 0,morphColors:$.morphAttributes.color!==void 0,morphTargetsCount:te,morphTextureStride:B,numDirLights:b.directional.length,numPointLights:b.point.length,numSpotLights:b.spot.length,numSpotLightMaps:b.spotLightMap.length,numRectAreaLights:b.rectArea.length,numHemiLights:b.hemi.length,numDirLightShadows:b.directionalShadowMap.length,numPointLightShadows:b.pointShadowMap.length,numSpotLightShadows:b.spotShadowMap.length,numSpotLightShadowsWithMaps:b.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&G.length>0,shadowMapType:n.shadowMap.type,toneMapping:R.toneMapped?n.toneMapping:vr,useLegacyLights:n.useLegacyLights,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===Or,flipSided:R.side===ri,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:ie&&R.extensions.derivatives===!0,extensionFragDepth:ie&&R.extensions.fragDepth===!0,extensionDrawBuffers:ie&&R.extensions.drawBuffers===!0,extensionShaderTextureLOD:ie&&R.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:R.customProgramCacheKey()}}function g(R){const b=[];if(R.shaderID?b.push(R.shaderID):(b.push(R.customVertexShaderID),b.push(R.customFragmentShaderID)),R.defines!==void 0)for(const G in R.defines)b.push(G),b.push(R.defines[G]);return R.isRawShaderMaterial===!1&&(x(b,R),S(b,R),b.push(n.outputColorSpace)),b.push(R.customProgramCacheKey),b.join()}function x(R,b){R.push(b.precision),R.push(b.outputColorSpace),R.push(b.envMapMode),R.push(b.envMapCubeUVHeight),R.push(b.mapUv),R.push(b.alphaMapUv),R.push(b.lightMapUv),R.push(b.aoMapUv),R.push(b.bumpMapUv),R.push(b.normalMapUv),R.push(b.displacementMapUv),R.push(b.emissiveMapUv),R.push(b.metalnessMapUv),R.push(b.roughnessMapUv),R.push(b.anisotropyMapUv),R.push(b.clearcoatMapUv),R.push(b.clearcoatNormalMapUv),R.push(b.clearcoatRoughnessMapUv),R.push(b.iridescenceMapUv),R.push(b.iridescenceThicknessMapUv),R.push(b.sheenColorMapUv),R.push(b.sheenRoughnessMapUv),R.push(b.specularMapUv),R.push(b.specularColorMapUv),R.push(b.specularIntensityMapUv),R.push(b.transmissionMapUv),R.push(b.thicknessMapUv),R.push(b.combine),R.push(b.fogExp2),R.push(b.sizeAttenuation),R.push(b.morphTargetsCount),R.push(b.morphAttributeCount),R.push(b.numDirLights),R.push(b.numPointLights),R.push(b.numSpotLights),R.push(b.numSpotLightMaps),R.push(b.numHemiLights),R.push(b.numRectAreaLights),R.push(b.numDirLightShadows),R.push(b.numPointLightShadows),R.push(b.numSpotLightShadows),R.push(b.numSpotLightShadowsWithMaps),R.push(b.shadowMapType),R.push(b.toneMapping),R.push(b.numClippingPlanes),R.push(b.numClipIntersection),R.push(b.depthPacking)}function S(R,b){l.disableAll(),b.isWebGL2&&l.enable(0),b.supportsVertexTextures&&l.enable(1),b.instancing&&l.enable(2),b.instancingColor&&l.enable(3),b.matcap&&l.enable(4),b.envMap&&l.enable(5),b.normalMapObjectSpace&&l.enable(6),b.normalMapTangentSpace&&l.enable(7),b.clearcoat&&l.enable(8),b.iridescence&&l.enable(9),b.alphaTest&&l.enable(10),b.vertexColors&&l.enable(11),b.vertexAlphas&&l.enable(12),b.vertexUv1s&&l.enable(13),b.vertexUv2s&&l.enable(14),b.vertexUv3s&&l.enable(15),b.vertexTangents&&l.enable(16),b.anisotropy&&l.enable(17),R.push(l.mask),l.disableAll(),b.fog&&l.enable(0),b.useFog&&l.enable(1),b.flatShading&&l.enable(2),b.logarithmicDepthBuffer&&l.enable(3),b.skinning&&l.enable(4),b.morphTargets&&l.enable(5),b.morphNormals&&l.enable(6),b.morphColors&&l.enable(7),b.premultipliedAlpha&&l.enable(8),b.shadowMapEnabled&&l.enable(9),b.useLegacyLights&&l.enable(10),b.doubleSided&&l.enable(11),b.flipSided&&l.enable(12),b.useDepthPacking&&l.enable(13),b.dithering&&l.enable(14),b.transmission&&l.enable(15),b.sheen&&l.enable(16),b.opaque&&l.enable(17),b.pointsUvs&&l.enable(18),R.push(l.mask)}function T(R){const b=_[R.type];let G;if(b){const J=pr[b];G=p3.clone(J.uniforms)}else G=R.uniforms;return G}function A(R,b){let G;for(let J=0,j=f.length;J<j;J++){const Z=f[J];if(Z.cacheKey===b){G=Z,++G.usedTimes;break}}return G===void 0&&(G=new qU(n,b,R,s),f.push(G)),G}function P(R){if(--R.usedTimes===0){const b=f.indexOf(R);f[b]=f[f.length-1],f.pop(),R.destroy()}}function L(R){c.remove(R)}function N(){c.dispose()}return{getParameters:M,getProgramCacheKey:g,getUniforms:T,acquireProgram:A,releaseProgram:P,releaseShaderCache:L,programs:f,dispose:N}}function $U(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,l){n.get(s)[o]=l}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function eD(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function UM(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function DM(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,m,v,_,E,M){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:m,material:v,groupOrder:_,renderOrder:d.renderOrder,z:E,group:M},n[e]=g):(g.id=d.id,g.object=d,g.geometry=m,g.material=v,g.groupOrder=_,g.renderOrder=d.renderOrder,g.z=E,g.group=M),e++,g}function l(d,m,v,_,E,M){const g=o(d,m,v,_,E,M);v.transmission>0?i.push(g):v.transparent===!0?r.push(g):t.push(g)}function c(d,m,v,_,E,M){const g=o(d,m,v,_,E,M);v.transmission>0?i.unshift(g):v.transparent===!0?r.unshift(g):t.unshift(g)}function f(d,m){t.length>1&&t.sort(d||eD),i.length>1&&i.sort(m||UM),r.length>1&&r.sort(m||UM)}function h(){for(let d=e,m=n.length;d<m;d++){const v=n[d];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:l,unshift:c,finish:h,sort:f}}function tD(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new DM,n.set(i,[o])):r>=s.length?(o=new DM,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function nD(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new O,color:new Ne};break;case"SpotLight":t={position:new O,direction:new O,color:new Ne,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new O,color:new Ne,distance:0,decay:0};break;case"HemisphereLight":t={direction:new O,skyColor:new Ne,groundColor:new Ne};break;case"RectAreaLight":t={color:new Ne,position:new O,halfWidth:new O,halfHeight:new O};break}return n[e.id]=t,t}}}function iD(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let rD=0;function sD(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function oD(n,e){const t=new nD,i=iD(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)r.probe.push(new O);const s=new O,o=new ct,l=new ct;function c(h,d){let m=0,v=0,_=0;for(let G=0;G<9;G++)r.probe[G].set(0,0,0);let E=0,M=0,g=0,x=0,S=0,T=0,A=0,P=0,L=0,N=0;h.sort(sD);const R=d===!0?Math.PI:1;for(let G=0,J=h.length;G<J;G++){const j=h[G],Z=j.color,$=j.intensity,ae=j.distance,ne=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)m+=Z.r*$*R,v+=Z.g*$*R,_+=Z.b*$*R;else if(j.isLightProbe)for(let U=0;U<9;U++)r.probe[U].addScaledVector(j.sh.coefficients[U],$);else if(j.isDirectionalLight){const U=t.get(j);if(U.color.copy(j.color).multiplyScalar(j.intensity*R),j.castShadow){const H=j.shadow,z=i.get(j);z.shadowBias=H.bias,z.shadowNormalBias=H.normalBias,z.shadowRadius=H.radius,z.shadowMapSize=H.mapSize,r.directionalShadow[E]=z,r.directionalShadowMap[E]=ne,r.directionalShadowMatrix[E]=j.shadow.matrix,T++}r.directional[E]=U,E++}else if(j.isSpotLight){const U=t.get(j);U.position.setFromMatrixPosition(j.matrixWorld),U.color.copy(Z).multiplyScalar($*R),U.distance=ae,U.coneCos=Math.cos(j.angle),U.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),U.decay=j.decay,r.spot[g]=U;const H=j.shadow;if(j.map&&(r.spotLightMap[L]=j.map,L++,H.updateMatrices(j),j.castShadow&&N++),r.spotLightMatrix[g]=H.matrix,j.castShadow){const z=i.get(j);z.shadowBias=H.bias,z.shadowNormalBias=H.normalBias,z.shadowRadius=H.radius,z.shadowMapSize=H.mapSize,r.spotShadow[g]=z,r.spotShadowMap[g]=ne,P++}g++}else if(j.isRectAreaLight){const U=t.get(j);U.color.copy(Z).multiplyScalar($),U.halfWidth.set(j.width*.5,0,0),U.halfHeight.set(0,j.height*.5,0),r.rectArea[x]=U,x++}else if(j.isPointLight){const U=t.get(j);if(U.color.copy(j.color).multiplyScalar(j.intensity*R),U.distance=j.distance,U.decay=j.decay,j.castShadow){const H=j.shadow,z=i.get(j);z.shadowBias=H.bias,z.shadowNormalBias=H.normalBias,z.shadowRadius=H.radius,z.shadowMapSize=H.mapSize,z.shadowCameraNear=H.camera.near,z.shadowCameraFar=H.camera.far,r.pointShadow[M]=z,r.pointShadowMap[M]=ne,r.pointShadowMatrix[M]=j.shadow.matrix,A++}r.point[M]=U,M++}else if(j.isHemisphereLight){const U=t.get(j);U.skyColor.copy(j.color).multiplyScalar($*R),U.groundColor.copy(j.groundColor).multiplyScalar($*R),r.hemi[S]=U,S++}}x>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Te.LTC_FLOAT_1,r.rectAreaLTC2=Te.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Te.LTC_HALF_1,r.rectAreaLTC2=Te.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=m,r.ambient[1]=v,r.ambient[2]=_;const b=r.hash;(b.directionalLength!==E||b.pointLength!==M||b.spotLength!==g||b.rectAreaLength!==x||b.hemiLength!==S||b.numDirectionalShadows!==T||b.numPointShadows!==A||b.numSpotShadows!==P||b.numSpotMaps!==L)&&(r.directional.length=E,r.spot.length=g,r.rectArea.length=x,r.point.length=M,r.hemi.length=S,r.directionalShadow.length=T,r.directionalShadowMap.length=T,r.pointShadow.length=A,r.pointShadowMap.length=A,r.spotShadow.length=P,r.spotShadowMap.length=P,r.directionalShadowMatrix.length=T,r.pointShadowMatrix.length=A,r.spotLightMatrix.length=P+L-N,r.spotLightMap.length=L,r.numSpotLightShadowsWithMaps=N,b.directionalLength=E,b.pointLength=M,b.spotLength=g,b.rectAreaLength=x,b.hemiLength=S,b.numDirectionalShadows=T,b.numPointShadows=A,b.numSpotShadows=P,b.numSpotMaps=L,r.version=rD++)}function f(h,d){let m=0,v=0,_=0,E=0,M=0;const g=d.matrixWorldInverse;for(let x=0,S=h.length;x<S;x++){const T=h[x];if(T.isDirectionalLight){const A=r.directional[m];A.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(g),m++}else if(T.isSpotLight){const A=r.spot[_];A.position.setFromMatrixPosition(T.matrixWorld),A.position.applyMatrix4(g),A.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(g),_++}else if(T.isRectAreaLight){const A=r.rectArea[E];A.position.setFromMatrixPosition(T.matrixWorld),A.position.applyMatrix4(g),l.identity(),o.copy(T.matrixWorld),o.premultiply(g),l.extractRotation(o),A.halfWidth.set(T.width*.5,0,0),A.halfHeight.set(0,T.height*.5,0),A.halfWidth.applyMatrix4(l),A.halfHeight.applyMatrix4(l),E++}else if(T.isPointLight){const A=r.point[v];A.position.setFromMatrixPosition(T.matrixWorld),A.position.applyMatrix4(g),v++}else if(T.isHemisphereLight){const A=r.hemi[M];A.direction.setFromMatrixPosition(T.matrixWorld),A.direction.transformDirection(g),M++}}}return{setup:c,setupView:f,state:r}}function OM(n,e){const t=new oD(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(d){i.push(d)}function l(d){r.push(d)}function c(d){t.setup(i,d)}function f(d){t.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:c,setupLightsView:f,pushLight:o,pushShadow:l}}function aD(n,e){let t=new WeakMap;function i(s,o=0){const l=t.get(s);let c;return l===void 0?(c=new OM(n,e),t.set(s,[c])):o>=l.length?(c=new OM(n,e),l.push(c)):c=l[o],c}function r(){t=new WeakMap}return{get:i,dispose:r}}class by extends kn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=QT,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ly extends kn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const lD=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,uD=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function cD(n,e,t){let i=new Yp;const r=new pe,s=new pe,o=new It,l=new by({depthPacking:$T}),c=new Ly,f={},h=t.maxTextureSize,d={[gs]:ri,[ri]:gs,[Or]:Or},m=new Ui({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pe},radius:{value:4}},vertexShader:lD,fragmentShader:uD}),v=m.clone();v.defines.HORIZONTAL_PASS=1;const _=new ht;_.setAttribute("position",new Ft(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new Dn(_,m),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Vp;let g=this.type;this.render=function(A,P,L){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||A.length===0)return;const N=n.getRenderTarget(),R=n.getActiveCubeFace(),b=n.getActiveMipmapLevel(),G=n.state;G.setBlending(fs),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);const J=g!==fr&&this.type===fr,j=g===fr&&this.type!==fr;for(let Z=0,$=A.length;Z<$;Z++){const ae=A[Z],ne=ae.shadow;if(ne===void 0){console.warn("THREE.WebGLShadowMap:",ae,"has no shadow.");continue}if(ne.autoUpdate===!1&&ne.needsUpdate===!1)continue;r.copy(ne.mapSize);const U=ne.getFrameExtents();if(r.multiply(U),s.copy(ne.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/U.x),r.x=s.x*U.x,ne.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/U.y),r.y=s.y*U.y,ne.mapSize.y=s.y)),ne.map===null||J===!0||j===!0){const z=this.type!==fr?{minFilter:cn,magFilter:cn}:{};ne.map!==null&&ne.map.dispose(),ne.map=new xr(r.x,r.y,z),ne.map.texture.name=ae.name+".shadowMap",ne.camera.updateProjectionMatrix()}n.setRenderTarget(ne.map),n.clear();const H=ne.getViewportCount();for(let z=0;z<H;z++){const te=ne.getViewport(z);o.set(s.x*te.x,s.y*te.y,s.x*te.z,s.y*te.w),G.viewport(o),ne.updateMatrices(ae,z),i=ne.getFrustum(),T(P,L,ne.camera,ae,this.type)}ne.isPointLightShadow!==!0&&this.type===fr&&x(ne,L),ne.needsUpdate=!1}g=this.type,M.needsUpdate=!1,n.setRenderTarget(N,R,b)};function x(A,P){const L=e.update(E);m.defines.VSM_SAMPLES!==A.blurSamples&&(m.defines.VSM_SAMPLES=A.blurSamples,v.defines.VSM_SAMPLES=A.blurSamples,m.needsUpdate=!0,v.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new xr(r.x,r.y)),m.uniforms.shadow_pass.value=A.map.texture,m.uniforms.resolution.value=A.mapSize,m.uniforms.radius.value=A.radius,n.setRenderTarget(A.mapPass),n.clear(),n.renderBufferDirect(P,null,L,m,E,null),v.uniforms.shadow_pass.value=A.mapPass.texture,v.uniforms.resolution.value=A.mapSize,v.uniforms.radius.value=A.radius,n.setRenderTarget(A.map),n.clear(),n.renderBufferDirect(P,null,L,v,E,null)}function S(A,P,L,N){let R=null;const b=L.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(b!==void 0)R=b;else if(R=L.isPointLight===!0?c:l,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const G=R.uuid,J=P.uuid;let j=f[G];j===void 0&&(j={},f[G]=j);let Z=j[J];Z===void 0&&(Z=R.clone(),j[J]=Z),R=Z}if(R.visible=P.visible,R.wireframe=P.wireframe,N===fr?R.side=P.shadowSide!==null?P.shadowSide:P.side:R.side=P.shadowSide!==null?P.shadowSide:d[P.side],R.alphaMap=P.alphaMap,R.alphaTest=P.alphaTest,R.map=P.map,R.clipShadows=P.clipShadows,R.clippingPlanes=P.clippingPlanes,R.clipIntersection=P.clipIntersection,R.displacementMap=P.displacementMap,R.displacementScale=P.displacementScale,R.displacementBias=P.displacementBias,R.wireframeLinewidth=P.wireframeLinewidth,R.linewidth=P.linewidth,L.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const G=n.properties.get(R);G.light=L}return R}function T(A,P,L,N,R){if(A.visible===!1)return;if(A.layers.test(P.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&R===fr)&&(!A.frustumCulled||i.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,A.matrixWorld);const J=e.update(A),j=A.material;if(Array.isArray(j)){const Z=J.groups;for(let $=0,ae=Z.length;$<ae;$++){const ne=Z[$],U=j[ne.materialIndex];if(U&&U.visible){const H=S(A,U,N,R);n.renderBufferDirect(L,null,J,H,A,ne)}}}else if(j.visible){const Z=S(A,j,N,R);n.renderBufferDirect(L,null,J,Z,A,null)}}const G=A.children;for(let J=0,j=G.length;J<j;J++)T(G[J],P,L,N,R)}}function fD(n,e,t){const i=t.isWebGL2;function r(){let W=!1;const Pe=new It;let ie=null;const we=new It(0,0,0,0);return{setMask:function(Le){ie!==Le&&!W&&(n.colorMask(Le,Le,Le,Le),ie=Le)},setLocked:function(Le){W=Le},setClear:function(Le,Mt,zt,$t,wr){wr===!0&&(Le*=$t,Mt*=$t,zt*=$t),Pe.set(Le,Mt,zt,$t),we.equals(Pe)===!1&&(n.clearColor(Le,Mt,zt,$t),we.copy(Pe))},reset:function(){W=!1,ie=null,we.set(-1,0,0,0)}}}function s(){let W=!1,Pe=null,ie=null,we=null;return{setTest:function(Le){Le?Ce(n.DEPTH_TEST):ot(n.DEPTH_TEST)},setMask:function(Le){Pe!==Le&&!W&&(n.depthMask(Le),Pe=Le)},setFunc:function(Le){if(ie!==Le){switch(Le){case AT:n.depthFunc(n.NEVER);break;case RT:n.depthFunc(n.ALWAYS);break;case PT:n.depthFunc(n.LESS);break;case mp:n.depthFunc(n.LEQUAL);break;case bT:n.depthFunc(n.EQUAL);break;case LT:n.depthFunc(n.GEQUAL);break;case IT:n.depthFunc(n.GREATER);break;case NT:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ie=Le}},setLocked:function(Le){W=Le},setClear:function(Le){we!==Le&&(n.clearDepth(Le),we=Le)},reset:function(){W=!1,Pe=null,ie=null,we=null}}}function o(){let W=!1,Pe=null,ie=null,we=null,Le=null,Mt=null,zt=null,$t=null,wr=null;return{setTest:function(Bt){W||(Bt?Ce(n.STENCIL_TEST):ot(n.STENCIL_TEST))},setMask:function(Bt){Pe!==Bt&&!W&&(n.stencilMask(Bt),Pe=Bt)},setFunc:function(Bt,xi,In){(ie!==Bt||we!==xi||Le!==In)&&(n.stencilFunc(Bt,xi,In),ie=Bt,we=xi,Le=In)},setOp:function(Bt,xi,In){(Mt!==Bt||zt!==xi||$t!==In)&&(n.stencilOp(Bt,xi,In),Mt=Bt,zt=xi,$t=In)},setLocked:function(Bt){W=Bt},setClear:function(Bt){wr!==Bt&&(n.clearStencil(Bt),wr=Bt)},reset:function(){W=!1,Pe=null,ie=null,we=null,Le=null,Mt=null,zt=null,$t=null,wr=null}}}const l=new r,c=new s,f=new o,h=new WeakMap,d=new WeakMap;let m={},v={},_=new WeakMap,E=[],M=null,g=!1,x=null,S=null,T=null,A=null,P=null,L=null,N=null,R=!1,b=null,G=null,J=null,j=null,Z=null;const $=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ae=!1,ne=0;const U=n.getParameter(n.VERSION);U.indexOf("WebGL")!==-1?(ne=parseFloat(/^WebGL (\d)/.exec(U)[1]),ae=ne>=1):U.indexOf("OpenGL ES")!==-1&&(ne=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),ae=ne>=2);let H=null,z={};const te=n.getParameter(n.SCISSOR_BOX),B=n.getParameter(n.VIEWPORT),he=new It().fromArray(te),se=new It().fromArray(B);function Ee(W,Pe,ie,we){const Le=new Uint8Array(4),Mt=n.createTexture();n.bindTexture(W,Mt),n.texParameteri(W,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(W,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let zt=0;zt<ie;zt++)i&&(W===n.TEXTURE_3D||W===n.TEXTURE_2D_ARRAY)?n.texImage3D(Pe,0,n.RGBA,1,1,we,0,n.RGBA,n.UNSIGNED_BYTE,Le):n.texImage2D(Pe+zt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Le);return Mt}const ve={};ve[n.TEXTURE_2D]=Ee(n.TEXTURE_2D,n.TEXTURE_2D,1),ve[n.TEXTURE_CUBE_MAP]=Ee(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(ve[n.TEXTURE_2D_ARRAY]=Ee(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ve[n.TEXTURE_3D]=Ee(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),l.setClear(0,0,0,1),c.setClear(1),f.setClear(0),Ce(n.DEPTH_TEST),c.setFunc(mp),me(!1),Ge(Tv),Ce(n.CULL_FACE),de(fs);function Ce(W){m[W]!==!0&&(n.enable(W),m[W]=!0)}function ot(W){m[W]!==!1&&(n.disable(W),m[W]=!1)}function $e(W,Pe){return v[W]!==Pe?(n.bindFramebuffer(W,Pe),v[W]=Pe,i&&(W===n.DRAW_FRAMEBUFFER&&(v[n.FRAMEBUFFER]=Pe),W===n.FRAMEBUFFER&&(v[n.DRAW_FRAMEBUFFER]=Pe)),!0):!1}function Et(W,Pe){let ie=E,we=!1;if(W)if(ie=_.get(Pe),ie===void 0&&(ie=[],_.set(Pe,ie)),W.isWebGLMultipleRenderTargets){const Le=W.texture;if(ie.length!==Le.length||ie[0]!==n.COLOR_ATTACHMENT0){for(let Mt=0,zt=Le.length;Mt<zt;Mt++)ie[Mt]=n.COLOR_ATTACHMENT0+Mt;ie.length=Le.length,we=!0}}else ie[0]!==n.COLOR_ATTACHMENT0&&(ie[0]=n.COLOR_ATTACHMENT0,we=!0);else ie[0]!==n.BACK&&(ie[0]=n.BACK,we=!0);we&&(t.isWebGL2?n.drawBuffers(ie):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ie))}function Ye(W){return M!==W?(n.useProgram(W),M=W,!0):!1}const V={[Bo]:n.FUNC_ADD,[gT]:n.FUNC_SUBTRACT,[vT]:n.FUNC_REVERSE_SUBTRACT};if(i)V[Rv]=n.MIN,V[Pv]=n.MAX;else{const W=e.get("EXT_blend_minmax");W!==null&&(V[Rv]=W.MIN_EXT,V[Pv]=W.MAX_EXT)}const ge={[yT]:n.ZERO,[_T]:n.ONE,[xT]:n.SRC_COLOR,[fy]:n.SRC_ALPHA,[CT]:n.SRC_ALPHA_SATURATE,[wT]:n.DST_COLOR,[MT]:n.DST_ALPHA,[ST]:n.ONE_MINUS_SRC_COLOR,[hy]:n.ONE_MINUS_SRC_ALPHA,[TT]:n.ONE_MINUS_DST_COLOR,[ET]:n.ONE_MINUS_DST_ALPHA};function de(W,Pe,ie,we,Le,Mt,zt,$t){if(W===fs){g===!0&&(ot(n.BLEND),g=!1);return}if(g===!1&&(Ce(n.BLEND),g=!0),W!==mT){if(W!==x||$t!==R){if((S!==Bo||P!==Bo)&&(n.blendEquation(n.FUNC_ADD),S=Bo,P=Bo),$t)switch(W){case Qo:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Al:n.blendFunc(n.ONE,n.ONE);break;case Cv:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Av:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",W);break}else switch(W){case Qo:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Al:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Cv:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Av:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",W);break}T=null,A=null,L=null,N=null,x=W,R=$t}return}Le=Le||Pe,Mt=Mt||ie,zt=zt||we,(Pe!==S||Le!==P)&&(n.blendEquationSeparate(V[Pe],V[Le]),S=Pe,P=Le),(ie!==T||we!==A||Mt!==L||zt!==N)&&(n.blendFuncSeparate(ge[ie],ge[we],ge[Mt],ge[zt]),T=ie,A=we,L=Mt,N=zt),x=W,R=!1}function Me(W,Pe){W.side===Or?ot(n.CULL_FACE):Ce(n.CULL_FACE);let ie=W.side===ri;Pe&&(ie=!ie),me(ie),W.blending===Qo&&W.transparent===!1?de(fs):de(W.blending,W.blendEquation,W.blendSrc,W.blendDst,W.blendEquationAlpha,W.blendSrcAlpha,W.blendDstAlpha,W.premultipliedAlpha),c.setFunc(W.depthFunc),c.setTest(W.depthTest),c.setMask(W.depthWrite),l.setMask(W.colorWrite);const we=W.stencilWrite;f.setTest(we),we&&(f.setMask(W.stencilWriteMask),f.setFunc(W.stencilFunc,W.stencilRef,W.stencilFuncMask),f.setOp(W.stencilFail,W.stencilZFail,W.stencilZPass)),Oe(W.polygonOffset,W.polygonOffsetFactor,W.polygonOffsetUnits),W.alphaToCoverage===!0?Ce(n.SAMPLE_ALPHA_TO_COVERAGE):ot(n.SAMPLE_ALPHA_TO_COVERAGE)}function me(W){b!==W&&(W?n.frontFace(n.CW):n.frontFace(n.CCW),b=W)}function Ge(W){W!==hT?(Ce(n.CULL_FACE),W!==G&&(W===Tv?n.cullFace(n.BACK):W===dT?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ot(n.CULL_FACE),G=W}function Ue(W){W!==J&&(ae&&n.lineWidth(W),J=W)}function Oe(W,Pe,ie){W?(Ce(n.POLYGON_OFFSET_FILL),(j!==Pe||Z!==ie)&&(n.polygonOffset(Pe,ie),j=Pe,Z=ie)):ot(n.POLYGON_OFFSET_FILL)}function et(W){W?Ce(n.SCISSOR_TEST):ot(n.SCISSOR_TEST)}function xt(W){W===void 0&&(W=n.TEXTURE0+$-1),H!==W&&(n.activeTexture(W),H=W)}function Xt(W,Pe,ie){ie===void 0&&(H===null?ie=n.TEXTURE0+$-1:ie=H);let we=z[ie];we===void 0&&(we={type:void 0,texture:void 0},z[ie]=we),(we.type!==W||we.texture!==Pe)&&(H!==ie&&(n.activeTexture(ie),H=ie),n.bindTexture(W,Pe||ve[W]),we.type=W,we.texture=Pe)}function k(){const W=z[H];W!==void 0&&W.type!==void 0&&(n.bindTexture(W.type,null),W.type=void 0,W.texture=void 0)}function I(){try{n.compressedTexImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function le(){try{n.compressedTexImage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function _e(){try{n.texSubImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function xe(){try{n.texSubImage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Ae(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function We(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Re(){try{n.texStorage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function fe(){try{n.texStorage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function qe(){try{n.texImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Ze(){try{n.texImage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Qe(W){he.equals(W)===!1&&(n.scissor(W.x,W.y,W.z,W.w),he.copy(W))}function ze(W){se.equals(W)===!1&&(n.viewport(W.x,W.y,W.z,W.w),se.copy(W))}function Be(W,Pe){let ie=d.get(Pe);ie===void 0&&(ie=new WeakMap,d.set(Pe,ie));let we=ie.get(W);we===void 0&&(we=n.getUniformBlockIndex(Pe,W.name),ie.set(W,we))}function dt(W,Pe){const we=d.get(Pe).get(W);h.get(Pe)!==we&&(n.uniformBlockBinding(Pe,we,W.__bindingPointIndex),h.set(Pe,we))}function Ut(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},H=null,z={},v={},_=new WeakMap,E=[],M=null,g=!1,x=null,S=null,T=null,A=null,P=null,L=null,N=null,R=!1,b=null,G=null,J=null,j=null,Z=null,he.set(0,0,n.canvas.width,n.canvas.height),se.set(0,0,n.canvas.width,n.canvas.height),l.reset(),c.reset(),f.reset()}return{buffers:{color:l,depth:c,stencil:f},enable:Ce,disable:ot,bindFramebuffer:$e,drawBuffers:Et,useProgram:Ye,setBlending:de,setMaterial:Me,setFlipSided:me,setCullFace:Ge,setLineWidth:Ue,setPolygonOffset:Oe,setScissorTest:et,activeTexture:xt,bindTexture:Xt,unbindTexture:k,compressedTexImage2D:I,compressedTexImage3D:le,texImage2D:qe,texImage3D:Ze,updateUBOMapping:Be,uniformBlockBinding:dt,texStorage2D:Re,texStorage3D:fe,texSubImage2D:_e,texSubImage3D:xe,compressedTexSubImage2D:Ae,compressedTexSubImage3D:We,scissor:Qe,viewport:ze,reset:Ut}}function hD(n,e,t,i,r,s,o){const l=r.isWebGL2,c=r.maxTextures,f=r.maxCubemapSize,h=r.maxTextureSize,d=r.maxSamples,m=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),_=new WeakMap;let E;const M=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(k,I){return g?new OffscreenCanvas(k,I):Oc("canvas")}function S(k,I,le,_e){let xe=1;if((k.width>_e||k.height>_e)&&(xe=_e/Math.max(k.width,k.height)),xe<1||I===!0)if(typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&k instanceof ImageBitmap){const Ae=I?yp:Math.floor,We=Ae(xe*k.width),Re=Ae(xe*k.height);E===void 0&&(E=x(We,Re));const fe=le?x(We,Re):E;return fe.width=We,fe.height=Re,fe.getContext("2d").drawImage(k,0,0,We,Re),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+k.width+"x"+k.height+") to ("+We+"x"+Re+")."),fe}else return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+k.width+"x"+k.height+")."),k;return k}function T(k){return e1(k.width)&&e1(k.height)}function A(k){return l?!1:k.wrapS!==Jn||k.wrapT!==Jn||k.minFilter!==cn&&k.minFilter!==hn}function P(k,I){return k.generateMipmaps&&I&&k.minFilter!==cn&&k.minFilter!==hn}function L(k){n.generateMipmap(k)}function N(k,I,le,_e,xe=!1){if(l===!1)return I;if(k!==null){if(n[k]!==void 0)return n[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let Ae=I;return I===n.RED&&(le===n.FLOAT&&(Ae=n.R32F),le===n.HALF_FLOAT&&(Ae=n.R16F),le===n.UNSIGNED_BYTE&&(Ae=n.R8)),I===n.RG&&(le===n.FLOAT&&(Ae=n.RG32F),le===n.HALF_FLOAT&&(Ae=n.RG16F),le===n.UNSIGNED_BYTE&&(Ae=n.RG8)),I===n.RGBA&&(le===n.FLOAT&&(Ae=n.RGBA32F),le===n.HALF_FLOAT&&(Ae=n.RGBA16F),le===n.UNSIGNED_BYTE&&(Ae=_e===ft&&xe===!1?n.SRGB8_ALPHA8:n.RGBA8),le===n.UNSIGNED_SHORT_4_4_4_4&&(Ae=n.RGBA4),le===n.UNSIGNED_SHORT_5_5_5_1&&(Ae=n.RGB5_A1)),(Ae===n.R16F||Ae===n.R32F||Ae===n.RG16F||Ae===n.RG32F||Ae===n.RGBA16F||Ae===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ae}function R(k,I,le){return P(k,le)===!0||k.isFramebufferTexture&&k.minFilter!==cn&&k.minFilter!==hn?Math.log2(Math.max(I.width,I.height))+1:k.mipmaps!==void 0&&k.mipmaps.length>0?k.mipmaps.length:k.isCompressedTexture&&Array.isArray(k.image)?I.mipmaps.length:1}function b(k){return k===cn||k===gp||k===ic?n.NEAREST:n.LINEAR}function G(k){const I=k.target;I.removeEventListener("dispose",G),j(I),I.isVideoTexture&&_.delete(I)}function J(k){const I=k.target;I.removeEventListener("dispose",J),$(I)}function j(k){const I=i.get(k);if(I.__webglInit===void 0)return;const le=k.source,_e=M.get(le);if(_e){const xe=_e[I.__cacheKey];xe.usedTimes--,xe.usedTimes===0&&Z(k),Object.keys(_e).length===0&&M.delete(le)}i.remove(k)}function Z(k){const I=i.get(k);n.deleteTexture(I.__webglTexture);const le=k.source,_e=M.get(le);delete _e[I.__cacheKey],o.memory.textures--}function $(k){const I=k.texture,le=i.get(k),_e=i.get(I);if(_e.__webglTexture!==void 0&&(n.deleteTexture(_e.__webglTexture),o.memory.textures--),k.depthTexture&&k.depthTexture.dispose(),k.isWebGLCubeRenderTarget)for(let xe=0;xe<6;xe++)n.deleteFramebuffer(le.__webglFramebuffer[xe]),le.__webglDepthbuffer&&n.deleteRenderbuffer(le.__webglDepthbuffer[xe]);else{if(n.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&n.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&n.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let xe=0;xe<le.__webglColorRenderbuffer.length;xe++)le.__webglColorRenderbuffer[xe]&&n.deleteRenderbuffer(le.__webglColorRenderbuffer[xe]);le.__webglDepthRenderbuffer&&n.deleteRenderbuffer(le.__webglDepthRenderbuffer)}if(k.isWebGLMultipleRenderTargets)for(let xe=0,Ae=I.length;xe<Ae;xe++){const We=i.get(I[xe]);We.__webglTexture&&(n.deleteTexture(We.__webglTexture),o.memory.textures--),i.remove(I[xe])}i.remove(I),i.remove(k)}let ae=0;function ne(){ae=0}function U(){const k=ae;return k>=c&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+c),ae+=1,k}function H(k){const I=[];return I.push(k.wrapS),I.push(k.wrapT),I.push(k.wrapR||0),I.push(k.magFilter),I.push(k.minFilter),I.push(k.anisotropy),I.push(k.internalFormat),I.push(k.format),I.push(k.type),I.push(k.generateMipmaps),I.push(k.premultiplyAlpha),I.push(k.flipY),I.push(k.unpackAlignment),I.push(k.colorSpace),I.join()}function z(k,I){const le=i.get(k);if(k.isVideoTexture&&xt(k),k.isRenderTargetTexture===!1&&k.version>0&&le.__version!==k.version){const _e=k.image;if(_e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{$e(le,k,I);return}}t.bindTexture(n.TEXTURE_2D,le.__webglTexture,n.TEXTURE0+I)}function te(k,I){const le=i.get(k);if(k.version>0&&le.__version!==k.version){$e(le,k,I);return}t.bindTexture(n.TEXTURE_2D_ARRAY,le.__webglTexture,n.TEXTURE0+I)}function B(k,I){const le=i.get(k);if(k.version>0&&le.__version!==k.version){$e(le,k,I);return}t.bindTexture(n.TEXTURE_3D,le.__webglTexture,n.TEXTURE0+I)}function he(k,I){const le=i.get(k);if(k.version>0&&le.__version!==k.version){Et(le,k,I);return}t.bindTexture(n.TEXTURE_CUBE_MAP,le.__webglTexture,n.TEXTURE0+I)}const se={[Pc]:n.REPEAT,[Jn]:n.CLAMP_TO_EDGE,[bc]:n.MIRRORED_REPEAT},Ee={[cn]:n.NEAREST,[gp]:n.NEAREST_MIPMAP_NEAREST,[ic]:n.NEAREST_MIPMAP_LINEAR,[hn]:n.LINEAR,[py]:n.LINEAR_MIPMAP_NEAREST,[lo]:n.LINEAR_MIPMAP_LINEAR},ve={[n3]:n.NEVER,[u3]:n.ALWAYS,[i3]:n.LESS,[s3]:n.LEQUAL,[r3]:n.EQUAL,[l3]:n.GEQUAL,[o3]:n.GREATER,[a3]:n.NOTEQUAL};function Ce(k,I,le){if(le?(n.texParameteri(k,n.TEXTURE_WRAP_S,se[I.wrapS]),n.texParameteri(k,n.TEXTURE_WRAP_T,se[I.wrapT]),(k===n.TEXTURE_3D||k===n.TEXTURE_2D_ARRAY)&&n.texParameteri(k,n.TEXTURE_WRAP_R,se[I.wrapR]),n.texParameteri(k,n.TEXTURE_MAG_FILTER,Ee[I.magFilter]),n.texParameteri(k,n.TEXTURE_MIN_FILTER,Ee[I.minFilter])):(n.texParameteri(k,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(k,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(k===n.TEXTURE_3D||k===n.TEXTURE_2D_ARRAY)&&n.texParameteri(k,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(I.wrapS!==Jn||I.wrapT!==Jn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(k,n.TEXTURE_MAG_FILTER,b(I.magFilter)),n.texParameteri(k,n.TEXTURE_MIN_FILTER,b(I.minFilter)),I.minFilter!==cn&&I.minFilter!==hn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),I.compareFunction&&(n.texParameteri(k,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(k,n.TEXTURE_COMPARE_FUNC,ve[I.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const _e=e.get("EXT_texture_filter_anisotropic");if(I.magFilter===cn||I.minFilter!==ic&&I.minFilter!==lo||I.type===Fr&&e.has("OES_texture_float_linear")===!1||l===!1&&I.type===Fl&&e.has("OES_texture_half_float_linear")===!1)return;(I.anisotropy>1||i.get(I).__currentAnisotropy)&&(n.texParameterf(k,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,r.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy)}}function ot(k,I){let le=!1;k.__webglInit===void 0&&(k.__webglInit=!0,I.addEventListener("dispose",G));const _e=I.source;let xe=M.get(_e);xe===void 0&&(xe={},M.set(_e,xe));const Ae=H(I);if(Ae!==k.__cacheKey){xe[Ae]===void 0&&(xe[Ae]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,le=!0),xe[Ae].usedTimes++;const We=xe[k.__cacheKey];We!==void 0&&(xe[k.__cacheKey].usedTimes--,We.usedTimes===0&&Z(I)),k.__cacheKey=Ae,k.__webglTexture=xe[Ae].texture}return le}function $e(k,I,le){let _e=n.TEXTURE_2D;(I.isDataArrayTexture||I.isCompressedArrayTexture)&&(_e=n.TEXTURE_2D_ARRAY),I.isData3DTexture&&(_e=n.TEXTURE_3D);const xe=ot(k,I),Ae=I.source;t.bindTexture(_e,k.__webglTexture,n.TEXTURE0+le);const We=i.get(Ae);if(Ae.version!==We.__version||xe===!0){t.activeTexture(n.TEXTURE0+le),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Re=A(I)&&T(I.image)===!1;let fe=S(I.image,Re,!1,h);fe=Xt(I,fe);const qe=T(fe)||l,Ze=s.convert(I.format,I.colorSpace);let Qe=s.convert(I.type),ze=N(I.internalFormat,Ze,Qe,I.colorSpace);Ce(_e,I,qe);let Be;const dt=I.mipmaps,Ut=l&&I.isVideoTexture!==!0,W=We.__version===void 0||xe===!0,Pe=R(I,fe,qe);if(I.isDepthTexture)ze=n.DEPTH_COMPONENT,l?I.type===Fr?ze=n.DEPTH_COMPONENT32F:I.type===us?ze=n.DEPTH_COMPONENT24:I.type===eo?ze=n.DEPTH24_STENCIL8:ze=n.DEPTH_COMPONENT16:I.type===Fr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),I.format===to&&ze===n.DEPTH_COMPONENT&&I.type!==Wp&&I.type!==us&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),I.type=us,Qe=s.convert(I.type)),I.format===aa&&ze===n.DEPTH_COMPONENT&&(ze=n.DEPTH_STENCIL,I.type!==eo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),I.type=eo,Qe=s.convert(I.type))),W&&(Ut?t.texStorage2D(n.TEXTURE_2D,1,ze,fe.width,fe.height):t.texImage2D(n.TEXTURE_2D,0,ze,fe.width,fe.height,0,Ze,Qe,null));else if(I.isDataTexture)if(dt.length>0&&qe){Ut&&W&&t.texStorage2D(n.TEXTURE_2D,Pe,ze,dt[0].width,dt[0].height);for(let ie=0,we=dt.length;ie<we;ie++)Be=dt[ie],Ut?t.texSubImage2D(n.TEXTURE_2D,ie,0,0,Be.width,Be.height,Ze,Qe,Be.data):t.texImage2D(n.TEXTURE_2D,ie,ze,Be.width,Be.height,0,Ze,Qe,Be.data);I.generateMipmaps=!1}else Ut?(W&&t.texStorage2D(n.TEXTURE_2D,Pe,ze,fe.width,fe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,fe.width,fe.height,Ze,Qe,fe.data)):t.texImage2D(n.TEXTURE_2D,0,ze,fe.width,fe.height,0,Ze,Qe,fe.data);else if(I.isCompressedTexture)if(I.isCompressedArrayTexture){Ut&&W&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Pe,ze,dt[0].width,dt[0].height,fe.depth);for(let ie=0,we=dt.length;ie<we;ie++)Be=dt[ie],I.format!==pi?Ze!==null?Ut?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ie,0,0,0,Be.width,Be.height,fe.depth,Ze,Be.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ie,ze,Be.width,Be.height,fe.depth,0,Be.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ut?t.texSubImage3D(n.TEXTURE_2D_ARRAY,ie,0,0,0,Be.width,Be.height,fe.depth,Ze,Qe,Be.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ie,ze,Be.width,Be.height,fe.depth,0,Ze,Qe,Be.data)}else{Ut&&W&&t.texStorage2D(n.TEXTURE_2D,Pe,ze,dt[0].width,dt[0].height);for(let ie=0,we=dt.length;ie<we;ie++)Be=dt[ie],I.format!==pi?Ze!==null?Ut?t.compressedTexSubImage2D(n.TEXTURE_2D,ie,0,0,Be.width,Be.height,Ze,Be.data):t.compressedTexImage2D(n.TEXTURE_2D,ie,ze,Be.width,Be.height,0,Be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ut?t.texSubImage2D(n.TEXTURE_2D,ie,0,0,Be.width,Be.height,Ze,Qe,Be.data):t.texImage2D(n.TEXTURE_2D,ie,ze,Be.width,Be.height,0,Ze,Qe,Be.data)}else if(I.isDataArrayTexture)Ut?(W&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Pe,ze,fe.width,fe.height,fe.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,fe.width,fe.height,fe.depth,Ze,Qe,fe.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,ze,fe.width,fe.height,fe.depth,0,Ze,Qe,fe.data);else if(I.isData3DTexture)Ut?(W&&t.texStorage3D(n.TEXTURE_3D,Pe,ze,fe.width,fe.height,fe.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,fe.width,fe.height,fe.depth,Ze,Qe,fe.data)):t.texImage3D(n.TEXTURE_3D,0,ze,fe.width,fe.height,fe.depth,0,Ze,Qe,fe.data);else if(I.isFramebufferTexture){if(W)if(Ut)t.texStorage2D(n.TEXTURE_2D,Pe,ze,fe.width,fe.height);else{let ie=fe.width,we=fe.height;for(let Le=0;Le<Pe;Le++)t.texImage2D(n.TEXTURE_2D,Le,ze,ie,we,0,Ze,Qe,null),ie>>=1,we>>=1}}else if(dt.length>0&&qe){Ut&&W&&t.texStorage2D(n.TEXTURE_2D,Pe,ze,dt[0].width,dt[0].height);for(let ie=0,we=dt.length;ie<we;ie++)Be=dt[ie],Ut?t.texSubImage2D(n.TEXTURE_2D,ie,0,0,Ze,Qe,Be):t.texImage2D(n.TEXTURE_2D,ie,ze,Ze,Qe,Be);I.generateMipmaps=!1}else Ut?(W&&t.texStorage2D(n.TEXTURE_2D,Pe,ze,fe.width,fe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ze,Qe,fe)):t.texImage2D(n.TEXTURE_2D,0,ze,Ze,Qe,fe);P(I,qe)&&L(_e),We.__version=Ae.version,I.onUpdate&&I.onUpdate(I)}k.__version=I.version}function Et(k,I,le){if(I.image.length!==6)return;const _e=ot(k,I),xe=I.source;t.bindTexture(n.TEXTURE_CUBE_MAP,k.__webglTexture,n.TEXTURE0+le);const Ae=i.get(xe);if(xe.version!==Ae.__version||_e===!0){t.activeTexture(n.TEXTURE0+le),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const We=I.isCompressedTexture||I.image[0].isCompressedTexture,Re=I.image[0]&&I.image[0].isDataTexture,fe=[];for(let ie=0;ie<6;ie++)!We&&!Re?fe[ie]=S(I.image[ie],!1,!0,f):fe[ie]=Re?I.image[ie].image:I.image[ie],fe[ie]=Xt(I,fe[ie]);const qe=fe[0],Ze=T(qe)||l,Qe=s.convert(I.format,I.colorSpace),ze=s.convert(I.type),Be=N(I.internalFormat,Qe,ze,I.colorSpace),dt=l&&I.isVideoTexture!==!0,Ut=Ae.__version===void 0||_e===!0;let W=R(I,qe,Ze);Ce(n.TEXTURE_CUBE_MAP,I,Ze);let Pe;if(We){dt&&Ut&&t.texStorage2D(n.TEXTURE_CUBE_MAP,W,Be,qe.width,qe.height);for(let ie=0;ie<6;ie++){Pe=fe[ie].mipmaps;for(let we=0;we<Pe.length;we++){const Le=Pe[we];I.format!==pi?Qe!==null?dt?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we,0,0,Le.width,Le.height,Qe,Le.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we,Be,Le.width,Le.height,0,Le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):dt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we,0,0,Le.width,Le.height,Qe,ze,Le.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we,Be,Le.width,Le.height,0,Qe,ze,Le.data)}}}else{Pe=I.mipmaps,dt&&Ut&&(Pe.length>0&&W++,t.texStorage2D(n.TEXTURE_CUBE_MAP,W,Be,fe[0].width,fe[0].height));for(let ie=0;ie<6;ie++)if(Re){dt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,0,0,fe[ie].width,fe[ie].height,Qe,ze,fe[ie].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,Be,fe[ie].width,fe[ie].height,0,Qe,ze,fe[ie].data);for(let we=0;we<Pe.length;we++){const Mt=Pe[we].image[ie].image;dt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we+1,0,0,Mt.width,Mt.height,Qe,ze,Mt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we+1,Be,Mt.width,Mt.height,0,Qe,ze,Mt.data)}}else{dt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,0,0,Qe,ze,fe[ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,Be,Qe,ze,fe[ie]);for(let we=0;we<Pe.length;we++){const Le=Pe[we];dt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we+1,0,0,Qe,ze,Le.image[ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,we+1,Be,Qe,ze,Le.image[ie])}}}P(I,Ze)&&L(n.TEXTURE_CUBE_MAP),Ae.__version=xe.version,I.onUpdate&&I.onUpdate(I)}k.__version=I.version}function Ye(k,I,le,_e,xe){const Ae=s.convert(le.format,le.colorSpace),We=s.convert(le.type),Re=N(le.internalFormat,Ae,We,le.colorSpace);i.get(I).__hasExternalTextures||(xe===n.TEXTURE_3D||xe===n.TEXTURE_2D_ARRAY?t.texImage3D(xe,0,Re,I.width,I.height,I.depth,0,Ae,We,null):t.texImage2D(xe,0,Re,I.width,I.height,0,Ae,We,null)),t.bindFramebuffer(n.FRAMEBUFFER,k),et(I)?m.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,_e,xe,i.get(le).__webglTexture,0,Oe(I)):(xe===n.TEXTURE_2D||xe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&xe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,_e,xe,i.get(le).__webglTexture,0),t.bindFramebuffer(n.FRAMEBUFFER,null)}function V(k,I,le){if(n.bindRenderbuffer(n.RENDERBUFFER,k),I.depthBuffer&&!I.stencilBuffer){let _e=n.DEPTH_COMPONENT16;if(le||et(I)){const xe=I.depthTexture;xe&&xe.isDepthTexture&&(xe.type===Fr?_e=n.DEPTH_COMPONENT32F:xe.type===us&&(_e=n.DEPTH_COMPONENT24));const Ae=Oe(I);et(I)?m.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ae,_e,I.width,I.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Ae,_e,I.width,I.height)}else n.renderbufferStorage(n.RENDERBUFFER,_e,I.width,I.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,k)}else if(I.depthBuffer&&I.stencilBuffer){const _e=Oe(I);le&&et(I)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,_e,n.DEPTH24_STENCIL8,I.width,I.height):et(I)?m.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_e,n.DEPTH24_STENCIL8,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,I.width,I.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,k)}else{const _e=I.isWebGLMultipleRenderTargets===!0?I.texture:[I.texture];for(let xe=0;xe<_e.length;xe++){const Ae=_e[xe],We=s.convert(Ae.format,Ae.colorSpace),Re=s.convert(Ae.type),fe=N(Ae.internalFormat,We,Re,Ae.colorSpace),qe=Oe(I);le&&et(I)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,qe,fe,I.width,I.height):et(I)?m.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,qe,fe,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,fe,I.width,I.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ge(k,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,k),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(I.depthTexture).__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),z(I.depthTexture,0);const _e=i.get(I.depthTexture).__webglTexture,xe=Oe(I);if(I.depthTexture.format===to)et(I)?m.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,_e,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,_e,0);else if(I.depthTexture.format===aa)et(I)?m.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,_e,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,_e,0);else throw new Error("Unknown depthTexture format")}function de(k){const I=i.get(k),le=k.isWebGLCubeRenderTarget===!0;if(k.depthTexture&&!I.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");ge(I.__webglFramebuffer,k)}else if(le){I.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer[_e]),I.__webglDepthbuffer[_e]=n.createRenderbuffer(),V(I.__webglDepthbuffer[_e],k,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer),I.__webglDepthbuffer=n.createRenderbuffer(),V(I.__webglDepthbuffer,k,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Me(k,I,le){const _e=i.get(k);I!==void 0&&Ye(_e.__webglFramebuffer,k,k.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D),le!==void 0&&de(k)}function me(k){const I=k.texture,le=i.get(k),_e=i.get(I);k.addEventListener("dispose",J),k.isWebGLMultipleRenderTargets!==!0&&(_e.__webglTexture===void 0&&(_e.__webglTexture=n.createTexture()),_e.__version=I.version,o.memory.textures++);const xe=k.isWebGLCubeRenderTarget===!0,Ae=k.isWebGLMultipleRenderTargets===!0,We=T(k)||l;if(xe){le.__webglFramebuffer=[];for(let Re=0;Re<6;Re++)le.__webglFramebuffer[Re]=n.createFramebuffer()}else{if(le.__webglFramebuffer=n.createFramebuffer(),Ae)if(r.drawBuffers){const Re=k.texture;for(let fe=0,qe=Re.length;fe<qe;fe++){const Ze=i.get(Re[fe]);Ze.__webglTexture===void 0&&(Ze.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&k.samples>0&&et(k)===!1){const Re=Ae?I:[I];le.__webglMultisampledFramebuffer=n.createFramebuffer(),le.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,le.__webglMultisampledFramebuffer);for(let fe=0;fe<Re.length;fe++){const qe=Re[fe];le.__webglColorRenderbuffer[fe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,le.__webglColorRenderbuffer[fe]);const Ze=s.convert(qe.format,qe.colorSpace),Qe=s.convert(qe.type),ze=N(qe.internalFormat,Ze,Qe,qe.colorSpace,k.isXRRenderTarget===!0),Be=Oe(k);n.renderbufferStorageMultisample(n.RENDERBUFFER,Be,ze,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+fe,n.RENDERBUFFER,le.__webglColorRenderbuffer[fe])}n.bindRenderbuffer(n.RENDERBUFFER,null),k.depthBuffer&&(le.__webglDepthRenderbuffer=n.createRenderbuffer(),V(le.__webglDepthRenderbuffer,k,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(xe){t.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture),Ce(n.TEXTURE_CUBE_MAP,I,We);for(let Re=0;Re<6;Re++)Ye(le.__webglFramebuffer[Re],k,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Re);P(I,We)&&L(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ae){const Re=k.texture;for(let fe=0,qe=Re.length;fe<qe;fe++){const Ze=Re[fe],Qe=i.get(Ze);t.bindTexture(n.TEXTURE_2D,Qe.__webglTexture),Ce(n.TEXTURE_2D,Ze,We),Ye(le.__webglFramebuffer,k,Ze,n.COLOR_ATTACHMENT0+fe,n.TEXTURE_2D),P(Ze,We)&&L(n.TEXTURE_2D)}t.unbindTexture()}else{let Re=n.TEXTURE_2D;(k.isWebGL3DRenderTarget||k.isWebGLArrayRenderTarget)&&(l?Re=k.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Re,_e.__webglTexture),Ce(Re,I,We),Ye(le.__webglFramebuffer,k,I,n.COLOR_ATTACHMENT0,Re),P(I,We)&&L(Re),t.unbindTexture()}k.depthBuffer&&de(k)}function Ge(k){const I=T(k)||l,le=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let _e=0,xe=le.length;_e<xe;_e++){const Ae=le[_e];if(P(Ae,I)){const We=k.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Re=i.get(Ae).__webglTexture;t.bindTexture(We,Re),L(We),t.unbindTexture()}}}function Ue(k){if(l&&k.samples>0&&et(k)===!1){const I=k.isWebGLMultipleRenderTargets?k.texture:[k.texture],le=k.width,_e=k.height;let xe=n.COLOR_BUFFER_BIT;const Ae=[],We=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Re=i.get(k),fe=k.isWebGLMultipleRenderTargets===!0;if(fe)for(let qe=0;qe<I.length;qe++)t.bindFramebuffer(n.FRAMEBUFFER,Re.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Re.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Re.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Re.__webglFramebuffer);for(let qe=0;qe<I.length;qe++){Ae.push(n.COLOR_ATTACHMENT0+qe),k.depthBuffer&&Ae.push(We);const Ze=Re.__ignoreDepthValues!==void 0?Re.__ignoreDepthValues:!1;if(Ze===!1&&(k.depthBuffer&&(xe|=n.DEPTH_BUFFER_BIT),k.stencilBuffer&&(xe|=n.STENCIL_BUFFER_BIT)),fe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Re.__webglColorRenderbuffer[qe]),Ze===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[We]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[We])),fe){const Qe=i.get(I[qe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Qe,0)}n.blitFramebuffer(0,0,le,_e,0,0,le,_e,xe,n.NEAREST),v&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ae)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),fe)for(let qe=0;qe<I.length;qe++){t.bindFramebuffer(n.FRAMEBUFFER,Re.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,Re.__webglColorRenderbuffer[qe]);const Ze=i.get(I[qe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Re.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,Ze,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Re.__webglMultisampledFramebuffer)}}function Oe(k){return Math.min(d,k.samples)}function et(k){const I=i.get(k);return l&&k.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&I.__useRenderToTexture!==!1}function xt(k){const I=o.render.frame;_.get(k)!==I&&(_.set(k,I),k.update())}function Xt(k,I){const le=k.colorSpace,_e=k.format,xe=k.type;return k.isCompressedTexture===!0||k.format===vp||le!==_r&&le!==io&&(le===ft?l===!1?e.has("EXT_sRGB")===!0&&_e===pi?(k.format=vp,k.minFilter=hn,k.generateMipmaps=!1):I=Ty.sRGBToLinear(I):(_e!==pi||xe!==Hr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",le)),I}this.allocateTextureUnit=U,this.resetTextureUnits=ne,this.setTexture2D=z,this.setTexture2DArray=te,this.setTexture3D=B,this.setTextureCube=he,this.rebindTextures=Me,this.setupRenderTarget=me,this.updateRenderTargetMipmap=Ge,this.updateMultisampleRenderTarget=Ue,this.setupDepthRenderbuffer=de,this.setupFrameBufferTexture=Ye,this.useMultisampledRTT=et}function M3(n,e,t){const i=t.isWebGL2;function r(s,o=io){let l;if(s===Hr)return n.UNSIGNED_BYTE;if(s===gy)return n.UNSIGNED_SHORT_4_4_4_4;if(s===vy)return n.UNSIGNED_SHORT_5_5_5_1;if(s===BT)return n.BYTE;if(s===HT)return n.SHORT;if(s===Wp)return n.UNSIGNED_SHORT;if(s===my)return n.INT;if(s===us)return n.UNSIGNED_INT;if(s===Fr)return n.FLOAT;if(s===Fl)return i?n.HALF_FLOAT:(l=e.get("OES_texture_half_float"),l!==null?l.HALF_FLOAT_OES:null);if(s===VT)return n.ALPHA;if(s===pi)return n.RGBA;if(s===GT)return n.LUMINANCE;if(s===WT)return n.LUMINANCE_ALPHA;if(s===to)return n.DEPTH_COMPONENT;if(s===aa)return n.DEPTH_STENCIL;if(s===vp)return l=e.get("EXT_sRGB"),l!==null?l.SRGB_ALPHA_EXT:null;if(s===XT)return n.RED;if(s===yy)return n.RED_INTEGER;if(s===jT)return n.RG;if(s===_y)return n.RG_INTEGER;if(s===xy)return n.RGBA_INTEGER;if(s===Nd||s===Ud||s===Dd||s===Od)if(o===ft)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(s===Nd)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Ud)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Dd)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Od)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(s===Nd)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Ud)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Dd)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Od)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===bv||s===Lv||s===Iv||s===Nv)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(s===bv)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Lv)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Iv)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Nv)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===YT)return l=e.get("WEBGL_compressed_texture_etc1"),l!==null?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Uv||s===Dv)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(s===Uv)return o===ft?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(s===Dv)return o===ft?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===Ov||s===Fv||s===kv||s===zv||s===Bv||s===Hv||s===Vv||s===Gv||s===Wv||s===Xv||s===jv||s===Yv||s===qv||s===Zv)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(s===Ov)return o===ft?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Fv)return o===ft?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===kv)return o===ft?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===zv)return o===ft?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===Bv)return o===ft?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Hv)return o===ft?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===Vv)return o===ft?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Gv)return o===ft?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Wv)return o===ft?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Xv)return o===ft?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===jv)return o===ft?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Yv)return o===ft?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===qv)return o===ft?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Zv)return o===ft?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Fd)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(s===Fd)return o===ft?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===qT||s===Jv||s===Kv||s===Qv)if(l=e.get("EXT_texture_compression_rgtc"),l!==null){if(s===Fd)return l.COMPRESSED_RED_RGTC1_EXT;if(s===Jv)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Kv)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Qv)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===eo?i?n.UNSIGNED_INT_24_8:(l=e.get("WEBGL_depth_texture"),l!==null?l.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class E3 extends bn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class yl extends Pt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const dD={type:"move"};class r0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new yl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new yl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new O,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new O),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new yl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new O,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new O),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const l=this._targetRay,c=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){o=!0;for(const E of e.hand.values()){const M=t.getJointPose(E,i),g=this._getHandJoint(f,E);M!==null&&(g.matrix.fromArray(M.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=M.radius),g.visible=M!==null}const h=f.joints["index-finger-tip"],d=f.joints["thumb-tip"],m=h.position.distanceTo(d.position),v=.02,_=.005;f.inputState.pinching&&m>v+_?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&m<=v-_&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(dD)))}return l!==null&&(l.visible=r!==null),c!==null&&(c.visible=s!==null),f!==null&&(f.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new yl;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class w3 extends an{constructor(e,t,i,r,s,o,l,c,f,h){if(h=h!==void 0?h:to,h!==to&&h!==aa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===to&&(i=us),i===void 0&&h===aa&&(i=eo),super(null,r,s,o,l,c,h,i,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:cn,this.minFilter=c!==void 0?c:cn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class pD extends _s{constructor(e,t){super();const i=this;let r=null,s=1,o=null,l="local-floor",c=1,f=null,h=null,d=null,m=null,v=null,_=null;const E=t.getContextAttributes();let M=null,g=null;const x=[],S=[];let T=null;const A=new bn;A.layers.enable(1),A.viewport=new It;const P=new bn;P.layers.enable(2),P.viewport=new It;const L=[A,P],N=new E3;N.layers.enable(1),N.layers.enable(2);let R=null,b=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getCamera=function(){},this.setUserCamera=function(B){T=B},this.getController=function(B){let he=x[B];return he===void 0&&(he=new r0,x[B]=he),he.getTargetRaySpace()},this.getControllerGrip=function(B){let he=x[B];return he===void 0&&(he=new r0,x[B]=he),he.getGripSpace()},this.getHand=function(B){let he=x[B];return he===void 0&&(he=new r0,x[B]=he),he.getHandSpace()};function G(B){const he=S.indexOf(B.inputSource);if(he===-1)return;const se=x[he];se!==void 0&&(se.update(B.inputSource,B.frame,f||o),se.dispatchEvent({type:B.type,data:B.inputSource}))}function J(){r.removeEventListener("select",G),r.removeEventListener("selectstart",G),r.removeEventListener("selectend",G),r.removeEventListener("squeeze",G),r.removeEventListener("squeezestart",G),r.removeEventListener("squeezeend",G),r.removeEventListener("end",J),r.removeEventListener("inputsourceschange",j);for(let B=0;B<x.length;B++){const he=S[B];he!==null&&(S[B]=null,x[B].disconnect(he))}R=null,b=null,e.setRenderTarget(M),v=null,m=null,d=null,r=null,g=null,te.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(B){s=B,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(B){l=B,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||o},this.setReferenceSpace=function(B){f=B},this.getBaseLayer=function(){return m!==null?m:v},this.getBinding=function(){return d},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(B){if(r=B,r!==null){if(M=e.getRenderTarget(),r.addEventListener("select",G),r.addEventListener("selectstart",G),r.addEventListener("selectend",G),r.addEventListener("squeeze",G),r.addEventListener("squeezestart",G),r.addEventListener("squeezeend",G),r.addEventListener("end",J),r.addEventListener("inputsourceschange",j),E.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const he={antialias:r.renderState.layers===void 0?E.antialias:!0,alpha:!0,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(r,t,he),r.updateRenderState({baseLayer:v}),g=new xr(v.framebufferWidth,v.framebufferHeight,{format:pi,type:Hr,colorSpace:e.outputColorSpace,stencilBuffer:E.stencil})}else{let he=null,se=null,Ee=null;E.depth&&(Ee=E.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,he=E.stencil?aa:to,se=E.stencil?eo:us);const ve={colorFormat:t.RGBA8,depthFormat:Ee,scaleFactor:s};d=new XRWebGLBinding(r,t),m=d.createProjectionLayer(ve),r.updateRenderState({layers:[m]}),g=new xr(m.textureWidth,m.textureHeight,{format:pi,type:Hr,depthTexture:new w3(m.textureWidth,m.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,he),stencilBuffer:E.stencil,colorSpace:e.outputColorSpace,samples:E.antialias?4:0});const Ce=e.properties.get(g);Ce.__ignoreDepthValues=m.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(c),f=null,o=await r.requestReferenceSpace(l),te.setContext(r),te.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function j(B){for(let he=0;he<B.removed.length;he++){const se=B.removed[he],Ee=S.indexOf(se);Ee>=0&&(S[Ee]=null,x[Ee].disconnect(se))}for(let he=0;he<B.added.length;he++){const se=B.added[he];let Ee=S.indexOf(se);if(Ee===-1){for(let Ce=0;Ce<x.length;Ce++)if(Ce>=S.length){S.push(se),Ee=Ce;break}else if(S[Ce]===null){S[Ce]=se,Ee=Ce;break}if(Ee===-1)break}const ve=x[Ee];ve&&ve.connect(se)}}const Z=new O,$=new O;function ae(B,he,se){Z.setFromMatrixPosition(he.matrixWorld),$.setFromMatrixPosition(se.matrixWorld);const Ee=Z.distanceTo($),ve=he.projectionMatrix.elements,Ce=se.projectionMatrix.elements,ot=ve[14]/(ve[10]-1),$e=ve[14]/(ve[10]+1),Et=(ve[9]+1)/ve[5],Ye=(ve[9]-1)/ve[5],V=(ve[8]-1)/ve[0],ge=(Ce[8]+1)/Ce[0],de=ot*V,Me=ot*ge,me=Ee/(-V+ge),Ge=me*-V;he.matrixWorld.decompose(B.position,B.quaternion,B.scale),B.translateX(Ge),B.translateZ(me),B.matrixWorld.compose(B.position,B.quaternion,B.scale),B.matrixWorldInverse.copy(B.matrixWorld).invert();const Ue=ot+me,Oe=$e+me,et=de-Ge,xt=Me+(Ee-Ge),Xt=Et*$e/Oe*Ue,k=Ye*$e/Oe*Ue;B.projectionMatrix.makePerspective(et,xt,Xt,k,Ue,Oe),B.projectionMatrixInverse.copy(B.projectionMatrix).invert()}function ne(B,he){he===null?B.matrixWorld.copy(B.matrix):B.matrixWorld.multiplyMatrices(he.matrixWorld,B.matrix),B.matrixWorldInverse.copy(B.matrixWorld).invert()}this.updateCameraXR=function(B){if(r===null)return B;T&&(B=T),N.near=P.near=A.near=B.near,N.far=P.far=A.far=B.far,(R!==N.near||b!==N.far)&&(r.updateRenderState({depthNear:N.near,depthFar:N.far}),R=N.near,b=N.far);const he=B.parent,se=N.cameras;ne(N,he);for(let Ee=0;Ee<se.length;Ee++)ne(se[Ee],he);return se.length===2?ae(N,A,P):N.projectionMatrix.copy(A.projectionMatrix),T&&U(N,he),N};function U(B,he){const se=T;he===null?se.matrix.copy(B.matrixWorld):(se.matrix.copy(he.matrixWorld),se.matrix.invert(),se.matrix.multiply(B.matrixWorld)),se.matrix.decompose(se.position,se.quaternion,se.scale),se.updateMatrixWorld(!0);const Ee=se.children;for(let ve=0,Ce=Ee.length;ve<Ce;ve++)Ee[ve].updateMatrixWorld(!0);se.projectionMatrix.copy(B.projectionMatrix),se.projectionMatrixInverse.copy(B.projectionMatrixInverse),se.isPerspectiveCamera&&(se.fov=kl*2*Math.atan(1/se.projectionMatrix.elements[5]),se.zoom=1)}this.getFoveation=function(){if(!(m===null&&v===null))return c},this.setFoveation=function(B){c=B,m!==null&&(m.fixedFoveation=B),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=B)};let H=null;function z(B,he){if(h=he.getViewerPose(f||o),_=he,h!==null){const se=h.views;v!==null&&(e.setRenderTargetFramebuffer(g,v.framebuffer),e.setRenderTarget(g));let Ee=!1;se.length!==N.cameras.length&&(N.cameras.length=0,Ee=!0);for(let ve=0;ve<se.length;ve++){const Ce=se[ve];let ot=null;if(v!==null)ot=v.getViewport(Ce);else{const Et=d.getViewSubImage(m,Ce);ot=Et.viewport,ve===0&&(e.setRenderTargetTextures(g,Et.colorTexture,m.ignoreDepthValues?void 0:Et.depthStencilTexture),e.setRenderTarget(g))}let $e=L[ve];$e===void 0&&($e=new bn,$e.layers.enable(ve),$e.viewport=new It,L[ve]=$e),$e.matrix.fromArray(Ce.transform.matrix),$e.matrix.decompose($e.position,$e.quaternion,$e.scale),$e.projectionMatrix.fromArray(Ce.projectionMatrix),$e.projectionMatrixInverse.copy($e.projectionMatrix).invert(),$e.viewport.set(ot.x,ot.y,ot.width,ot.height),ve===0&&(N.matrix.copy($e.matrix),N.matrix.decompose(N.position,N.quaternion,N.scale)),Ee===!0&&N.cameras.push($e)}}for(let se=0;se<x.length;se++){const Ee=S[se],ve=x[se];Ee!==null&&ve!==void 0&&ve.update(Ee,he,f||o)}H&&H(B,he),he.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:he}),_=null}const te=new v3;te.setAnimationLoop(z),this.setAnimationLoop=function(B){H=B},this.dispose=function(){}}}function mD(n,e){function t(M,g){M.matrixAutoUpdate===!0&&M.updateMatrix(),g.value.copy(M.matrix)}function i(M,g){g.color.getRGB(M.fogColor.value,d3(n)),g.isFog?(M.fogNear.value=g.near,M.fogFar.value=g.far):g.isFogExp2&&(M.fogDensity.value=g.density)}function r(M,g,x,S,T){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(M,g):g.isMeshToonMaterial?(s(M,g),d(M,g)):g.isMeshPhongMaterial?(s(M,g),h(M,g)):g.isMeshStandardMaterial?(s(M,g),m(M,g),g.isMeshPhysicalMaterial&&v(M,g,T)):g.isMeshMatcapMaterial?(s(M,g),_(M,g)):g.isMeshDepthMaterial?s(M,g):g.isMeshDistanceMaterial?(s(M,g),E(M,g)):g.isMeshNormalMaterial?s(M,g):g.isLineBasicMaterial?(o(M,g),g.isLineDashedMaterial&&l(M,g)):g.isPointsMaterial?c(M,g,x,S):g.isSpriteMaterial?f(M,g):g.isShadowMaterial?(M.color.value.copy(g.color),M.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(M,g){M.opacity.value=g.opacity,g.color&&M.diffuse.value.copy(g.color),g.emissive&&M.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(M.map.value=g.map,t(g.map,M.mapTransform)),g.alphaMap&&(M.alphaMap.value=g.alphaMap,t(g.alphaMap,M.alphaMapTransform)),g.bumpMap&&(M.bumpMap.value=g.bumpMap,t(g.bumpMap,M.bumpMapTransform),M.bumpScale.value=g.bumpScale,g.side===ri&&(M.bumpScale.value*=-1)),g.normalMap&&(M.normalMap.value=g.normalMap,t(g.normalMap,M.normalMapTransform),M.normalScale.value.copy(g.normalScale),g.side===ri&&M.normalScale.value.negate()),g.displacementMap&&(M.displacementMap.value=g.displacementMap,t(g.displacementMap,M.displacementMapTransform),M.displacementScale.value=g.displacementScale,M.displacementBias.value=g.displacementBias),g.emissiveMap&&(M.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,M.emissiveMapTransform)),g.specularMap&&(M.specularMap.value=g.specularMap,t(g.specularMap,M.specularMapTransform)),g.alphaTest>0&&(M.alphaTest.value=g.alphaTest);const x=e.get(g).envMap;if(x&&(M.envMap.value=x,M.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=g.reflectivity,M.ior.value=g.ior,M.refractionRatio.value=g.refractionRatio),g.lightMap){M.lightMap.value=g.lightMap;const S=n.useLegacyLights===!0?Math.PI:1;M.lightMapIntensity.value=g.lightMapIntensity*S,t(g.lightMap,M.lightMapTransform)}g.aoMap&&(M.aoMap.value=g.aoMap,M.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,M.aoMapTransform))}function o(M,g){M.diffuse.value.copy(g.color),M.opacity.value=g.opacity,g.map&&(M.map.value=g.map,t(g.map,M.mapTransform))}function l(M,g){M.dashSize.value=g.dashSize,M.totalSize.value=g.dashSize+g.gapSize,M.scale.value=g.scale}function c(M,g,x,S){M.diffuse.value.copy(g.color),M.opacity.value=g.opacity,M.size.value=g.size*x,M.scale.value=S*.5,g.map&&(M.map.value=g.map,t(g.map,M.uvTransform)),g.alphaMap&&(M.alphaMap.value=g.alphaMap,t(g.alphaMap,M.alphaMapTransform)),g.alphaTest>0&&(M.alphaTest.value=g.alphaTest)}function f(M,g){M.diffuse.value.copy(g.color),M.opacity.value=g.opacity,M.rotation.value=g.rotation,g.map&&(M.map.value=g.map,t(g.map,M.mapTransform)),g.alphaMap&&(M.alphaMap.value=g.alphaMap,t(g.alphaMap,M.alphaMapTransform)),g.alphaTest>0&&(M.alphaTest.value=g.alphaTest)}function h(M,g){M.specular.value.copy(g.specular),M.shininess.value=Math.max(g.shininess,1e-4)}function d(M,g){g.gradientMap&&(M.gradientMap.value=g.gradientMap)}function m(M,g){M.metalness.value=g.metalness,g.metalnessMap&&(M.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,M.metalnessMapTransform)),M.roughness.value=g.roughness,g.roughnessMap&&(M.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,M.roughnessMapTransform)),e.get(g).envMap&&(M.envMapIntensity.value=g.envMapIntensity)}function v(M,g,x){M.ior.value=g.ior,g.sheen>0&&(M.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),M.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(M.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,M.sheenColorMapTransform)),g.sheenRoughnessMap&&(M.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,M.sheenRoughnessMapTransform))),g.clearcoat>0&&(M.clearcoat.value=g.clearcoat,M.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(M.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,M.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(M.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===ri&&M.clearcoatNormalScale.value.negate())),g.iridescence>0&&(M.iridescence.value=g.iridescence,M.iridescenceIOR.value=g.iridescenceIOR,M.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(M.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,M.iridescenceMapTransform)),g.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),g.transmission>0&&(M.transmission.value=g.transmission,M.transmissionSamplerMap.value=x.texture,M.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(M.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,M.transmissionMapTransform)),M.thickness.value=g.thickness,g.thicknessMap&&(M.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=g.attenuationDistance,M.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(M.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(M.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=g.specularIntensity,M.specularColor.value.copy(g.specularColor),g.specularColorMap&&(M.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,M.specularColorMapTransform)),g.specularIntensityMap&&(M.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,M.specularIntensityMapTransform))}function _(M,g){g.matcap&&(M.matcap.value=g.matcap)}function E(M,g){const x=e.get(g).light;M.referencePosition.value.setFromMatrixPosition(x.matrixWorld),M.nearDistance.value=x.shadow.camera.near,M.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function gD(n,e,t,i){let r={},s={},o=[];const l=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function c(x,S){const T=S.program;i.uniformBlockBinding(x,T)}function f(x,S){let T=r[x.id];T===void 0&&(_(x),T=h(x),r[x.id]=T,x.addEventListener("dispose",M));const A=S.program;i.updateUBOMapping(x,A);const P=e.render.frame;s[x.id]!==P&&(m(x),s[x.id]=P)}function h(x){const S=d();x.__bindingPointIndex=S;const T=n.createBuffer(),A=x.__size,P=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,T),n.bufferData(n.UNIFORM_BUFFER,A,P),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,T),T}function d(){for(let x=0;x<l;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(x){const S=r[x.id],T=x.uniforms,A=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let P=0,L=T.length;P<L;P++){const N=T[P];if(v(N,P,A)===!0){const R=N.__offset,b=Array.isArray(N.value)?N.value:[N.value];let G=0;for(let J=0;J<b.length;J++){const j=b[J],Z=E(j);typeof j=="number"?(N.__data[0]=j,n.bufferSubData(n.UNIFORM_BUFFER,R+G,N.__data)):j.isMatrix3?(N.__data[0]=j.elements[0],N.__data[1]=j.elements[1],N.__data[2]=j.elements[2],N.__data[3]=j.elements[0],N.__data[4]=j.elements[3],N.__data[5]=j.elements[4],N.__data[6]=j.elements[5],N.__data[7]=j.elements[0],N.__data[8]=j.elements[6],N.__data[9]=j.elements[7],N.__data[10]=j.elements[8],N.__data[11]=j.elements[0]):(j.toArray(N.__data,G),G+=Z.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,R,N.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function v(x,S,T){const A=x.value;if(T[S]===void 0){if(typeof A=="number")T[S]=A;else{const P=Array.isArray(A)?A:[A],L=[];for(let N=0;N<P.length;N++)L.push(P[N].clone());T[S]=L}return!0}else if(typeof A=="number"){if(T[S]!==A)return T[S]=A,!0}else{const P=Array.isArray(T[S])?T[S]:[T[S]],L=Array.isArray(A)?A:[A];for(let N=0;N<P.length;N++){const R=P[N];if(R.equals(L[N])===!1)return R.copy(L[N]),!0}}return!1}function _(x){const S=x.uniforms;let T=0;const A=16;let P=0;for(let L=0,N=S.length;L<N;L++){const R=S[L],b={boundary:0,storage:0},G=Array.isArray(R.value)?R.value:[R.value];for(let J=0,j=G.length;J<j;J++){const Z=G[J],$=E(Z);b.boundary+=$.boundary,b.storage+=$.storage}if(R.__data=new Float32Array(b.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=T,L>0){P=T%A;const J=A-P;P!==0&&J-b.boundary<0&&(T+=A-P,R.__offset=T)}T+=b.storage}return P=T%A,P>0&&(T+=A-P),x.__size=T,x.__cache={},this}function E(x){const S={boundary:0,storage:0};return typeof x=="number"?(S.boundary=4,S.storage=4):x.isVector2?(S.boundary=8,S.storage=8):x.isVector3||x.isColor?(S.boundary=16,S.storage=12):x.isVector4?(S.boundary=16,S.storage=16):x.isMatrix3?(S.boundary=48,S.storage=48):x.isMatrix4?(S.boundary=64,S.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),S}function M(x){const S=x.target;S.removeEventListener("dispose",M);const T=o.indexOf(S.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(r[S.id]),delete r[S.id],delete s[S.id]}function g(){for(const x in r)n.deleteBuffer(r[x]);o=[],r={},s={}}return{bind:c,update:f,dispose:g}}function vD(){const n=Oc("canvas");return n.style.display="block",n}class Iy{constructor(e={}){const{canvas:t=vD(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:f=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let m;i!==null?m=i.getContextAttributes().alpha:m=o;const v=new Uint32Array(4),_=new Int32Array(4);let E=null,M=null;const g=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=ft,this.useLegacyLights=!0,this.toneMapping=vr,this.toneMappingExposure=1;const S=this;let T=!1,A=0,P=0,L=null,N=-1,R=null;const b=new It,G=new It;let J=null;const j=new Ne(0);let Z=0,$=t.width,ae=t.height,ne=1,U=null,H=null;const z=new It(0,0,$,ae),te=new It(0,0,$,ae);let B=!1;const he=new Yp;let se=!1,Ee=!1,ve=null;const Ce=new ct,ot=new pe,$e=new O,Et={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ye(){return L===null?ne:1}let V=i;function ge(D,ee){for(let ue=0;ue<D.length;ue++){const q=D[ue],ce=t.getContext(q,ee);if(ce!==null)return ce}return null}try{const D={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:f,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Hp}`),t.addEventListener("webglcontextlost",Pe,!1),t.addEventListener("webglcontextrestored",ie,!1),t.addEventListener("webglcontextcreationerror",we,!1),V===null){const ee=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&ee.shift(),V=ge(ee,D),V===null)throw ge(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}V instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),V.getShaderPrecisionFormat===void 0&&(V.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}let de,Me,me,Ge,Ue,Oe,et,xt,Xt,k,I,le,_e,xe,Ae,We,Re,fe,qe,Ze,Qe,ze,Be,dt;function Ut(){de=new N5(V),Me=new A5(V,de,e),de.init(Me),ze=new M3(V,de,Me),me=new fD(V,de,Me),Ge=new O5(V),Ue=new $U,Oe=new hD(V,de,me,Ue,Me,ze,Ge),et=new P5(S),xt=new I5(S),Xt=new qL(V,Me),Be=new T5(V,de,Xt,Me),k=new U5(V,Xt,Ge,Be),I=new B5(V,k,Xt,Ge),qe=new z5(V,Me,Oe),We=new R5(Ue),le=new QU(S,et,xt,de,Me,Be,We),_e=new mD(S,Ue),xe=new tD,Ae=new aD(de,Me),fe=new w5(S,et,xt,me,I,m,c),Re=new cD(S,I,Me),dt=new gD(V,Ge,Me,me),Ze=new C5(V,de,Ge,Me),Qe=new D5(V,de,Ge,Me),Ge.programs=le.programs,S.capabilities=Me,S.extensions=de,S.properties=Ue,S.renderLists=xe,S.shadowMap=Re,S.state=me,S.info=Ge}Ut();const W=new pD(S,V);this.xr=W,this.getContext=function(){return V},this.getContextAttributes=function(){return V.getContextAttributes()},this.forceContextLoss=function(){const D=de.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){const D=de.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(D){D!==void 0&&(ne=D,this.setSize($,ae,!1))},this.getSize=function(D){return D.set($,ae)},this.setSize=function(D,ee,ue=!0){if(W.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}$=D,ae=ee,t.width=Math.floor(D*ne),t.height=Math.floor(ee*ne),ue===!0&&(t.style.width=D+"px",t.style.height=ee+"px"),this.setViewport(0,0,D,ee)},this.getDrawingBufferSize=function(D){return D.set($*ne,ae*ne).floor()},this.setDrawingBufferSize=function(D,ee,ue){$=D,ae=ee,ne=ue,t.width=Math.floor(D*ue),t.height=Math.floor(ee*ue),this.setViewport(0,0,D,ee)},this.getCurrentViewport=function(D){return D.copy(b)},this.getViewport=function(D){return D.copy(z)},this.setViewport=function(D,ee,ue,q){D.isVector4?z.set(D.x,D.y,D.z,D.w):z.set(D,ee,ue,q),me.viewport(b.copy(z).multiplyScalar(ne).floor())},this.getScissor=function(D){return D.copy(te)},this.setScissor=function(D,ee,ue,q){D.isVector4?te.set(D.x,D.y,D.z,D.w):te.set(D,ee,ue,q),me.scissor(G.copy(te).multiplyScalar(ne).floor())},this.getScissorTest=function(){return B},this.setScissorTest=function(D){me.setScissorTest(B=D)},this.setOpaqueSort=function(D){U=D},this.setTransparentSort=function(D){H=D},this.getClearColor=function(D){return D.copy(fe.getClearColor())},this.setClearColor=function(){fe.setClearColor.apply(fe,arguments)},this.getClearAlpha=function(){return fe.getClearAlpha()},this.setClearAlpha=function(){fe.setClearAlpha.apply(fe,arguments)},this.clear=function(D=!0,ee=!0,ue=!0){let q=0;if(D){let ce=!1;if(L!==null){const Fe=L.texture.format;ce=Fe===xy||Fe===_y||Fe===yy}if(ce){const Fe=L.texture.type,Je=Fe===Hr||Fe===us||Fe===Wp||Fe===eo||Fe===gy||Fe===vy,tt=fe.getClearColor(),nt=fe.getClearAlpha(),yt=tt.r,it=tt.g,rt=tt.b,bt=Ue.get(L).__webglFramebuffer;Je?(v[0]=yt,v[1]=it,v[2]=rt,v[3]=nt,V.clearBufferuiv(V.COLOR,bt,v)):(_[0]=yt,_[1]=it,_[2]=rt,_[3]=nt,V.clearBufferiv(V.COLOR,bt,_))}else q|=V.COLOR_BUFFER_BIT}ee&&(q|=V.DEPTH_BUFFER_BIT),ue&&(q|=V.STENCIL_BUFFER_BIT),V.clear(q)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Pe,!1),t.removeEventListener("webglcontextrestored",ie,!1),t.removeEventListener("webglcontextcreationerror",we,!1),xe.dispose(),Ae.dispose(),Ue.dispose(),et.dispose(),xt.dispose(),I.dispose(),Be.dispose(),dt.dispose(),le.dispose(),W.dispose(),W.removeEventListener("sessionstart",Bt),W.removeEventListener("sessionend",xi),ve&&(ve.dispose(),ve=null),In.stop()};function Pe(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function ie(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const D=Ge.autoReset,ee=Re.enabled,ue=Re.autoUpdate,q=Re.needsUpdate,ce=Re.type;Ut(),Ge.autoReset=D,Re.enabled=ee,Re.autoUpdate=ue,Re.needsUpdate=q,Re.type=ce}function we(D){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",D.statusMessage)}function Le(D){const ee=D.target;ee.removeEventListener("dispose",Le),Mt(ee)}function Mt(D){zt(D),Ue.remove(D)}function zt(D){const ee=Ue.get(D).programs;ee!==void 0&&(ee.forEach(function(ue){le.releaseProgram(ue)}),D.isShaderMaterial&&le.releaseShaderCache(D))}this.renderBufferDirect=function(D,ee,ue,q,ce,Fe){ee===null&&(ee=Et);const Je=ce.isMesh&&ce.matrixWorld.determinant()<0,tt=rm(D,ee,ue,q,ce);me.setMaterial(q,Je);let nt=ue.index,yt=1;q.wireframe===!0&&(nt=k.getWireframeAttribute(ue),yt=2);const it=ue.drawRange,rt=ue.attributes.position;let bt=it.start*yt,Ht=(it.start+it.count)*yt;Fe!==null&&(bt=Math.max(bt,Fe.start*yt),Ht=Math.min(Ht,(Fe.start+Fe.count)*yt)),nt!==null?(bt=Math.max(bt,0),Ht=Math.min(Ht,nt.count)):rt!=null&&(bt=Math.max(bt,0),Ht=Math.min(Ht,rt.count));const Si=Ht-bt;if(Si<0||Si===1/0)return;Be.setup(ce,q,tt,ue,nt);let Mi,Dt=Ze;if(nt!==null&&(Mi=Xt.get(nt),Dt=Qe,Dt.setIndex(Mi)),ce.isMesh)q.wireframe===!0?(me.setLineWidth(q.wireframeLinewidth*Ye()),Dt.setMode(V.LINES)):Dt.setMode(V.TRIANGLES);else if(ce.isLine){let at=q.linewidth;at===void 0&&(at=1),me.setLineWidth(at*Ye()),ce.isLineSegments?Dt.setMode(V.LINES):ce.isLineLoop?Dt.setMode(V.LINE_LOOP):Dt.setMode(V.LINE_STRIP)}else ce.isPoints?Dt.setMode(V.POINTS):ce.isSprite&&Dt.setMode(V.TRIANGLES);if(ce.isInstancedMesh)Dt.renderInstances(bt,Si,ce.count);else if(ue.isInstancedBufferGeometry){const at=ue._maxInstanceCount!==void 0?ue._maxInstanceCount:1/0,Lt=Math.min(ue.instanceCount,at);Dt.renderInstances(bt,Si,Lt)}else Dt.render(bt,Si)},this.compile=function(D,ee){function ue(q,ce,Fe){q.transparent===!0&&q.side===Or&&q.forceSinglePass===!1?(q.side=ri,q.needsUpdate=!0,Tr(q,ce,Fe),q.side=gs,q.needsUpdate=!0,Tr(q,ce,Fe),q.side=Or):Tr(q,ce,Fe)}M=Ae.get(D),M.init(),x.push(M),D.traverseVisible(function(q){q.isLight&&q.layers.test(ee.layers)&&(M.pushLight(q),q.castShadow&&M.pushShadow(q))}),M.setupLights(S.useLegacyLights),D.traverse(function(q){const ce=q.material;if(ce)if(Array.isArray(ce))for(let Fe=0;Fe<ce.length;Fe++){const Je=ce[Fe];ue(Je,D,q)}else ue(ce,D,q)}),x.pop(),M=null};let $t=null;function wr(D){$t&&$t(D)}function Bt(){In.stop()}function xi(){In.start()}const In=new v3;In.setAnimationLoop(wr),typeof self<"u"&&In.setContext(self),this.setAnimationLoop=function(D){$t=D,W.setAnimationLoop(D),D===null?In.stop():In.start()},W.addEventListener("sessionstart",Bt),W.addEventListener("sessionend",xi),this.render=function(D,ee){if(ee!==void 0&&ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;D.matrixWorldAutoUpdate===!0&&D.updateMatrixWorld(),ee.parent===null&&ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),W.enabled===!0&&W.isPresenting===!0&&(ee=W.updateCameraXR(ee)),D.isScene===!0&&D.onBeforeRender(S,D,ee,L),M=Ae.get(D,x.length),M.init(),x.push(M),Ce.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),he.setFromProjectionMatrix(Ce),Ee=this.localClippingEnabled,se=We.init(this.clippingPlanes,Ee),E=xe.get(D,g.length),E.init(),g.push(E),yf(D,ee,0,S.sortObjects),E.finish(),S.sortObjects===!0&&E.sort(U,H),se===!0&&We.beginShadows();const ue=M.state.shadowsArray;if(Re.render(ue,D,ee),se===!0&&We.endShadows(),this.info.autoReset===!0&&this.info.reset(),this.info.render.frame++,fe.render(E,D),M.setupLights(S.useLegacyLights),ee.isArrayCamera){const q=ee.cameras;for(let ce=0,Fe=q.length;ce<Fe;ce++){const Je=q[ce];_f(E,D,Je,Je.viewport)}}else _f(E,D,ee);L!==null&&(Oe.updateMultisampleRenderTarget(L),Oe.updateRenderTargetMipmap(L)),D.isScene===!0&&D.onAfterRender(S,D,ee),Be.resetDefaultState(),N=-1,R=null,x.pop(),x.length>0?M=x[x.length-1]:M=null,g.pop(),g.length>0?E=g[g.length-1]:E=null};function yf(D,ee,ue,q){if(D.visible===!1)return;if(D.layers.test(ee.layers)){if(D.isGroup)ue=D.renderOrder;else if(D.isLOD)D.autoUpdate===!0&&D.update(ee);else if(D.isLight)M.pushLight(D),D.castShadow&&M.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||he.intersectsSprite(D)){q&&$e.setFromMatrixPosition(D.matrixWorld).applyMatrix4(Ce);const Je=I.update(D),tt=D.material;tt.visible&&E.push(D,Je,tt,ue,$e.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(!D.frustumCulled||he.intersectsObject(D))){D.isSkinnedMesh&&D.skeleton.frame!==Ge.render.frame&&(D.skeleton.update(),D.skeleton.frame=Ge.render.frame);const Je=I.update(D),tt=D.material;if(q&&(D.boundingSphere!==void 0?(D.boundingSphere===null&&D.computeBoundingSphere(),$e.copy(D.boundingSphere.center)):(Je.boundingSphere===null&&Je.computeBoundingSphere(),$e.copy(Je.boundingSphere.center)),$e.applyMatrix4(D.matrixWorld).applyMatrix4(Ce)),Array.isArray(tt)){const nt=Je.groups;for(let yt=0,it=nt.length;yt<it;yt++){const rt=nt[yt],bt=tt[rt.materialIndex];bt&&bt.visible&&E.push(D,Je,bt,ue,$e.z,rt)}}else tt.visible&&E.push(D,Je,tt,ue,$e.z,null)}}const Fe=D.children;for(let Je=0,tt=Fe.length;Je<tt;Je++)yf(Fe[Je],ee,ue,q)}function _f(D,ee,ue,q){const ce=D.opaque,Fe=D.transmissive,Je=D.transparent;M.setupLightsView(ue),se===!0&&We.setGlobalState(S.clippingPlanes,ue),Fe.length>0&&xf(ce,Fe,ee,ue),q&&me.viewport(b.copy(q)),ce.length>0&&Ss(ce,ee,ue),Fe.length>0&&Ss(Fe,ee,ue),Je.length>0&&Ss(Je,ee,ue),me.buffers.depth.setTest(!0),me.buffers.depth.setMask(!0),me.buffers.color.setMask(!0),me.setPolygonOffset(!1)}function xf(D,ee,ue,q){const ce=Me.isWebGL2;ve===null&&(ve=new xr(1,1,{generateMipmaps:!0,type:de.has("EXT_color_buffer_half_float")?Fl:Hr,minFilter:lo,samples:ce&&l===!0?4:0})),S.getDrawingBufferSize(ot),ce?ve.setSize(ot.x,ot.y):ve.setSize(yp(ot.x),yp(ot.y));const Fe=S.getRenderTarget();S.setRenderTarget(ve),S.getClearColor(j),Z=S.getClearAlpha(),Z<1&&S.setClearColor(16777215,.5),S.clear();const Je=S.toneMapping;S.toneMapping=vr,Ss(D,ue,q),Oe.updateMultisampleRenderTarget(ve),Oe.updateRenderTargetMipmap(ve);let tt=!1;for(let nt=0,yt=ee.length;nt<yt;nt++){const it=ee[nt],rt=it.object,bt=it.geometry,Ht=it.material,Si=it.group;if(Ht.side===Or&&rt.layers.test(q.layers)){const Mi=Ht.side;Ht.side=ri,Ht.needsUpdate=!0,Sf(rt,ue,q,bt,Ht,Si),Ht.side=Mi,Ht.needsUpdate=!0,tt=!0}}tt===!0&&(Oe.updateMultisampleRenderTarget(ve),Oe.updateRenderTargetMipmap(ve)),S.setRenderTarget(Fe),S.setClearColor(j,Z),S.toneMapping=Je}function Ss(D,ee,ue){const q=ee.isScene===!0?ee.overrideMaterial:null;for(let ce=0,Fe=D.length;ce<Fe;ce++){const Je=D[ce],tt=Je.object,nt=Je.geometry,yt=q===null?Je.material:q,it=Je.group;tt.layers.test(ue.layers)&&Sf(tt,ee,ue,nt,yt,it)}}function Sf(D,ee,ue,q,ce,Fe){D.onBeforeRender(S,ee,ue,q,ce,Fe),D.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),ce.onBeforeRender(S,ee,ue,q,D,Fe),ce.transparent===!0&&ce.side===Or&&ce.forceSinglePass===!1?(ce.side=ri,ce.needsUpdate=!0,S.renderBufferDirect(ue,ee,q,ce,D,Fe),ce.side=gs,ce.needsUpdate=!0,S.renderBufferDirect(ue,ee,q,ce,D,Fe),ce.side=Or):S.renderBufferDirect(ue,ee,q,ce,D,Fe),D.onAfterRender(S,ee,ue,q,ce,Fe)}function Tr(D,ee,ue){ee.isScene!==!0&&(ee=Et);const q=Ue.get(D),ce=M.state.lights,Fe=M.state.shadowsArray,Je=ce.state.version,tt=le.getParameters(D,ce.state,Fe,ee,ue),nt=le.getProgramCacheKey(tt);let yt=q.programs;q.environment=D.isMeshStandardMaterial?ee.environment:null,q.fog=ee.fog,q.envMap=(D.isMeshStandardMaterial?xt:et).get(D.envMap||q.environment),yt===void 0&&(D.addEventListener("dispose",Le),yt=new Map,q.programs=yt);let it=yt.get(nt);if(it!==void 0){if(q.currentProgram===it&&q.lightsStateVersion===Je)return Mf(D,tt),it}else tt.uniforms=le.getUniforms(D),D.onBuild(ue,tt,S),D.onBeforeCompile(tt,S),it=le.acquireProgram(tt,nt),yt.set(nt,it),q.uniforms=tt.uniforms;const rt=q.uniforms;(!D.isShaderMaterial&&!D.isRawShaderMaterial||D.clipping===!0)&&(rt.clippingPlanes=We.uniform),Mf(D,tt),q.needsLights=om(D),q.lightsStateVersion=Je,q.needsLights&&(rt.ambientLightColor.value=ce.state.ambient,rt.lightProbe.value=ce.state.probe,rt.directionalLights.value=ce.state.directional,rt.directionalLightShadows.value=ce.state.directionalShadow,rt.spotLights.value=ce.state.spot,rt.spotLightShadows.value=ce.state.spotShadow,rt.rectAreaLights.value=ce.state.rectArea,rt.ltc_1.value=ce.state.rectAreaLTC1,rt.ltc_2.value=ce.state.rectAreaLTC2,rt.pointLights.value=ce.state.point,rt.pointLightShadows.value=ce.state.pointShadow,rt.hemisphereLights.value=ce.state.hemi,rt.directionalShadowMap.value=ce.state.directionalShadowMap,rt.directionalShadowMatrix.value=ce.state.directionalShadowMatrix,rt.spotShadowMap.value=ce.state.spotShadowMap,rt.spotLightMatrix.value=ce.state.spotLightMatrix,rt.spotLightMap.value=ce.state.spotLightMap,rt.pointShadowMap.value=ce.state.pointShadowMap,rt.pointShadowMatrix.value=ce.state.pointShadowMatrix);const bt=it.getUniforms(),Ht=Bd.seqWithValue(bt.seq,rt);return q.currentProgram=it,q.uniformsList=Ht,it}function Mf(D,ee){const ue=Ue.get(D);ue.outputColorSpace=ee.outputColorSpace,ue.instancing=ee.instancing,ue.skinning=ee.skinning,ue.morphTargets=ee.morphTargets,ue.morphNormals=ee.morphNormals,ue.morphColors=ee.morphColors,ue.morphTargetsCount=ee.morphTargetsCount,ue.numClippingPlanes=ee.numClippingPlanes,ue.numIntersection=ee.numClipIntersection,ue.vertexAlphas=ee.vertexAlphas,ue.vertexTangents=ee.vertexTangents,ue.toneMapping=ee.toneMapping}function rm(D,ee,ue,q,ce){ee.isScene!==!0&&(ee=Et),Oe.resetTextureUnits();const Fe=ee.fog,Je=q.isMeshStandardMaterial?ee.environment:null,tt=L===null?S.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:_r,nt=(q.isMeshStandardMaterial?xt:et).get(q.envMap||Je),yt=q.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,it=!!ue.attributes.tangent&&(!!q.normalMap||q.anisotropy>0),rt=!!ue.morphAttributes.position,bt=!!ue.morphAttributes.normal,Ht=!!ue.morphAttributes.color,Si=q.toneMapped?S.toneMapping:vr,Mi=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,Dt=Mi!==void 0?Mi.length:0,at=Ue.get(q),Lt=M.state.lights;if(se===!0&&(Ee===!0||D!==R)){const Bn=D===R&&q.id===N;We.setState(q,D,Bn)}let st=!1;q.version===at.__version?(at.needsLights&&at.lightsStateVersion!==Lt.state.version||at.outputColorSpace!==tt||ce.isInstancedMesh&&at.instancing===!1||!ce.isInstancedMesh&&at.instancing===!0||ce.isSkinnedMesh&&at.skinning===!1||!ce.isSkinnedMesh&&at.skinning===!0||at.envMap!==nt||q.fog===!0&&at.fog!==Fe||at.numClippingPlanes!==void 0&&(at.numClippingPlanes!==We.numPlanes||at.numIntersection!==We.numIntersection)||at.vertexAlphas!==yt||at.vertexTangents!==it||at.morphTargets!==rt||at.morphNormals!==bt||at.morphColors!==Ht||at.toneMapping!==Si||Me.isWebGL2===!0&&at.morphTargetsCount!==Dt)&&(st=!0):(st=!0,at.__version=q.version);let zn=at.currentProgram;st===!0&&(zn=Tr(q,ee,ce));let _n=!1,dn=!1,nr=!1;const en=zn.getUniforms(),tn=at.uniforms;if(me.useProgram(zn.program)&&(_n=!0,dn=!0,nr=!0),q.id!==N&&(N=q.id,dn=!0),_n||R!==D){if(en.setValue(V,"projectionMatrix",D.projectionMatrix),Me.logarithmicDepthBuffer&&en.setValue(V,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),R!==D&&(R=D,dn=!0,nr=!0),q.isShaderMaterial||q.isMeshPhongMaterial||q.isMeshToonMaterial||q.isMeshStandardMaterial||q.envMap){const Bn=en.map.cameraPosition;Bn!==void 0&&Bn.setValue(V,$e.setFromMatrixPosition(D.matrixWorld))}(q.isMeshPhongMaterial||q.isMeshToonMaterial||q.isMeshLambertMaterial||q.isMeshBasicMaterial||q.isMeshStandardMaterial||q.isShaderMaterial)&&en.setValue(V,"isOrthographic",D.isOrthographicCamera===!0),(q.isMeshPhongMaterial||q.isMeshToonMaterial||q.isMeshLambertMaterial||q.isMeshBasicMaterial||q.isMeshStandardMaterial||q.isShaderMaterial||q.isShadowMaterial||ce.isSkinnedMesh)&&en.setValue(V,"viewMatrix",D.matrixWorldInverse)}if(ce.isSkinnedMesh){en.setOptional(V,ce,"bindMatrix"),en.setOptional(V,ce,"bindMatrixInverse");const Bn=ce.skeleton;Bn&&(Me.floatVertexTextures?(Bn.boneTexture===null&&Bn.computeBoneTexture(),en.setValue(V,"boneTexture",Bn.boneTexture,Oe),en.setValue(V,"boneTextureSize",Bn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Ms=ue.morphAttributes;if((Ms.position!==void 0||Ms.normal!==void 0||Ms.color!==void 0&&Me.isWebGL2===!0)&&qe.update(ce,ue,zn),(dn||at.receiveShadow!==ce.receiveShadow)&&(at.receiveShadow=ce.receiveShadow,en.setValue(V,"receiveShadow",ce.receiveShadow)),q.isMeshGouraudMaterial&&q.envMap!==null&&(tn.envMap.value=nt,tn.flipEnvMap.value=nt.isCubeTexture&&nt.isRenderTargetTexture===!1?-1:1),dn&&(en.setValue(V,"toneMappingExposure",S.toneMappingExposure),at.needsLights&&sm(tn,nr),Fe&&q.fog===!0&&_e.refreshFogUniforms(tn,Fe),_e.refreshMaterialUniforms(tn,q,ne,ae,ve),Bd.upload(V,at.uniformsList,tn,Oe)),q.isShaderMaterial&&q.uniformsNeedUpdate===!0&&(Bd.upload(V,at.uniformsList,tn,Oe),q.uniformsNeedUpdate=!1),q.isSpriteMaterial&&en.setValue(V,"center",ce.center),en.setValue(V,"modelViewMatrix",ce.modelViewMatrix),en.setValue(V,"normalMatrix",ce.normalMatrix),en.setValue(V,"modelMatrix",ce.matrixWorld),q.isShaderMaterial||q.isRawShaderMaterial){const Bn=q.uniformsGroups;for(let va=0,ya=Bn.length;va<ya;va++)if(Me.isWebGL2){const tu=Bn[va];dt.update(tu,zn),dt.bind(tu,zn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return zn}function sm(D,ee){D.ambientLightColor.needsUpdate=ee,D.lightProbe.needsUpdate=ee,D.directionalLights.needsUpdate=ee,D.directionalLightShadows.needsUpdate=ee,D.pointLights.needsUpdate=ee,D.pointLightShadows.needsUpdate=ee,D.spotLights.needsUpdate=ee,D.spotLightShadows.needsUpdate=ee,D.rectAreaLights.needsUpdate=ee,D.hemisphereLights.needsUpdate=ee}function om(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&D.lights===!0}this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(D,ee,ue){Ue.get(D.texture).__webglTexture=ee,Ue.get(D.depthTexture).__webglTexture=ue;const q=Ue.get(D);q.__hasExternalTextures=!0,q.__hasExternalTextures&&(q.__autoAllocateDepthBuffer=ue===void 0,q.__autoAllocateDepthBuffer||de.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),q.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(D,ee){const ue=Ue.get(D);ue.__webglFramebuffer=ee,ue.__useDefaultFramebuffer=ee===void 0},this.setRenderTarget=function(D,ee=0,ue=0){L=D,A=ee,P=ue;let q=!0,ce=null,Fe=!1,Je=!1;if(D){const nt=Ue.get(D);nt.__useDefaultFramebuffer!==void 0?(me.bindFramebuffer(V.FRAMEBUFFER,null),q=!1):nt.__webglFramebuffer===void 0?Oe.setupRenderTarget(D):nt.__hasExternalTextures&&Oe.rebindTextures(D,Ue.get(D.texture).__webglTexture,Ue.get(D.depthTexture).__webglTexture);const yt=D.texture;(yt.isData3DTexture||yt.isDataArrayTexture||yt.isCompressedArrayTexture)&&(Je=!0);const it=Ue.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(ce=it[ee],Fe=!0):Me.isWebGL2&&D.samples>0&&Oe.useMultisampledRTT(D)===!1?ce=Ue.get(D).__webglMultisampledFramebuffer:ce=it,b.copy(D.viewport),G.copy(D.scissor),J=D.scissorTest}else b.copy(z).multiplyScalar(ne).floor(),G.copy(te).multiplyScalar(ne).floor(),J=B;if(me.bindFramebuffer(V.FRAMEBUFFER,ce)&&Me.drawBuffers&&q&&me.drawBuffers(D,ce),me.viewport(b),me.scissor(G),me.setScissorTest(J),Fe){const nt=Ue.get(D.texture);V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_CUBE_MAP_POSITIVE_X+ee,nt.__webglTexture,ue)}else if(Je){const nt=Ue.get(D.texture),yt=ee||0;V.framebufferTextureLayer(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,nt.__webglTexture,ue||0,yt)}N=-1},this.readRenderTargetPixels=function(D,ee,ue,q,ce,Fe,Je){if(!(D&&D.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let tt=Ue.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&Je!==void 0&&(tt=tt[Je]),tt){me.bindFramebuffer(V.FRAMEBUFFER,tt);try{const nt=D.texture,yt=nt.format,it=nt.type;if(yt!==pi&&ze.convert(yt)!==V.getParameter(V.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const rt=it===Fl&&(de.has("EXT_color_buffer_half_float")||Me.isWebGL2&&de.has("EXT_color_buffer_float"));if(it!==Hr&&ze.convert(it)!==V.getParameter(V.IMPLEMENTATION_COLOR_READ_TYPE)&&!(it===Fr&&(Me.isWebGL2||de.has("OES_texture_float")||de.has("WEBGL_color_buffer_float")))&&!rt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ee>=0&&ee<=D.width-q&&ue>=0&&ue<=D.height-ce&&V.readPixels(ee,ue,q,ce,ze.convert(yt),ze.convert(it),Fe)}finally{const nt=L!==null?Ue.get(L).__webglFramebuffer:null;me.bindFramebuffer(V.FRAMEBUFFER,nt)}}},this.copyFramebufferToTexture=function(D,ee,ue=0){const q=Math.pow(2,-ue),ce=Math.floor(ee.image.width*q),Fe=Math.floor(ee.image.height*q);Oe.setTexture2D(ee,0),V.copyTexSubImage2D(V.TEXTURE_2D,ue,0,0,D.x,D.y,ce,Fe),me.unbindTexture()},this.copyTextureToTexture=function(D,ee,ue,q=0){const ce=ee.image.width,Fe=ee.image.height,Je=ze.convert(ue.format),tt=ze.convert(ue.type);Oe.setTexture2D(ue,0),V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,ue.flipY),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),V.pixelStorei(V.UNPACK_ALIGNMENT,ue.unpackAlignment),ee.isDataTexture?V.texSubImage2D(V.TEXTURE_2D,q,D.x,D.y,ce,Fe,Je,tt,ee.image.data):ee.isCompressedTexture?V.compressedTexSubImage2D(V.TEXTURE_2D,q,D.x,D.y,ee.mipmaps[0].width,ee.mipmaps[0].height,Je,ee.mipmaps[0].data):V.texSubImage2D(V.TEXTURE_2D,q,D.x,D.y,Je,tt,ee.image),q===0&&ue.generateMipmaps&&V.generateMipmap(V.TEXTURE_2D),me.unbindTexture()},this.copyTextureToTexture3D=function(D,ee,ue,q,ce=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Fe=D.max.x-D.min.x+1,Je=D.max.y-D.min.y+1,tt=D.max.z-D.min.z+1,nt=ze.convert(q.format),yt=ze.convert(q.type);let it;if(q.isData3DTexture)Oe.setTexture3D(q,0),it=V.TEXTURE_3D;else if(q.isDataArrayTexture)Oe.setTexture2DArray(q,0),it=V.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,q.flipY),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),V.pixelStorei(V.UNPACK_ALIGNMENT,q.unpackAlignment);const rt=V.getParameter(V.UNPACK_ROW_LENGTH),bt=V.getParameter(V.UNPACK_IMAGE_HEIGHT),Ht=V.getParameter(V.UNPACK_SKIP_PIXELS),Si=V.getParameter(V.UNPACK_SKIP_ROWS),Mi=V.getParameter(V.UNPACK_SKIP_IMAGES),Dt=ue.isCompressedTexture?ue.mipmaps[0]:ue.image;V.pixelStorei(V.UNPACK_ROW_LENGTH,Dt.width),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,Dt.height),V.pixelStorei(V.UNPACK_SKIP_PIXELS,D.min.x),V.pixelStorei(V.UNPACK_SKIP_ROWS,D.min.y),V.pixelStorei(V.UNPACK_SKIP_IMAGES,D.min.z),ue.isDataTexture||ue.isData3DTexture?V.texSubImage3D(it,ce,ee.x,ee.y,ee.z,Fe,Je,tt,nt,yt,Dt.data):ue.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),V.compressedTexSubImage3D(it,ce,ee.x,ee.y,ee.z,Fe,Je,tt,nt,Dt.data)):V.texSubImage3D(it,ce,ee.x,ee.y,ee.z,Fe,Je,tt,nt,yt,Dt),V.pixelStorei(V.UNPACK_ROW_LENGTH,rt),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,bt),V.pixelStorei(V.UNPACK_SKIP_PIXELS,Ht),V.pixelStorei(V.UNPACK_SKIP_ROWS,Si),V.pixelStorei(V.UNPACK_SKIP_IMAGES,Mi),ce===0&&q.generateMipmaps&&V.generateMipmap(it),me.unbindTexture()},this.initTexture=function(D){D.isCubeTexture?Oe.setTextureCube(D,0):D.isData3DTexture?Oe.setTexture3D(D,0):D.isDataArrayTexture||D.isCompressedArrayTexture?Oe.setTexture2DArray(D,0):Oe.setTexture2D(D,0),me.unbindTexture()},this.resetState=function(){A=0,P=0,L=null,me.reset(),Be.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return kr}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ft?no:My}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===no?ft:_r}}class T3 extends Iy{}T3.prototype.isWebGL1Renderer=!0;class Zp{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ne(e),this.density=t}clone(){return new Zp(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Jp{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ne(e),this.near=t,this.far=i}clone(){return new Jp(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class _p extends Pt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Kp{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Uc,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ni()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ni()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ni()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ei=new O;class la{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)ei.fromBufferAttribute(this,t),ei.applyMatrix4(e),this.setXYZ(t,ei.x,ei.y,ei.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ei.fromBufferAttribute(this,t),ei.applyNormalMatrix(e),this.setXYZ(t,ei.x,ei.y,ei.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ei.fromBufferAttribute(this,t),ei.transformDirection(e),this.setXYZ(t,ei.x,ei.y,ei.z);return this}setX(e,t){return this.normalized&&(t=vt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=vt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=vt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=vt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Li(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Li(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Li(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Li(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=vt(t,this.array),i=vt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=vt(t,this.array),i=vt(i,this.array),r=vt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=vt(t,this.array),i=vt(i,this.array),r=vt(r,this.array),s=vt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ft(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new la(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ny extends kn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ne(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let qa;const Nu=new O,Za=new O,Ja=new O,Ka=new pe,Uu=new pe,C3=new ct,Qh=new O,Du=new O,$h=new O,FM=new pe,s0=new pe,kM=new pe;class A3 extends Pt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",qa===void 0){qa=new ht;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Kp(t,5);qa.setIndex([0,1,2,0,2,3]),qa.setAttribute("position",new la(i,3,0,!1)),qa.setAttribute("uv",new la(i,2,3,!1))}this.geometry=qa,this.material=e!==void 0?e:new Ny,this.center=new pe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Za.setFromMatrixScale(this.matrixWorld),C3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ja.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Za.multiplyScalar(-Ja.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;ed(Qh.set(-.5,-.5,0),Ja,o,Za,r,s),ed(Du.set(.5,-.5,0),Ja,o,Za,r,s),ed($h.set(.5,.5,0),Ja,o,Za,r,s),FM.set(0,0),s0.set(1,0),kM.set(1,1);let l=e.ray.intersectTriangle(Qh,Du,$h,!1,Nu);if(l===null&&(ed(Du.set(-.5,.5,0),Ja,o,Za,r,s),s0.set(0,1),l=e.ray.intersectTriangle(Qh,$h,Du,!1,Nu),l===null))return;const c=e.ray.origin.distanceTo(Nu);c<e.near||c>e.far||t.push({distance:c,point:Nu.clone(),uv:di.getInterpolation(Nu,Qh,Du,$h,FM,s0,kM,new pe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function ed(n,e,t,i,r,s){Ka.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Uu.x=s*Ka.x-r*Ka.y,Uu.y=r*Ka.x+s*Ka.y):Uu.copy(Ka),n.copy(e),n.x+=Uu.x,n.y+=Uu.y,n.applyMatrix4(C3)}const td=new O,zM=new O;class R3 extends Pt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){td.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(td);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){td.setFromMatrixPosition(e.matrixWorld),zM.setFromMatrixPosition(this.matrixWorld);const i=td.distanceTo(zM)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const BM=new O,HM=new It,VM=new It,yD=new O,GM=new ct,Qa=new O,o0=new Sr,WM=new ct,a0=new ql;class P3 extends Dn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ct,this.bindMatrixInverse=new ct,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Gr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Qa.fromBufferAttribute(t,i),this.applyBoneTransform(i,Qa),this.boundingBox.expandByPoint(Qa)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Qa.fromBufferAttribute(t,i),this.applyBoneTransform(i,Qa),this.boundingSphere.expandByPoint(Qa)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),o0.copy(this.boundingSphere),o0.applyMatrix4(r),e.ray.intersectsSphere(o0)!==!1&&(WM.copy(r).invert(),a0.copy(e.ray).applyMatrix4(WM),!(this.boundingBox!==null&&a0.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,a0)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new It,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;HM.fromBufferAttribute(r.attributes.skinIndex,e),VM.fromBufferAttribute(r.attributes.skinWeight,e),BM.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=VM.getComponent(s);if(o!==0){const l=HM.getComponent(s);GM.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(yD.copy(BM).applyMatrix4(GM),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Uy extends Pt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Pl extends an{constructor(e=null,t=1,i=1,r,s,o,l,c,f=cn,h=cn,d,m){super(null,o,l,c,f,h,r,s,d,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const XM=new ct,_D=new ct;class Qp{constructor(e=[],t=[]){this.uuid=Ni(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ct)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ct;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:_D;XM.multiplyMatrices(l,t[s]),XM.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Qp(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=c3(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Pl(t,e,e,pi,Fr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Uy),this.bones.push(o),this.boneInverses.push(new ct().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class Bl extends Ft{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const $a=new ct,jM=new ct,nd=[],YM=new Gr,xD=new ct,Ou=new Dn,Fu=new Sr;class b3 extends Dn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Bl(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,xD)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Gr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,$a),YM.copy(e.boundingBox).applyMatrix4($a),this.boundingBox.union(YM)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,$a),Fu.copy(e.boundingSphere).applyMatrix4($a),this.boundingSphere.union(Fu)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Ou.geometry=this.geometry,Ou.material=this.material,Ou.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Fu.copy(this.boundingSphere),Fu.applyMatrix4(i),e.ray.intersectsSphere(Fu)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,$a),jM.multiplyMatrices(i,$a),Ou.matrixWorld=jM,Ou.raycast(e,nd);for(let o=0,l=nd.length;o<l;o++){const c=nd[o];c.instanceId=s,c.object=this,t.push(c)}nd.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Bl(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ai extends kn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ne(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const qM=new O,ZM=new O,JM=new ct,l0=new ql,id=new Sr;class uo extends Pt{constructor(e=new ht,t=new ai){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)qM.fromBufferAttribute(t,r-1),ZM.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=qM.distanceTo(ZM);e.setAttribute("lineDistance",new He(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),id.copy(i.boundingSphere),id.applyMatrix4(r),id.radius+=s,e.ray.intersectsSphere(id)===!1)return;JM.copy(r).invert(),l0.copy(e.ray).applyMatrix4(JM);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=new O,h=new O,d=new O,m=new O,v=this.isLineSegments?2:1,_=i.index,M=i.attributes.position;if(_!==null){const g=Math.max(0,o.start),x=Math.min(_.count,o.start+o.count);for(let S=g,T=x-1;S<T;S+=v){const A=_.getX(S),P=_.getX(S+1);if(f.fromBufferAttribute(M,A),h.fromBufferAttribute(M,P),l0.distanceSqToSegment(f,h,m,d)>c)continue;m.applyMatrix4(this.matrixWorld);const N=e.ray.origin.distanceTo(m);N<e.near||N>e.far||t.push({distance:N,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),x=Math.min(M.count,o.start+o.count);for(let S=g,T=x-1;S<T;S+=v){if(f.fromBufferAttribute(M,S),h.fromBufferAttribute(M,S+1),l0.distanceSqToSegment(f,h,m,d)>c)continue;m.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(m);P<e.near||P>e.far||t.push({distance:P,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const KM=new O,QM=new O;class Wr extends uo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)KM.fromBufferAttribute(t,r),QM.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+KM.distanceTo(QM);e.setAttribute("lineDistance",new He(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class L3 extends uo{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Dy extends kn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ne(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const $M=new ct,i1=new ql,rd=new Sr,sd=new O;class I3 extends Pt{constructor(e=new ht,t=new Dy){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),rd.copy(i.boundingSphere),rd.applyMatrix4(r),rd.radius+=s,e.ray.intersectsSphere(rd)===!1)return;$M.copy(r).invert(),i1.copy(e.ray).applyMatrix4($M);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=i.index,d=i.attributes.position;if(f!==null){const m=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let _=m,E=v;_<E;_++){const M=f.getX(_);sd.fromBufferAttribute(d,M),e2(sd,M,c,r,e,t,this)}}else{const m=Math.max(0,o.start),v=Math.min(d.count,o.start+o.count);for(let _=m,E=v;_<E;_++)sd.fromBufferAttribute(d,_),e2(sd,_,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function e2(n,e,t,i,r,s,o){const l=i1.distanceSqToPoint(n);if(l<t){const c=new O;i1.closestPointToPoint(n,c),c.applyMatrix4(i);const f=r.ray.origin.distanceTo(c);if(f<r.near||f>r.far)return;s.push({distance:f,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,object:o})}}class SD extends an{constructor(e,t,i,r,s,o,l,c,f){super(e,t,i,r,s,o,l,c,f),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:hn,this.magFilter=s!==void 0?s:hn,this.generateMipmaps=!1;const h=this;function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class MD extends an{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=cn,this.minFilter=cn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Oy extends an{constructor(e,t,i,r,s,o,l,c,f,h,d,m){super(null,o,l,c,f,h,r,s,d,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class ED extends Oy{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Jn}}class wD extends an{constructor(e,t,i,r,s,o,l,c,f){super(e,t,i,r,s,o,l,c,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Mr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let l=0,c=s-1,f;for(;l<=c;)if(r=Math.floor(l+(c-l)/2),f=i[r]-o,f<0)l=r+1;else if(f>0)c=r-1;else{c=r;break}if(r=c,i[r]===o)return r/(s-1);const h=i[r],m=i[r+1]-h,v=(o-h)/m;return(r+v)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),c=t||(o.isVector2?new pe:new O);return c.copy(l).sub(o).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new O,r=[],s=[],o=[],l=new O,c=new ct;for(let v=0;v<=e;v++){const _=v/e;r[v]=this.getTangentAt(_,new O)}s[0]=new O,o[0]=new O;let f=Number.MAX_VALUE;const h=Math.abs(r[0].x),d=Math.abs(r[0].y),m=Math.abs(r[0].z);h<=f&&(f=h,i.set(1,0,0)),d<=f&&(f=d,i.set(0,1,0)),m<=f&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),l.crossVectors(r[v-1],r[v]),l.length()>Number.EPSILON){l.normalize();const _=Math.acos(on(r[v-1].dot(r[v]),-1,1));s[v].applyMatrix4(c.makeRotationAxis(l,_))}o[v].crossVectors(r[v],s[v])}if(t===!0){let v=Math.acos(on(s[0].dot(s[e]),-1,1));v/=e,r[0].dot(l.crossVectors(s[0],s[e]))>0&&(v=-v);for(let _=1;_<=e;_++)s[_].applyMatrix4(c.makeRotationAxis(r[_],v*_)),o[_].crossVectors(r[_],s[_])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class $p extends Mr{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=c}getPoint(e,t){const i=t||new pe,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),m=c-this.aX,v=f-this.aY;c=m*h-v*d+this.aX,f=m*d+v*h+this.aY}return i.set(c,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class N3 extends $p{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Fy(){let n=0,e=0,t=0,i=0;function r(s,o,l,c){n=s,e=l,t=-3*s+3*o-2*l-c,i=2*s-2*o+l+c}return{initCatmullRom:function(s,o,l,c,f){r(o,l,f*(l-s),f*(c-o))},initNonuniformCatmullRom:function(s,o,l,c,f,h,d){let m=(o-s)/f-(l-s)/(f+h)+(l-o)/h,v=(l-o)/h-(c-o)/(h+d)+(c-l)/d;m*=h,v*=h,r(o,l,m,v)},calc:function(s){const o=s*s,l=o*s;return n+e*s+t*o+i*l}}}const od=new O,u0=new Fy,c0=new Fy,f0=new Fy;class U3 extends Mr{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new O){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let f,h;this.closed||l>0?f=r[(l-1)%s]:(od.subVectors(r[0],r[1]).add(r[0]),f=od);const d=r[l%s],m=r[(l+1)%s];if(this.closed||l+2<s?h=r[(l+2)%s]:(od.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=od),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let _=Math.pow(f.distanceToSquared(d),v),E=Math.pow(d.distanceToSquared(m),v),M=Math.pow(m.distanceToSquared(h),v);E<1e-4&&(E=1),_<1e-4&&(_=E),M<1e-4&&(M=E),u0.initNonuniformCatmullRom(f.x,d.x,m.x,h.x,_,E,M),c0.initNonuniformCatmullRom(f.y,d.y,m.y,h.y,_,E,M),f0.initNonuniformCatmullRom(f.z,d.z,m.z,h.z,_,E,M)}else this.curveType==="catmullrom"&&(u0.initCatmullRom(f.x,d.x,m.x,h.x,this.tension),c0.initCatmullRom(f.y,d.y,m.y,h.y,this.tension),f0.initCatmullRom(f.z,d.z,m.z,h.z,this.tension));return i.set(u0.calc(c),c0.calc(c),f0.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new O().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function t2(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,l=n*n,c=n*l;return(2*t-2*i+s+o)*c+(-3*t+3*i-2*s-o)*l+s*n+t}function TD(n,e){const t=1-n;return t*t*e}function CD(n,e){return 2*(1-n)*n*e}function AD(n,e){return n*n*e}function oc(n,e,t,i){return TD(n,e)+CD(n,t)+AD(n,i)}function RD(n,e){const t=1-n;return t*t*t*e}function PD(n,e){const t=1-n;return 3*t*t*n*e}function bD(n,e){return 3*(1-n)*n*n*e}function LD(n,e){return n*n*n*e}function ac(n,e,t,i,r){return RD(n,e)+PD(n,t)+bD(n,i)+LD(n,r)}class ky extends Mr{constructor(e=new pe,t=new pe,i=new pe,r=new pe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new pe){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(ac(e,r.x,s.x,o.x,l.x),ac(e,r.y,s.y,o.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class D3 extends Mr{constructor(e=new O,t=new O,i=new O,r=new O){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new O){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(ac(e,r.x,s.x,o.x,l.x),ac(e,r.y,s.y,o.y,l.y),ac(e,r.z,s.z,o.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class em extends Mr{constructor(e=new pe,t=new pe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new pe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new pe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class O3 extends Mr{constructor(e=new O,t=new O){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new O){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new O){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zy extends Mr{constructor(e=new pe,t=new pe,i=new pe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new pe){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(oc(e,r.x,s.x,o.x),oc(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class By extends Mr{constructor(e=new O,t=new O,i=new O){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new O){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(oc(e,r.x,s.x,o.x),oc(e,r.y,s.y,o.y),oc(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Hy extends Mr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new pe){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),l=s-o,c=r[o===0?o:o-1],f=r[o],h=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(t2(l,c.x,f.x,h.x,d.x),t2(l,c.y,f.y,h.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new pe().fromArray(r))}return this}}var Vy=Object.freeze({__proto__:null,ArcCurve:N3,CatmullRomCurve3:U3,CubicBezierCurve:ky,CubicBezierCurve3:D3,EllipseCurve:$p,LineCurve:em,LineCurve3:O3,QuadraticBezierCurve:zy,QuadraticBezierCurve3:By,SplineCurve:Hy});class F3 extends Mr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new em(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,l=this.curves[s],c=l.getLength(),f=c===0?0:1-o/c;return l.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(l);for(let f=0;f<c.length;f++){const h=c[f];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new Vy[r.type]().fromJSON(r))}return this}}class Fc extends F3{constructor(e){super(),this.type="Path",this.currentPoint=new pe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new em(this.currentPoint.clone(),new pe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new zy(this.currentPoint.clone(),new pe(e,t),new pe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const l=new ky(this.currentPoint.clone(),new pe(e,t),new pe(i,r),new pe(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Hy(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,l,c){const f=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+f,t+h,i,r,s,o,l,c),this}absellipse(e,t,i,r,s,o,l,c){const f=new $p(e,t,i,r,s,o,l,c);if(this.curves.length>0){const d=f.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(f);const h=f.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Kl extends ht{constructor(e=[new pe(0,-.5),new pe(.5,0),new pe(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=on(r,0,Math.PI*2);const s=[],o=[],l=[],c=[],f=[],h=1/t,d=new O,m=new pe,v=new O,_=new O,E=new O;let M=0,g=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:M=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,v.x=g*1,v.y=-M,v.z=g*0,E.copy(v),v.normalize(),c.push(v.x,v.y,v.z);break;case e.length-1:c.push(E.x,E.y,E.z);break;default:M=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,v.x=g*1,v.y=-M,v.z=g*0,_.copy(v),v.x+=E.x,v.y+=E.y,v.z+=E.z,v.normalize(),c.push(v.x,v.y,v.z),E.copy(_)}for(let x=0;x<=t;x++){const S=i+x*h*r,T=Math.sin(S),A=Math.cos(S);for(let P=0;P<=e.length-1;P++){d.x=e[P].x*T,d.y=e[P].y,d.z=e[P].x*A,o.push(d.x,d.y,d.z),m.x=x/t,m.y=P/(e.length-1),l.push(m.x,m.y);const L=c[3*P+0]*T,N=c[3*P+1],R=c[3*P+0]*A;f.push(L,N,R)}}for(let x=0;x<t;x++)for(let S=0;S<e.length-1;S++){const T=S+x*e.length,A=T,P=T+e.length,L=T+e.length+1,N=T+1;s.push(A,P,N),s.push(L,N,P)}this.setIndex(s),this.setAttribute("position",new He(o,3)),this.setAttribute("uv",new He(l,2)),this.setAttribute("normal",new He(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kl(e.points,e.segments,e.phiStart,e.phiLength)}}class rf extends Kl{constructor(e=1,t=1,i=4,r=8){const s=new Fc;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new rf(e.radius,e.length,e.capSegments,e.radialSegments)}}class sf extends ht{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],l=[],c=[],f=new O,h=new pe;o.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let d=0,m=3;d<=t;d++,m+=3){const v=i+d/t*r;f.x=e*Math.cos(v),f.y=e*Math.sin(v),o.push(f.x,f.y,f.z),l.push(0,0,1),h.x=(o[m]/e+1)/2,h.y=(o[m+1]/e+1)/2,c.push(h.x,h.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new He(o,3)),this.setAttribute("normal",new He(l,3)),this.setAttribute("uv",new He(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sf(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class da extends ht{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:c};const f=this;r=Math.floor(r),s=Math.floor(s);const h=[],d=[],m=[],v=[];let _=0;const E=[],M=i/2;let g=0;x(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(h),this.setAttribute("position",new He(d,3)),this.setAttribute("normal",new He(m,3)),this.setAttribute("uv",new He(v,2));function x(){const T=new O,A=new O;let P=0;const L=(t-e)/i;for(let N=0;N<=s;N++){const R=[],b=N/s,G=b*(t-e)+e;for(let J=0;J<=r;J++){const j=J/r,Z=j*c+l,$=Math.sin(Z),ae=Math.cos(Z);A.x=G*$,A.y=-b*i+M,A.z=G*ae,d.push(A.x,A.y,A.z),T.set($,L,ae).normalize(),m.push(T.x,T.y,T.z),v.push(j,1-b),R.push(_++)}E.push(R)}for(let N=0;N<r;N++)for(let R=0;R<s;R++){const b=E[R][N],G=E[R+1][N],J=E[R+1][N+1],j=E[R][N+1];h.push(b,G,j),h.push(G,J,j),P+=6}f.addGroup(g,P,0),g+=P}function S(T){const A=_,P=new pe,L=new O;let N=0;const R=T===!0?e:t,b=T===!0?1:-1;for(let J=1;J<=r;J++)d.push(0,M*b,0),m.push(0,b,0),v.push(.5,.5),_++;const G=_;for(let J=0;J<=r;J++){const Z=J/r*c+l,$=Math.cos(Z),ae=Math.sin(Z);L.x=R*ae,L.y=M*b,L.z=R*$,d.push(L.x,L.y,L.z),m.push(0,b,0),P.x=$*.5+.5,P.y=ae*.5*b+.5,v.push(P.x,P.y),_++}for(let J=0;J<r;J++){const j=A+J,Z=G+J;T===!0?h.push(Z,Z+1,j):h.push(Z+1,Z,j),N+=3}f.addGroup(g,N,T===!0?1:2),g+=N}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new da(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class of extends da{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,i,r,s,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new of(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class xs extends ht{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];l(r),f(i),h(),this.setAttribute("position",new He(s,3)),this.setAttribute("normal",new He(s.slice(),3)),this.setAttribute("uv",new He(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(x){const S=new O,T=new O,A=new O;for(let P=0;P<t.length;P+=3)v(t[P+0],S),v(t[P+1],T),v(t[P+2],A),c(S,T,A,x)}function c(x,S,T,A){const P=A+1,L=[];for(let N=0;N<=P;N++){L[N]=[];const R=x.clone().lerp(T,N/P),b=S.clone().lerp(T,N/P),G=P-N;for(let J=0;J<=G;J++)J===0&&N===P?L[N][J]=R:L[N][J]=R.clone().lerp(b,J/G)}for(let N=0;N<P;N++)for(let R=0;R<2*(P-N)-1;R++){const b=Math.floor(R/2);R%2===0?(m(L[N][b+1]),m(L[N+1][b]),m(L[N][b])):(m(L[N][b+1]),m(L[N+1][b+1]),m(L[N+1][b]))}}function f(x){const S=new O;for(let T=0;T<s.length;T+=3)S.x=s[T+0],S.y=s[T+1],S.z=s[T+2],S.normalize().multiplyScalar(x),s[T+0]=S.x,s[T+1]=S.y,s[T+2]=S.z}function h(){const x=new O;for(let S=0;S<s.length;S+=3){x.x=s[S+0],x.y=s[S+1],x.z=s[S+2];const T=M(x)/2/Math.PI+.5,A=g(x)/Math.PI+.5;o.push(T,1-A)}_(),d()}function d(){for(let x=0;x<o.length;x+=6){const S=o[x+0],T=o[x+2],A=o[x+4],P=Math.max(S,T,A),L=Math.min(S,T,A);P>.9&&L<.1&&(S<.2&&(o[x+0]+=1),T<.2&&(o[x+2]+=1),A<.2&&(o[x+4]+=1))}}function m(x){s.push(x.x,x.y,x.z)}function v(x,S){const T=x*3;S.x=e[T+0],S.y=e[T+1],S.z=e[T+2]}function _(){const x=new O,S=new O,T=new O,A=new O,P=new pe,L=new pe,N=new pe;for(let R=0,b=0;R<s.length;R+=9,b+=6){x.set(s[R+0],s[R+1],s[R+2]),S.set(s[R+3],s[R+4],s[R+5]),T.set(s[R+6],s[R+7],s[R+8]),P.set(o[b+0],o[b+1]),L.set(o[b+2],o[b+3]),N.set(o[b+4],o[b+5]),A.copy(x).add(S).add(T).divideScalar(3);const G=M(A);E(P,b+0,x,G),E(L,b+2,S,G),E(N,b+4,T,G)}}function E(x,S,T,A){A<0&&x.x===1&&(o[S]=x.x-1),T.x===0&&T.z===0&&(o[S]=A/2/Math.PI+.5)}function M(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xs(e.vertices,e.indices,e.radius,e.details)}}class af extends xs{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new af(e.radius,e.detail)}}const ad=new O,ld=new O,h0=new O,ud=new di;class k3 extends ht{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos($o*t),o=e.getIndex(),l=e.getAttribute("position"),c=o?o.count:l.count,f=[0,0,0],h=["a","b","c"],d=new Array(3),m={},v=[];for(let _=0;_<c;_+=3){o?(f[0]=o.getX(_),f[1]=o.getX(_+1),f[2]=o.getX(_+2)):(f[0]=_,f[1]=_+1,f[2]=_+2);const{a:E,b:M,c:g}=ud;if(E.fromBufferAttribute(l,f[0]),M.fromBufferAttribute(l,f[1]),g.fromBufferAttribute(l,f[2]),ud.getNormal(h0),d[0]=`${Math.round(E.x*r)},${Math.round(E.y*r)},${Math.round(E.z*r)}`,d[1]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,d[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let x=0;x<3;x++){const S=(x+1)%3,T=d[x],A=d[S],P=ud[h[x]],L=ud[h[S]],N=`${T}_${A}`,R=`${A}_${T}`;R in m&&m[R]?(h0.dot(m[R].normal)<=s&&(v.push(P.x,P.y,P.z),v.push(L.x,L.y,L.z)),m[R]=null):N in m||(m[N]={index0:f[x],index1:f[S],normal:h0.clone()})}}for(const _ in m)if(m[_]){const{index0:E,index1:M}=m[_];ad.fromBufferAttribute(l,E),ld.fromBufferAttribute(l,M),v.push(ad.x,ad.y,ad.z),v.push(ld.x,ld.y,ld.z)}this.setAttribute("position",new He(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class ta extends Fc{constructor(e){super(e),this.uuid=Ni(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Fc().fromJSON(r))}return this}}const ID={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=z3(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,c,f,h,d,m,v;if(i&&(s=FD(n,e,s,t)),n.length>80*t){l=f=n[0],c=h=n[1];for(let _=t;_<r;_+=t)d=n[_],m=n[_+1],d<l&&(l=d),m<c&&(c=m),d>f&&(f=d),m>h&&(h=m);v=Math.max(f-l,h-c),v=v!==0?32767/v:0}return kc(s,o,t,l,c,v,0),o}};function z3(n,e,t,i,r){let s,o;if(r===qD(n,e,t,i)>0)for(s=e;s<t;s+=i)o=n2(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=n2(s,n[s],n[s+1],o);return o&&tm(o,o.next)&&(Bc(o),o=o.next),o}function ua(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(tm(t,t.next)||Jt(t.prev,t,t.next)===0)){if(Bc(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function kc(n,e,t,i,r,s,o){if(!n)return;!o&&s&&VD(n,i,r,s);let l=n,c,f;for(;n.prev!==n.next;){if(c=n.prev,f=n.next,s?UD(n,i,r,s):ND(n)){e.push(c.i/t|0),e.push(n.i/t|0),e.push(f.i/t|0),Bc(n),n=f.next,l=f.next;continue}if(n=f,n===l){o?o===1?(n=DD(ua(n),e,t),kc(n,e,t,i,r,s,2)):o===2&&OD(n,e,t,i,r,s):kc(ua(n),e,t,i,r,s,1);break}}}function ND(n){const e=n.prev,t=n,i=n.next;if(Jt(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,l=e.y,c=t.y,f=i.y,h=r<s?r<o?r:o:s<o?s:o,d=l<c?l<f?l:f:c<f?c:f,m=r>s?r>o?r:o:s>o?s:o,v=l>c?l>f?l:f:c>f?c:f;let _=i.next;for(;_!==e;){if(_.x>=h&&_.x<=m&&_.y>=d&&_.y<=v&&_l(r,l,s,c,o,f,_.x,_.y)&&Jt(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function UD(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Jt(r,s,o)>=0)return!1;const l=r.x,c=s.x,f=o.x,h=r.y,d=s.y,m=o.y,v=l<c?l<f?l:f:c<f?c:f,_=h<d?h<m?h:m:d<m?d:m,E=l>c?l>f?l:f:c>f?c:f,M=h>d?h>m?h:m:d>m?d:m,g=r1(v,_,e,t,i),x=r1(E,M,e,t,i);let S=n.prevZ,T=n.nextZ;for(;S&&S.z>=g&&T&&T.z<=x;){if(S.x>=v&&S.x<=E&&S.y>=_&&S.y<=M&&S!==r&&S!==o&&_l(l,h,c,d,f,m,S.x,S.y)&&Jt(S.prev,S,S.next)>=0||(S=S.prevZ,T.x>=v&&T.x<=E&&T.y>=_&&T.y<=M&&T!==r&&T!==o&&_l(l,h,c,d,f,m,T.x,T.y)&&Jt(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;S&&S.z>=g;){if(S.x>=v&&S.x<=E&&S.y>=_&&S.y<=M&&S!==r&&S!==o&&_l(l,h,c,d,f,m,S.x,S.y)&&Jt(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;T&&T.z<=x;){if(T.x>=v&&T.x<=E&&T.y>=_&&T.y<=M&&T!==r&&T!==o&&_l(l,h,c,d,f,m,T.x,T.y)&&Jt(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function DD(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!tm(r,s)&&B3(r,i,i.next,s)&&zc(r,s)&&zc(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Bc(i),Bc(i.next),i=n=s),i=i.next}while(i!==n);return ua(i)}function OD(n,e,t,i,r,s){let o=n;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&XD(o,l)){let c=H3(o,l);o=ua(o,o.next),c=ua(c,c.next),kc(o,e,t,i,r,s,0),kc(c,e,t,i,r,s,0);return}l=l.next}o=o.next}while(o!==n)}function FD(n,e,t,i){const r=[];let s,o,l,c,f;for(s=0,o=e.length;s<o;s++)l=e[s]*i,c=s<o-1?e[s+1]*i:n.length,f=z3(n,l,c,i,!1),f===f.next&&(f.steiner=!0),r.push(WD(f));for(r.sort(kD),s=0;s<r.length;s++)t=zD(r[s],t);return t}function kD(n,e){return n.x-e.x}function zD(n,e){const t=BD(n,e);if(!t)return e;const i=H3(t,n);return ua(i,i.next),ua(t,t.next)}function BD(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const m=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=s&&m>i&&(i=m,r=t.x<t.next.x?t:t.next,m===s))return r}t=t.next}while(t!==e);if(!r)return null;const l=r,c=r.x,f=r.y;let h=1/0,d;t=r;do s>=t.x&&t.x>=c&&s!==t.x&&_l(o<f?s:i,o,c,f,o<f?i:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),zc(t,n)&&(d<h||d===h&&(t.x>r.x||t.x===r.x&&HD(r,t)))&&(r=t,h=d)),t=t.next;while(t!==l);return r}function HD(n,e){return Jt(n.prev,n,e.prev)<0&&Jt(e.next,n,n.next)<0}function VD(n,e,t,i){let r=n;do r.z===0&&(r.z=r1(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,GD(r)}function GD(n){let e,t,i,r,s,o,l,c,f=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,l=0,e=0;e<f&&(l++,i=i.nextZ,!!i);e++);for(c=f;l>0||c>0&&i;)l!==0&&(c===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,l--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,f*=2}while(o>1);return n}function r1(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function WD(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function _l(n,e,t,i,r,s,o,l){return(r-o)*(e-l)>=(n-o)*(s-l)&&(n-o)*(i-l)>=(t-o)*(e-l)&&(t-o)*(s-l)>=(r-o)*(i-l)}function XD(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!jD(n,e)&&(zc(n,e)&&zc(e,n)&&YD(n,e)&&(Jt(n.prev,n,e.prev)||Jt(n,e.prev,e))||tm(n,e)&&Jt(n.prev,n,n.next)>0&&Jt(e.prev,e,e.next)>0)}function Jt(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function tm(n,e){return n.x===e.x&&n.y===e.y}function B3(n,e,t,i){const r=fd(Jt(n,e,t)),s=fd(Jt(n,e,i)),o=fd(Jt(t,i,n)),l=fd(Jt(t,i,e));return!!(r!==s&&o!==l||r===0&&cd(n,t,e)||s===0&&cd(n,i,e)||o===0&&cd(t,n,i)||l===0&&cd(t,e,i))}function cd(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function fd(n){return n>0?1:n<0?-1:0}function jD(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&B3(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function zc(n,e){return Jt(n.prev,n,n.next)<0?Jt(n,e,n.next)>=0&&Jt(n,n.prev,e)>=0:Jt(n,e,n.prev)<0||Jt(n,n.next,e)<0}function YD(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function H3(n,e){const t=new s1(n.i,n.x,n.y),i=new s1(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function n2(n,e,t,i){const r=new s1(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Bc(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function s1(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function qD(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Vr{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Vr.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];i2(e),r2(i,e);let o=e.length;t.forEach(i2);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,r2(i,t[c]);const l=ID.triangulate(i,r);for(let c=0;c<l.length;c+=3)s.push(l.slice(c,c+3));return s}}function i2(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function r2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class lf extends ht{constructor(e=new ta([new pe(.5,.5),new pe(-.5,.5),new pe(-.5,-.5),new pe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let l=0,c=e.length;l<c;l++){const f=e[l];o(f)}this.setAttribute("position",new He(r,3)),this.setAttribute("uv",new He(s,2)),this.computeVertexNormals();function o(l){const c=[],f=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:v-.1,E=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:ZD;let S,T=!1,A,P,L,N;g&&(S=g.getSpacedPoints(h),T=!0,m=!1,A=g.computeFrenetFrames(h,!1),P=new O,L=new O,N=new O),m||(M=0,v=0,_=0,E=0);const R=l.extractPoints(f);let b=R.shape;const G=R.holes;if(!Vr.isClockWise(b)){b=b.reverse();for(let V=0,ge=G.length;V<ge;V++){const de=G[V];Vr.isClockWise(de)&&(G[V]=de.reverse())}}const j=Vr.triangulateShape(b,G),Z=b;for(let V=0,ge=G.length;V<ge;V++){const de=G[V];b=b.concat(de)}function $(V,ge,de){return ge||console.error("THREE.ExtrudeGeometry: vec does not exist"),V.clone().addScaledVector(ge,de)}const ae=b.length,ne=j.length;function U(V,ge,de){let Me,me,Ge;const Ue=V.x-ge.x,Oe=V.y-ge.y,et=de.x-V.x,xt=de.y-V.y,Xt=Ue*Ue+Oe*Oe,k=Ue*xt-Oe*et;if(Math.abs(k)>Number.EPSILON){const I=Math.sqrt(Xt),le=Math.sqrt(et*et+xt*xt),_e=ge.x-Oe/I,xe=ge.y+Ue/I,Ae=de.x-xt/le,We=de.y+et/le,Re=((Ae-_e)*xt-(We-xe)*et)/(Ue*xt-Oe*et);Me=_e+Ue*Re-V.x,me=xe+Oe*Re-V.y;const fe=Me*Me+me*me;if(fe<=2)return new pe(Me,me);Ge=Math.sqrt(fe/2)}else{let I=!1;Ue>Number.EPSILON?et>Number.EPSILON&&(I=!0):Ue<-Number.EPSILON?et<-Number.EPSILON&&(I=!0):Math.sign(Oe)===Math.sign(xt)&&(I=!0),I?(Me=-Oe,me=Ue,Ge=Math.sqrt(Xt)):(Me=Ue,me=Oe,Ge=Math.sqrt(Xt/2))}return new pe(Me/Ge,me/Ge)}const H=[];for(let V=0,ge=Z.length,de=ge-1,Me=V+1;V<ge;V++,de++,Me++)de===ge&&(de=0),Me===ge&&(Me=0),H[V]=U(Z[V],Z[de],Z[Me]);const z=[];let te,B=H.concat();for(let V=0,ge=G.length;V<ge;V++){const de=G[V];te=[];for(let Me=0,me=de.length,Ge=me-1,Ue=Me+1;Me<me;Me++,Ge++,Ue++)Ge===me&&(Ge=0),Ue===me&&(Ue=0),te[Me]=U(de[Me],de[Ge],de[Ue]);z.push(te),B=B.concat(te)}for(let V=0;V<M;V++){const ge=V/M,de=v*Math.cos(ge*Math.PI/2),Me=_*Math.sin(ge*Math.PI/2)+E;for(let me=0,Ge=Z.length;me<Ge;me++){const Ue=$(Z[me],H[me],Me);Ce(Ue.x,Ue.y,-de)}for(let me=0,Ge=G.length;me<Ge;me++){const Ue=G[me];te=z[me];for(let Oe=0,et=Ue.length;Oe<et;Oe++){const xt=$(Ue[Oe],te[Oe],Me);Ce(xt.x,xt.y,-de)}}}const he=_+E;for(let V=0;V<ae;V++){const ge=m?$(b[V],B[V],he):b[V];T?(L.copy(A.normals[0]).multiplyScalar(ge.x),P.copy(A.binormals[0]).multiplyScalar(ge.y),N.copy(S[0]).add(L).add(P),Ce(N.x,N.y,N.z)):Ce(ge.x,ge.y,0)}for(let V=1;V<=h;V++)for(let ge=0;ge<ae;ge++){const de=m?$(b[ge],B[ge],he):b[ge];T?(L.copy(A.normals[V]).multiplyScalar(de.x),P.copy(A.binormals[V]).multiplyScalar(de.y),N.copy(S[V]).add(L).add(P),Ce(N.x,N.y,N.z)):Ce(de.x,de.y,d/h*V)}for(let V=M-1;V>=0;V--){const ge=V/M,de=v*Math.cos(ge*Math.PI/2),Me=_*Math.sin(ge*Math.PI/2)+E;for(let me=0,Ge=Z.length;me<Ge;me++){const Ue=$(Z[me],H[me],Me);Ce(Ue.x,Ue.y,d+de)}for(let me=0,Ge=G.length;me<Ge;me++){const Ue=G[me];te=z[me];for(let Oe=0,et=Ue.length;Oe<et;Oe++){const xt=$(Ue[Oe],te[Oe],Me);T?Ce(xt.x,xt.y+S[h-1].y,S[h-1].x+de):Ce(xt.x,xt.y,d+de)}}}se(),Ee();function se(){const V=r.length/3;if(m){let ge=0,de=ae*ge;for(let Me=0;Me<ne;Me++){const me=j[Me];ot(me[2]+de,me[1]+de,me[0]+de)}ge=h+M*2,de=ae*ge;for(let Me=0;Me<ne;Me++){const me=j[Me];ot(me[0]+de,me[1]+de,me[2]+de)}}else{for(let ge=0;ge<ne;ge++){const de=j[ge];ot(de[2],de[1],de[0])}for(let ge=0;ge<ne;ge++){const de=j[ge];ot(de[0]+ae*h,de[1]+ae*h,de[2]+ae*h)}}i.addGroup(V,r.length/3-V,0)}function Ee(){const V=r.length/3;let ge=0;ve(Z,ge),ge+=Z.length;for(let de=0,Me=G.length;de<Me;de++){const me=G[de];ve(me,ge),ge+=me.length}i.addGroup(V,r.length/3-V,1)}function ve(V,ge){let de=V.length;for(;--de>=0;){const Me=de;let me=de-1;me<0&&(me=V.length-1);for(let Ge=0,Ue=h+M*2;Ge<Ue;Ge++){const Oe=ae*Ge,et=ae*(Ge+1),xt=ge+Me+Oe,Xt=ge+me+Oe,k=ge+me+et,I=ge+Me+et;$e(xt,Xt,k,I)}}}function Ce(V,ge,de){c.push(V),c.push(ge),c.push(de)}function ot(V,ge,de){Et(V),Et(ge),Et(de);const Me=r.length/3,me=x.generateTopUV(i,r,Me-3,Me-2,Me-1);Ye(me[0]),Ye(me[1]),Ye(me[2])}function $e(V,ge,de,Me){Et(V),Et(ge),Et(Me),Et(ge),Et(de),Et(Me);const me=r.length/3,Ge=x.generateSideWallUV(i,r,me-6,me-3,me-2,me-1);Ye(Ge[0]),Ye(Ge[1]),Ye(Ge[3]),Ye(Ge[1]),Ye(Ge[2]),Ye(Ge[3])}function Et(V){r.push(c[V*3+0]),r.push(c[V*3+1]),r.push(c[V*3+2])}function Ye(V){s.push(V.x),s.push(V.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return JD(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Vy[r.type]().fromJSON(r)),new lf(i,e.options)}}const ZD={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],l=e[i*3],c=e[i*3+1],f=e[r*3],h=e[r*3+1];return[new pe(s,o),new pe(l,c),new pe(f,h)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],l=e[t*3+1],c=e[t*3+2],f=e[i*3],h=e[i*3+1],d=e[i*3+2],m=e[r*3],v=e[r*3+1],_=e[r*3+2],E=e[s*3],M=e[s*3+1],g=e[s*3+2];return Math.abs(l-h)<Math.abs(o-f)?[new pe(o,1-c),new pe(f,1-d),new pe(m,1-_),new pe(E,1-g)]:[new pe(l,1-c),new pe(h,1-d),new pe(v,1-_),new pe(M,1-g)]}};function JD(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class uf extends xs{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uf(e.radius,e.detail)}}class Ql extends xs{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ql(e.radius,e.detail)}}class cf extends ht{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const l=[],c=[],f=[],h=[];let d=e;const m=(t-e)/r,v=new O,_=new pe;for(let E=0;E<=r;E++){for(let M=0;M<=i;M++){const g=s+M/i*o;v.x=d*Math.cos(g),v.y=d*Math.sin(g),c.push(v.x,v.y,v.z),f.push(0,0,1),_.x=(v.x/t+1)/2,_.y=(v.y/t+1)/2,h.push(_.x,_.y)}d+=m}for(let E=0;E<r;E++){const M=E*(i+1);for(let g=0;g<i;g++){const x=g+M,S=x,T=x+i+1,A=x+i+2,P=x+1;l.push(S,T,P),l.push(T,A,P)}}this.setIndex(l),this.setAttribute("position",new He(c,3)),this.setAttribute("normal",new He(f,3)),this.setAttribute("uv",new He(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cf(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class ff extends ht{constructor(e=new ta([new pe(0,.5),new pe(-.5,-.5),new pe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let l=0,c=0;if(Array.isArray(e)===!1)f(e);else for(let h=0;h<e.length;h++)f(e[h]),this.addGroup(l,c,h),l+=c,c=0;this.setIndex(i),this.setAttribute("position",new He(r,3)),this.setAttribute("normal",new He(s,3)),this.setAttribute("uv",new He(o,2));function f(h){const d=r.length/3,m=h.extractPoints(t);let v=m.shape;const _=m.holes;Vr.isClockWise(v)===!1&&(v=v.reverse());for(let M=0,g=_.length;M<g;M++){const x=_[M];Vr.isClockWise(x)===!0&&(_[M]=x.reverse())}const E=Vr.triangulateShape(v,_);for(let M=0,g=_.length;M<g;M++){const x=_[M];v=v.concat(x)}for(let M=0,g=v.length;M<g;M++){const x=v[M];r.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let M=0,g=E.length;M<g;M++){const x=E[M],S=x[0]+d,T=x[1]+d,A=x[2]+d;i.push(S,T,A),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return KD(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new ff(i,e.curveSegments)}}function KD(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class $l extends ht{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(o+l,Math.PI);let f=0;const h=[],d=new O,m=new O,v=[],_=[],E=[],M=[];for(let g=0;g<=i;g++){const x=[],S=g/i;let T=0;g===0&&o===0?T=.5/t:g===i&&c===Math.PI&&(T=-.5/t);for(let A=0;A<=t;A++){const P=A/t;d.x=-e*Math.cos(r+P*s)*Math.sin(o+S*l),d.y=e*Math.cos(o+S*l),d.z=e*Math.sin(r+P*s)*Math.sin(o+S*l),_.push(d.x,d.y,d.z),m.copy(d).normalize(),E.push(m.x,m.y,m.z),M.push(P+T,1-S),x.push(f++)}h.push(x)}for(let g=0;g<i;g++)for(let x=0;x<t;x++){const S=h[g][x+1],T=h[g][x],A=h[g+1][x],P=h[g+1][x+1];(g!==0||o>0)&&v.push(S,T,P),(g!==i-1||c<Math.PI)&&v.push(T,A,P)}this.setIndex(v),this.setAttribute("position",new He(_,3)),this.setAttribute("normal",new He(E,3)),this.setAttribute("uv",new He(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $l(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class hf extends xs{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hf(e.radius,e.detail)}}class df extends ht{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],c=[],f=[],h=new O,d=new O,m=new O;for(let v=0;v<=i;v++)for(let _=0;_<=r;_++){const E=_/r*s,M=v/i*Math.PI*2;d.x=(e+t*Math.cos(M))*Math.cos(E),d.y=(e+t*Math.cos(M))*Math.sin(E),d.z=t*Math.sin(M),l.push(d.x,d.y,d.z),h.x=e*Math.cos(E),h.y=e*Math.sin(E),m.subVectors(d,h).normalize(),c.push(m.x,m.y,m.z),f.push(_/r),f.push(v/i)}for(let v=1;v<=i;v++)for(let _=1;_<=r;_++){const E=(r+1)*v+_-1,M=(r+1)*(v-1)+_-1,g=(r+1)*(v-1)+_,x=(r+1)*v+_;o.push(E,M,x),o.push(M,g,x)}this.setIndex(o),this.setAttribute("position",new He(l,3)),this.setAttribute("normal",new He(c,3)),this.setAttribute("uv",new He(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new df(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class pf extends ht{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const l=[],c=[],f=[],h=[],d=new O,m=new O,v=new O,_=new O,E=new O,M=new O,g=new O;for(let S=0;S<=i;++S){const T=S/i*s*Math.PI*2;x(T,s,o,e,v),x(T+.01,s,o,e,_),M.subVectors(_,v),g.addVectors(_,v),E.crossVectors(M,g),g.crossVectors(E,M),E.normalize(),g.normalize();for(let A=0;A<=r;++A){const P=A/r*Math.PI*2,L=-t*Math.cos(P),N=t*Math.sin(P);d.x=v.x+(L*g.x+N*E.x),d.y=v.y+(L*g.y+N*E.y),d.z=v.z+(L*g.z+N*E.z),c.push(d.x,d.y,d.z),m.subVectors(d,v).normalize(),f.push(m.x,m.y,m.z),h.push(S/i),h.push(A/r)}}for(let S=1;S<=i;S++)for(let T=1;T<=r;T++){const A=(r+1)*(S-1)+(T-1),P=(r+1)*S+(T-1),L=(r+1)*S+T,N=(r+1)*(S-1)+T;l.push(A,P,N),l.push(P,L,N)}this.setIndex(l),this.setAttribute("position",new He(c,3)),this.setAttribute("normal",new He(f,3)),this.setAttribute("uv",new He(h,2));function x(S,T,A,P,L){const N=Math.cos(S),R=Math.sin(S),b=A/T*S,G=Math.cos(b);L.x=P*(2+G)*.5*N,L.y=P*(2+G)*R*.5,L.z=P*Math.sin(b)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pf(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class mf extends ht{constructor(e=new By(new O(-1,-1,0),new O(-1,1,0),new O(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new O,c=new O,f=new pe;let h=new O;const d=[],m=[],v=[],_=[];E(),this.setIndex(_),this.setAttribute("position",new He(d,3)),this.setAttribute("normal",new He(m,3)),this.setAttribute("uv",new He(v,2));function E(){for(let S=0;S<t;S++)M(S);M(s===!1?t:0),x(),g()}function M(S){h=e.getPointAt(S/t,h);const T=o.normals[S],A=o.binormals[S];for(let P=0;P<=r;P++){const L=P/r*Math.PI*2,N=Math.sin(L),R=-Math.cos(L);c.x=R*T.x+N*A.x,c.y=R*T.y+N*A.y,c.z=R*T.z+N*A.z,c.normalize(),m.push(c.x,c.y,c.z),l.x=h.x+i*c.x,l.y=h.y+i*c.y,l.z=h.z+i*c.z,d.push(l.x,l.y,l.z)}}function g(){for(let S=1;S<=t;S++)for(let T=1;T<=r;T++){const A=(r+1)*(S-1)+(T-1),P=(r+1)*S+(T-1),L=(r+1)*S+T,N=(r+1)*(S-1)+T;_.push(A,P,N),_.push(P,L,N)}}function x(){for(let S=0;S<=t;S++)for(let T=0;T<=r;T++)f.x=S/t,f.y=T/r,v.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new mf(new Vy[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class V3 extends ht{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new O,s=new O;if(e.index!==null){const o=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,h=c.length;f<h;++f){const d=c[f],m=d.start,v=d.count;for(let _=m,E=m+v;_<E;_+=3)for(let M=0;M<3;M++){const g=l.getX(_+M),x=l.getX(_+(M+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,x),s2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,c=o.count/3;l<c;l++)for(let f=0;f<3;f++){const h=3*l+f,d=3*l+(f+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,d),s2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new He(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function s2(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var o2=Object.freeze({__proto__:null,BoxGeometry:vo,CapsuleGeometry:rf,CircleGeometry:sf,ConeGeometry:of,CylinderGeometry:da,DodecahedronGeometry:af,EdgesGeometry:k3,ExtrudeGeometry:lf,IcosahedronGeometry:uf,LatheGeometry:Kl,OctahedronGeometry:Ql,PlaneGeometry:Zl,PolyhedronGeometry:xs,RingGeometry:cf,ShapeGeometry:ff,SphereGeometry:$l,TetrahedronGeometry:hf,TorusGeometry:df,TorusKnotGeometry:pf,TubeGeometry:mf,WireframeGeometry:V3});class G3 extends kn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ne(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class W3 extends Ui{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Gy extends kn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ne(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=mo,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class X3 extends Gy{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new pe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return on(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ne(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ne(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ne(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class j3 extends kn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ne(16777215),this.specular=new Ne(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=mo,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Qc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Y3 extends kn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ne(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=mo,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class q3 extends kn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=mo,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Z3 extends kn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=mo,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Qc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class J3 extends kn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ne(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=mo,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class K3 extends ai{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Zi(n,e,t){return Wy(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function qo(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function Wy(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Q3(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function o1(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const l=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[l+c]}return r}function Xy(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function QD(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const f=s.tracks[c],h=f.getValueSize(),d=[],m=[];for(let v=0;v<f.times.length;++v){const _=f.times[v]*r;if(!(_<t||_>=i)){d.push(f.times[v]);for(let E=0;E<h;++E)m.push(f.values[v*h+E])}}d.length!==0&&(f.times=qo(d,f.times.constructor),f.values=qo(m,f.values.constructor),o.push(f))}s.tracks=o;let l=1/0;for(let c=0;c<s.tracks.length;++c)l>s.tracks[c].times[0]&&(l=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*l);return s.resetDuration(),s}function $D(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const l=t.tracks[o],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const f=n.tracks.find(function(g){return g.name===l.name&&g.ValueTypeName===c});if(f===void 0)continue;let h=0;const d=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let m=0;const v=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);const _=l.times.length-1;let E;if(s<=l.times[0]){const g=h,x=d-h;E=Zi(l.values,g,x)}else if(s>=l.times[_]){const g=_*d+h,x=g+d-h;E=Zi(l.values,g,x)}else{const g=l.createInterpolant(),x=h,S=d-h;g.evaluate(s),E=Zi(g.resultBuffer,x,S)}c==="quaternion"&&new _i().fromArray(E).normalize().conjugate().toArray(E);const M=f.times.length;for(let g=0;g<M;++g){const x=g*v+m;if(c==="quaternion")_i.multiplyQuaternionsFlat(f.values,x,E,0,f.values,x);else{const S=v-m*2;for(let T=0;T<S;++T)f.values[x+T]-=E[T]}}}return n.blendMode=Sy,n}const e8={arraySlice:Zi,convertArray:qo,isTypedArray:Wy,getKeyframeOrder:Q3,sortedArray:o1,flattenJSON:Xy,subclip:QD,makeClipAdditive:$D};class gf{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let l=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(i=2,s=l);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const l=i+o>>>1;e<t[l]?o=l:i=l+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class $3 extends gf{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Xo,endingEnd:Xo}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,l=r[s],c=r[o];if(l===void 0)switch(this.getSettings_().endingStart){case jo:s=e,l=2*t-i;break;case Nc:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=i}if(c===void 0)switch(this.getSettings_().endingEnd){case jo:o=e,c=2*i-t;break;case Nc:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const f=(i-t)*.5,h=this.valueSize;this._weightPrev=f/(t-l),this._weightNext=f/(c-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,h=this._offsetPrev,d=this._offsetNext,m=this._weightPrev,v=this._weightNext,_=(i-t)/(r-t),E=_*_,M=E*_,g=-m*M+2*m*E-m*_,x=(1+m)*M+(-1.5-2*m)*E+(-.5+m)*_+1,S=(-1-v)*M+(1.5+v)*E+.5*_,T=v*M-v*E;for(let A=0;A!==l;++A)s[A]=g*o[h+A]+x*o[f+A]+S*o[c+A]+T*o[d+A];return s}}class jy extends gf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,h=(i-t)/(r-t),d=1-h;for(let m=0;m!==l;++m)s[m]=o[f+m]*d+o[c+m]*h;return s}}class eC extends gf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Er{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=qo(t,this.TimeBufferType),this.values=qo(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:qo(e.times,Array),values:qo(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new eC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new jy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new $3(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Lc:t=this.InterpolantFactoryMethodDiscrete;break;case Ic:t=this.InterpolantFactoryMethodLinear;break;case kd:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Lc;case this.InterpolantFactoryMethodLinear:return Ic;case this.InterpolantFactoryMethodSmooth:return kd}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=Zi(i,s,o),this.values=Zi(this.values,s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const c=i[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,o),e=!1;break}o=c}if(r!==void 0&&Wy(r))for(let l=0,c=r.length;l!==c;++l){const f=r[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),e=!1;break}}return e}optimize(){const e=Zi(this.times),t=Zi(this.values),i=this.getValueSize(),r=this.getInterpolation()===kd,s=e.length-1;let o=1;for(let l=1;l<s;++l){let c=!1;const f=e[l],h=e[l+1];if(f!==h&&(l!==1||f!==e[0]))if(r)c=!0;else{const d=l*i,m=d-i,v=d+i;for(let _=0;_!==i;++_){const E=t[d+_];if(E!==t[m+_]||E!==t[v+_]){c=!0;break}}}if(c){if(l!==o){e[o]=e[l];const d=l*i,m=o*i;for(let v=0;v!==i;++v)t[m+v]=t[d+v]}++o}}if(s>0){e[o]=e[s];for(let l=s*i,c=o*i,f=0;f!==i;++f)t[c+f]=t[l+f];++o}return o!==e.length?(this.times=Zi(e,0,o),this.values=Zi(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=Zi(this.times,0),t=Zi(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Er.prototype.TimeBufferType=Float32Array;Er.prototype.ValueBufferType=Float32Array;Er.prototype.DefaultInterpolation=Ic;class pa extends Er{}pa.prototype.ValueTypeName="bool";pa.prototype.ValueBufferType=Array;pa.prototype.DefaultInterpolation=Lc;pa.prototype.InterpolantFactoryMethodLinear=void 0;pa.prototype.InterpolantFactoryMethodSmooth=void 0;class Yy extends Er{}Yy.prototype.ValueTypeName="color";class Hc extends Er{}Hc.prototype.ValueTypeName="number";class tC extends gf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=(i-t)/(r-t);let f=e*l;for(let h=f+l;f!==h;f+=4)_i.slerpFlat(s,0,o,f-l,o,f,c);return s}}class eu extends Er{InterpolantFactoryMethodLinear(e){return new tC(this.times,this.values,this.getValueSize(),e)}}eu.prototype.ValueTypeName="quaternion";eu.prototype.DefaultInterpolation=Ic;eu.prototype.InterpolantFactoryMethodSmooth=void 0;class ma extends Er{}ma.prototype.ValueTypeName="string";ma.prototype.ValueBufferType=Array;ma.prototype.DefaultInterpolation=Lc;ma.prototype.InterpolantFactoryMethodLinear=void 0;ma.prototype.InterpolantFactoryMethodSmooth=void 0;class Vc extends Er{}Vc.prototype.ValueTypeName="vector";class Gc{constructor(e,t=-1,i,r=Xp){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ni(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,l=i.length;o!==l;++o)t.push(n8(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Er.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let l=0;l<s;l++){let c=[],f=[];c.push((l+s-1)%s,l,(l+1)%s),f.push(0,1,0);const h=Q3(c);c=o1(c,1,h),f=o1(f,1,h),!r&&c[0]===0&&(c.push(s),f.push(f[0])),o.push(new Hc(".morphTargetInfluences["+t[l].name+"]",c,f).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const f=e[l],h=f.name.match(s);if(h&&h.length>1){const d=h[1];let m=r[d];m||(r[d]=m=[]),m.push(f)}}const o=[];for(const l in r)o.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,m,v,_,E){if(v.length!==0){const M=[],g=[];Xy(v,M,g,_),M.length!==0&&E.push(new d(m,M,g))}},r=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let c=e.length||-1;const f=e.hierarchy||[];for(let d=0;d<f.length;d++){const m=f[d].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const v={};let _;for(_=0;_<m.length;_++)if(m[_].morphTargets)for(let E=0;E<m[_].morphTargets.length;E++)v[m[_].morphTargets[E]]=-1;for(const E in v){const M=[],g=[];for(let x=0;x!==m[_].morphTargets.length;++x){const S=m[_];M.push(S.time),g.push(S.morphTarget===E?1:0)}r.push(new Hc(".morphTargetInfluence["+E+"]",M,g))}c=v.length*o}else{const v=".bones["+t[d].name+"]";i(Vc,v+".position",m,"pos",r),i(eu,v+".quaternion",m,"rot",r),i(Vc,v+".scale",m,"scl",r)}}return r.length===0?null:new this(s,c,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function t8(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Hc;case"vector":case"vector2":case"vector3":case"vector4":return Vc;case"color":return Yy;case"quaternion":return eu;case"bool":case"boolean":return pa;case"string":return ma}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function n8(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=t8(n.type);if(n.times===void 0){const t=[],i=[];Xy(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ca={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class qy{constructor(e,t,i){const r=this;let s=!1,o=0,l=0,c;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(h){l++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,l),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,l),o===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return c?c(h):h},this.setURLModifier=function(h){return c=h,this},this.addHandler=function(h,d){return f.push(h,d),this},this.removeHandler=function(h){const d=f.indexOf(h);return d!==-1&&f.splice(d,2),this},this.getHandler=function(h){for(let d=0,m=f.length;d<m;d+=2){const v=f[d],_=f[d+1];if(v.global&&(v.lastIndex=0),v.test(h))return _}return null}}}const nC=new qy;class ki{constructor(e){this.manager=e!==void 0?e:nC,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const is={};class i8 extends Error{constructor(e,t){super(e),this.response=t}}class vs extends ki{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ca.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(is[e]!==void 0){is[e].push({onLoad:t,onProgress:i,onError:r});return}is[e]=[],is[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(o).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const h=is[e],d=f.body.getReader(),m=f.headers.get("Content-Length")||f.headers.get("X-File-Size"),v=m?parseInt(m):0,_=v!==0;let E=0;const M=new ReadableStream({start(g){x();function x(){d.read().then(({done:S,value:T})=>{if(S)g.close();else{E+=T.byteLength;const A=new ProgressEvent("progress",{lengthComputable:_,loaded:E,total:v});for(let P=0,L=h.length;P<L;P++){const N=h[P];N.onProgress&&N.onProgress(A)}g.enqueue(T),x()}})}}});return new Response(M)}else throw new i8(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(c){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(h=>new DOMParser().parseFromString(h,l));case"json":return f.json();default:if(l===void 0)return f.text();{const d=/charset="?([^;"\s]*)"?/i.exec(l),m=d&&d[1]?d[1].toLowerCase():void 0,v=new TextDecoder(m);return f.arrayBuffer().then(_=>v.decode(_))}}}).then(f=>{ca.add(e,f);const h=is[e];delete is[e];for(let d=0,m=h.length;d<m;d++){const v=h[d];v.onLoad&&v.onLoad(f)}}).catch(f=>{const h=is[e];if(h===void 0)throw this.manager.itemError(e),f;delete is[e];for(let d=0,m=h.length;d<m;d++){const v=h[d];v.onError&&v.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class r8 extends ki{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new vs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Gc.parse(e[i]);t.push(r)}return t}}class s8 extends ki{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],l=new Oy,c=new vs(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let f=0;function h(d){c.load(e[d],function(m){const v=s.parse(m,!0);o[d]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},f+=1,f===6&&(v.mipmapCount===1&&(l.minFilter=hn),l.image=o,l.format=v.format,l.needsUpdate=!0,t&&t(l))},i,r)}if(Array.isArray(e))for(let d=0,m=e.length;d<m;++d)h(d);else c.load(e,function(d){const m=s.parse(d,!0);if(m.isCubemap){const v=m.mipmaps.length/m.mipmapCount;for(let _=0;_<v;_++){o[_]={mipmaps:[]};for(let E=0;E<m.mipmapCount;E++)o[_].mipmaps.push(m.mipmaps[_*m.mipmapCount+E]),o[_].format=m.format,o[_].width=m.width,o[_].height=m.height}l.image=o}else l.image.width=m.width,l.image.height=m.height,l.mipmaps=m.mipmaps;m.mipmapCount===1&&(l.minFilter=hn),l.format=m.format,l.needsUpdate=!0,t&&t(l)},i,r);return l}}class Wc extends ki{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ca.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l=Oc("img");function c(){h(),ca.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(d){h(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){l.removeEventListener("load",c,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class o8 extends ki{constructor(e){super(e)}load(e,t,i,r){const s=new tf;s.colorSpace=ft;const o=new Wc(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function c(f){o.load(e[f],function(h){s.images[f]=h,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let f=0;f<e.length;++f)c(f);return s}}class a8 extends ki{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Pl,l=new vs(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(c){const f=s.parse(c);f&&(f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:Jn,o.wrapT=f.wrapT!==void 0?f.wrapT:Jn,o.magFilter=f.magFilter!==void 0?f.magFilter:hn,o.minFilter=f.minFilter!==void 0?f.minFilter:hn,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0?o.colorSpace=f.colorSpace:f.encoding!==void 0&&(o.encoding=f.encoding),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=lo),f.mipmapCount===1&&(o.minFilter=hn),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,t&&t(o,f))},i,r),o}}class a1 extends ki{constructor(e){super(e)}load(e,t,i,r){const s=new an,o=new Wc(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class yo extends Pt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ne(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class iC extends yo{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Pt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ne(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const d0=new ct,a2=new O,l2=new O;class Zy{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pe(512,512),this.map=null,this.mapPass=null,this.matrix=new ct,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Yp,this._frameExtents=new pe(1,1),this._viewportCount=1,this._viewports=[new It(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;a2.setFromMatrixPosition(e.matrixWorld),t.position.copy(a2),l2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(l2),t.updateMatrixWorld(),d0.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(d0),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(d0)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class l8 extends Zy{constructor(){super(new bn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=kl*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class rC extends yo{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Pt.DEFAULT_UP),this.updateMatrix(),this.target=new Pt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new l8}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const u2=new ct,ku=new O,p0=new O;class u8 extends Zy{constructor(){super(new bn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new pe(4,2),this._viewportCount=6,this._viewports=[new It(2,1,1,1),new It(0,1,1,1),new It(3,1,1,1),new It(1,1,1,1),new It(3,0,1,1),new It(1,0,1,1)],this._cubeDirections=[new O(1,0,0),new O(-1,0,0),new O(0,0,1),new O(0,0,-1),new O(0,1,0),new O(0,-1,0)],this._cubeUps=[new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,0,1),new O(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),ku.setFromMatrixPosition(e.matrixWorld),i.position.copy(ku),p0.copy(i.position),p0.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(p0),i.updateMatrixWorld(),r.makeTranslation(-ku.x,-ku.y,-ku.z),u2.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(u2)}}class sC extends yo{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new u8}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class c8 extends Zy{constructor(){super(new nf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class oC extends yo{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Pt.DEFAULT_UP),this.updateMatrix(),this.target=new Pt,this.shadow=new c8}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class aC extends yo{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class lC extends yo{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class uC{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new O)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class nm extends yo{constructor(e=new uC,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class im extends ki{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new vs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=im.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ne().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Ne().setHex(o.value);break;case"v2":r.uniforms[s].value=new pe().fromArray(o.value);break;case"v3":r.uniforms[s].value=new O().fromArray(o.value);break;case"v4":r.uniforms[s].value=new It().fromArray(o.value);break;case"m3":r.uniforms[s].value=new gt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new ct().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new pe().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new pe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:G3,SpriteMaterial:Ny,RawShaderMaterial:W3,ShaderMaterial:Ui,PointsMaterial:Dy,MeshPhysicalMaterial:X3,MeshStandardMaterial:Gy,MeshPhongMaterial:j3,MeshToonMaterial:Y3,MeshNormalMaterial:q3,MeshLambertMaterial:Z3,MeshDepthMaterial:by,MeshDistanceMaterial:Ly,MeshBasicMaterial:go,MeshMatcapMaterial:J3,LineDashedMaterial:K3,LineBasicMaterial:ai,Material:kn};return new t[e]}}class l1{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class cC extends ht{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class fC extends ki{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new vs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(v,_){if(t[_]!==void 0)return t[_];const M=v.interleavedBuffers[_],g=s(v,M.buffer),x=gl(M.type,g),S=new Kp(x,M.stride);return S.uuid=M.uuid,t[_]=S,S}function s(v,_){if(i[_]!==void 0)return i[_];const M=v.arrayBuffers[_],g=new Uint32Array(M).buffer;return i[_]=g,g}const o=e.isInstancedBufferGeometry?new cC:new ht,l=e.data.index;if(l!==void 0){const v=gl(l.type,l.array);o.setIndex(new Ft(v,1))}const c=e.data.attributes;for(const v in c){const _=c[v];let E;if(_.isInterleavedBufferAttribute){const M=r(e.data,_.data);E=new la(M,_.itemSize,_.offset,_.normalized)}else{const M=gl(_.type,_.array),g=_.isInstancedBufferAttribute?Bl:Ft;E=new g(M,_.itemSize,_.normalized)}_.name!==void 0&&(E.name=_.name),_.usage!==void 0&&E.setUsage(_.usage),_.updateRange!==void 0&&(E.updateRange.offset=_.updateRange.offset,E.updateRange.count=_.updateRange.count),o.setAttribute(v,E)}const f=e.data.morphAttributes;if(f)for(const v in f){const _=f[v],E=[];for(let M=0,g=_.length;M<g;M++){const x=_[M];let S;if(x.isInterleavedBufferAttribute){const T=r(e.data,x.data);S=new la(T,x.itemSize,x.offset,x.normalized)}else{const T=gl(x.type,x.array);S=new Ft(T,x.itemSize,x.normalized)}x.name!==void 0&&(S.name=x.name),E.push(S)}o.morphAttributes[v]=E}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let v=0,_=d.length;v!==_;++v){const E=d[v];o.addGroup(E.start,E.count,E.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const v=new O;m.center!==void 0&&v.fromArray(m.center),o.boundingSphere=new Sr(v,m.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class f8 extends ki{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?l1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new vs(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let f=null;try{f=JSON.parse(c)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const h=f.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?l1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new vs(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),l=JSON.parse(o),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(f)}),l=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,s,c,l,i),h=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,h),t!==void 0){let d=!1;for(const m in o)if(o[m].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,r,l,o,t),f=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,f),c}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new ta().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=new Qp().fromJSON(e[s],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new fC;for(let s=0,o=e.length;s<o;s++){let l;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(c);break;default:c.type in o2?l=o2[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),i[c.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new im;s.setTextures(t);for(let o=0,l=e.length;o<l;o++){const c=e[o];i[c.uuid]===void 0&&(i[c.uuid]=s.parse(c)),r[c.uuid]=i[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Gc.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(c){return i.manager.itemStart(c),s.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const f=c,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return o(h)}else return c.data?{data:gl(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new qy(t);s=new Wc(c),s.setCrossOrigin(this.crossOrigin);for(let f=0,h=e.length;f<h;f++){const d=e[f],m=d.url;if(Array.isArray(m)){const v=[];for(let _=0,E=m.length;_<E;_++){const M=m[_],g=l(M);g!==null&&(g instanceof HTMLImageElement?v.push(g):v.push(new Pl(g.data,g.width,g.height)))}r[d.uuid]=new Yo(v)}else{const v=l(d.url);r[d.uuid]=new Yo(v)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const l=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(c)}else return o.data?{data:gl(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Wc(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const c=e[o],f=c.url;if(Array.isArray(f)){const h=[];for(let d=0,m=f.length;d<m;d++){const v=f[d],_=await s(v);_!==null&&(_ instanceof HTMLImageElement?h.push(_):h.push(new Pl(_.data,_.width,_.height)))}i[c.uuid]=new Yo(h)}else{const h=await s(c.url);i[c.uuid]=new Yo(h)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=t[l.image],f=c.data;let h;Array.isArray(f)?(h=new tf,f.length===6&&(h.needsUpdate=!0)):(f&&f.data?h=new Pl:h=new an,f&&(h.needsUpdate=!0)),h.source=c,h.uuid=l.uuid,l.name!==void 0&&(h.name=l.name),l.mapping!==void 0&&(h.mapping=i(l.mapping,h8)),l.channel!==void 0&&(h.channel=l.channel),l.offset!==void 0&&h.offset.fromArray(l.offset),l.repeat!==void 0&&h.repeat.fromArray(l.repeat),l.center!==void 0&&h.center.fromArray(l.center),l.rotation!==void 0&&(h.rotation=l.rotation),l.wrap!==void 0&&(h.wrapS=i(l.wrap[0],c2),h.wrapT=i(l.wrap[1],c2)),l.format!==void 0&&(h.format=l.format),l.internalFormat!==void 0&&(h.internalFormat=l.internalFormat),l.type!==void 0&&(h.type=l.type),l.colorSpace!==void 0&&(h.colorSpace=l.colorSpace),l.encoding!==void 0&&(h.encoding=l.encoding),l.minFilter!==void 0&&(h.minFilter=i(l.minFilter,f2)),l.magFilter!==void 0&&(h.magFilter=i(l.magFilter,f2)),l.anisotropy!==void 0&&(h.anisotropy=l.anisotropy),l.flipY!==void 0&&(h.flipY=l.flipY),l.generateMipmaps!==void 0&&(h.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(h.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(h.compareFunction=l.compareFunction),l.userData!==void 0&&(h.userData=l.userData),r[l.uuid]=h}return r}parseObject(e,t,i,r,s){let o;function l(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function c(m){if(m!==void 0){if(Array.isArray(m)){const v=[];for(let _=0,E=m.length;_<E;_++){const M=m[_];i[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),v.push(i[M])}return v}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function f(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let h,d;switch(e.type){case"Scene":o=new _p,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ne(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Jp(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Zp(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new bn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new nf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new aC(e.color,e.intensity);break;case"DirectionalLight":o=new oC(e.color,e.intensity);break;case"PointLight":o=new sC(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new lC(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new rC(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new iC(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new nm().fromJSON(e);break;case"SkinnedMesh":h=l(e.geometry),d=c(e.material),o=new P3(h,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=l(e.geometry),d=c(e.material),o=new Dn(h,d);break;case"InstancedMesh":h=l(e.geometry),d=c(e.material);const m=e.count,v=e.instanceMatrix,_=e.instanceColor;o=new b3(h,d,m),o.instanceMatrix=new Bl(new Float32Array(v.array),16),_!==void 0&&(o.instanceColor=new Bl(new Float32Array(_.array),_.itemSize));break;case"LOD":o=new R3;break;case"Line":o=new uo(l(e.geometry),c(e.material));break;case"LineLoop":o=new L3(l(e.geometry),c(e.material));break;case"LineSegments":o=new Wr(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new I3(l(e.geometry),c(e.material));break;case"Sprite":o=new A3(c(e.material));break;case"Group":o=new yl;break;case"Bone":o=new Uy;break;default:o=new Pt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let v=0;v<m.length;v++)o.add(this.parseObject(m[v],t,i,r,s))}if(e.animations!==void 0){const m=e.animations;for(let v=0;v<m.length;v++){const _=m[v];o.animations.push(s[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let v=0;v<m.length;v++){const _=m[v],E=o.getObjectByProperty("uuid",_.object);E!==void 0&&o.addLevel(E,_.distance,_.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const h8={UVMapping:Gp,CubeReflectionMapping:oo,CubeRefractionMapping:ao,EquirectangularReflectionMapping:Ac,EquirectangularRefractionMapping:Rc,CubeUVReflectionMapping:Yl},c2={RepeatWrapping:Pc,ClampToEdgeWrapping:Jn,MirroredRepeatWrapping:bc},f2={NearestFilter:cn,NearestMipmapNearestFilter:gp,NearestMipmapLinearFilter:ic,LinearFilter:hn,LinearMipmapNearestFilter:py,LinearMipmapLinearFilter:lo};class d8 extends ki{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ca.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,fetch(e,l).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){ca.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let hd;class Jy{static getContext(){return hd===void 0&&(hd=new(window.AudioContext||window.webkitAudioContext)),hd}static setContext(e){hd=e}}class p8 extends ki{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new vs(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{const f=c.slice(0);Jy.getContext().decodeAudioData(f,function(d){t(d)},l)}catch(f){l(f)}},i,r);function l(c){r?r(c):console.error(c),s.manager.itemError(e)}}}class m8 extends nm{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new Ne().set(e),s=new Ne().set(t),o=new O(r.r,r.g,r.b),l=new O(s.r,s.g,s.b),c=Math.sqrt(Math.PI),f=c*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(l).multiplyScalar(c),this.sh.coefficients[1].copy(o).sub(l).multiplyScalar(f)}}class g8 extends nm{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new Ne().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const h2=new ct,d2=new ct,Io=new ct;class v8{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new bn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new bn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Io.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan($o*t.fov*.5)/t.zoom;let l,c;d2.elements[12]=-r,h2.elements[12]=r,l=-o*t.aspect+s,c=o*t.aspect+s,Io.elements[0]=2*t.near/(c-l),Io.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(Io),l=-o*t.aspect-s,c=o*t.aspect-s,Io.elements[0]=2*t.near/(c-l),Io.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(Io)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(d2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(h2)}}class Ky{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=p2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=p2();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function p2(){return(typeof performance>"u"?Date:performance).now()}const No=new O,m2=new _i,y8=new O,Uo=new O;class _8 extends Pt{constructor(){super(),this.type="AudioListener",this.context=Jy.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Ky}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(No,m2,y8),Uo.set(0,0,-1).applyQuaternion(m2),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(No.x,r),t.positionY.linearRampToValueAtTime(No.y,r),t.positionZ.linearRampToValueAtTime(No.z,r),t.forwardX.linearRampToValueAtTime(Uo.x,r),t.forwardY.linearRampToValueAtTime(Uo.y,r),t.forwardZ.linearRampToValueAtTime(Uo.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(No.x,No.y,No.z),t.setOrientation(Uo.x,Uo.y,Uo.z,i.x,i.y,i.z)}}class hC extends Pt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Do=new O,g2=new _i,x8=new O,Oo=new O;class S8 extends hC{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Do,g2,x8),Oo.set(0,0,1).applyQuaternion(g2);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Do.x,i),t.positionY.linearRampToValueAtTime(Do.y,i),t.positionZ.linearRampToValueAtTime(Do.z,i),t.orientationX.linearRampToValueAtTime(Oo.x,i),t.orientationY.linearRampToValueAtTime(Oo.y,i),t.orientationZ.linearRampToValueAtTime(Oo.z,i)}else t.setPosition(Do.x,Do.y,Do.z),t.setOrientation(Oo.x,Oo.y,Oo.z)}}class M8{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class dC{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==r;++l)i[s+l]=i[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(i,s,0,l,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(i,r,c,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,f=t+t;c!==f;++c)if(i[c]!==i[c+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){_i.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;_i.multiplyQuaternionsFlat(e,o,e,t,e,i),_i.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let l=0;l!==s;++l){const c=t+l;e[c]=e[c]*o+e[i+l]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[i+o]*r}}}const Qy="\\[\\]\\.:\\/",E8=new RegExp("["+Qy+"]","g"),$y="[^"+Qy+"]",w8="[^"+Qy.replace("\\.","")+"]",T8=/((?:WC+[\/:])*)/.source.replace("WC",$y),C8=/(WCOD+)?/.source.replace("WCOD",w8),A8=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",$y),R8=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",$y),P8=new RegExp("^"+T8+C8+A8+R8+"$"),b8=["material","materials","bones","map"];class L8{constructor(e,t,i){const r=i||wt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class wt{constructor(e,t,i){this.path=t,this.parsedPath=i||wt.parseTrackName(t),this.node=wt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new wt.Composite(e,t,i):new wt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(E8,"")}static parseTrackName(e){const t=P8.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);b8.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const c=i(l.children);if(c)return c}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=wt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===f){f=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[r];if(o===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}wt.Composite=L8;wt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};wt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};wt.prototype.GetterByBindingType=[wt.prototype._getValue_direct,wt.prototype._getValue_array,wt.prototype._getValue_arrayElement,wt.prototype._getValue_toArray];wt.prototype.SetterByBindingTypeAndVersioning=[[wt.prototype._setValue_direct,wt.prototype._setValue_direct_setNeedsUpdate,wt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[wt.prototype._setValue_array,wt.prototype._setValue_array_setNeedsUpdate,wt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[wt.prototype._setValue_arrayElement,wt.prototype._setValue_arrayElement_setNeedsUpdate,wt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[wt.prototype._setValue_fromArray,wt.prototype._setValue_fromArray_setNeedsUpdate,wt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class I8{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ni(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let l,c=e.length,f=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const m=arguments[h],v=m.uuid;let _=t[v];if(_===void 0){_=c++,t[v]=_,e.push(m);for(let E=0,M=o;E!==M;++E)s[E].push(new wt(m,i[E],r[E]))}else if(_<f){l=e[_];const E=--f,M=e[E];t[M.uuid]=_,e[_]=M,t[v]=E,e[E]=m;for(let g=0,x=o;g!==x;++g){const S=s[g],T=S[E];let A=S[_];S[_]=T,A===void 0&&(A=new wt(m,i[g],r[g])),S[E]=A}}else e[_]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],f=c.uuid,h=t[f];if(h!==void 0&&h>=s){const d=s++,m=e[d];t[m.uuid]=h,e[h]=m,t[f]=d,e[d]=c;for(let v=0,_=r;v!==_;++v){const E=i[v],M=E[d],g=E[h];E[h]=M,E[d]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,c=arguments.length;l!==c;++l){const f=arguments[l],h=f.uuid,d=t[h];if(d!==void 0)if(delete t[h],d<s){const m=--s,v=e[m],_=--o,E=e[_];t[v.uuid]=d,e[d]=v,t[E.uuid]=m,e[m]=E,e.pop();for(let M=0,g=r;M!==g;++M){const x=i[M],S=x[m],T=x[_];x[d]=S,x[m]=T,x.pop()}}else{const m=--o,v=e[m];m>0&&(t[v.uuid]=d),e[d]=v,e.pop();for(let _=0,E=r;_!==E;++_){const M=i[_];M[d]=M[m],M.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,l=this._parsedPaths,c=this._objects,f=c.length,h=this.nCachedObjects_,d=new Array(f);r=s.length,i[e]=r,o.push(e),l.push(t),s.push(d);for(let m=h,v=c.length;m!==v;++m){const _=c[m];d[m]=new wt(_,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,c=o[l],f=e[l];t[f]=i,o[i]=c,o.pop(),s[i]=s[l],s.pop(),r[i]=r[l],r.pop()}}}class pC{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,l=new Array(o),c={endingStart:Xo,endingEnd:Xo};for(let f=0;f!==o;++f){const h=s[f].createInterpolant(null);l[f]=h,h.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=JT,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,l=r/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,f=l.sampleValues;return c[0]=s,c[1]=s+i,f[0]=e/o,f[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*i;c<0||i===0?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case Sy:for(let h=0,d=c.length;h!==d;++h)c[h].evaluate(o),f[h].accumulateAdditive(l);break;case Xp:default:for(let h=0,d=c.length;h!==d;++h)c[h].evaluate(o),f[h].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===KT;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===ZT){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,s+=Math.abs(l);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=jo,r.endingEnd=jo):(e?r.endingStart=this.zeroSlopeAtStart?jo:Xo:r.endingStart=Nc,t?r.endingEnd=this.zeroSlopeAtEnd?jo:Xo:r.endingEnd=Nc)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,c[0]=t,l[1]=s+e,c[1]=i,this}}const N8=new Float32Array(1);class U8 extends _s{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,l=e._interpolants,c=i.uuid,f=this._bindingsByRootAndName;let h=f[c];h===void 0&&(h={},f[c]=h);for(let d=0;d!==s;++d){const m=r[d],v=m.name;let _=h[v];if(_!==void 0)++_.referenceCount,o[d]=_;else{if(_=o[d],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,c,v));continue}const E=t&&t._propertyBindings[d].binding.parsedPath;_=new dC(wt.create(i,v,E),m.ValueTypeName,m.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,c,v),o[d]=_}l[d].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],c=l.knownActions,f=c[c.length-1],h=e._byClipCacheIndex;f._byClipCacheIndex=h,c[h]=f,c.pop(),e._byClipCacheIndex=null;const d=l.actionByRoot,m=(e._localRoot||this._root).uuid;delete d[m],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,l=o[r],c=t[t.length-1],f=e._cacheIndex;c._cacheIndex=f,t[f]=c,t.pop(),delete l[s],Object.keys(l).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new jy(new Float32Array(2),new Float32Array(2),1,N8),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Gc.findByName(r,e):e;const l=o!==null?o.uuid:e,c=this._actionsByClip[l];let f=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Xp),c!==void 0){const d=c.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;f=c.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const h=new pC(this,o,t,i);return this._bindAction(h,f),this._addInactiveAction(h,l,s),h}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Gc.findByName(i,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,s,o);const l=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)l[f].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let l=0,c=o.length;l!==c;++l){const f=o[l];this._deactivateAction(f);const h=f._cacheIndex,d=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,d._cacheIndex=h,t[h]=d,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const l=i[o].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class e_{constructor(e){this.value=e}clone(){return new e_(this.value.clone===void 0?this.value:this.value.clone())}}let D8=0;class O8 extends _s{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:D8++}),this.name="",this.usage=Uc,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class F8 extends Kp{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class k8{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class mC{constructor(e,t,i=0,r=1/0){this.ray=new ql(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new ea,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return u1(e,this,i,t),i.sort(v2),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)u1(e[r],this,i,t);return i.sort(v2),i}}function v2(n,e){return n.distance-e.distance}function u1(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)u1(r[s],e,t,!0)}}class z8{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(on(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class B8{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const y2=new pe;class H8{constructor(e=new pe(1/0,1/0),t=new pe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=y2.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,y2).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _2=new O,dd=new O;class V8{constructor(e=new O,t=new O){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){_2.subVectors(e,this.start),dd.subVectors(this.end,this.start);const i=dd.dot(dd);let s=dd.dot(_2)/i;return t&&(s=on(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const x2=new O;class G8 extends Pt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new ht,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,c=32;o<c;o++,l++){const f=o/c*Math.PI*2,h=l/c*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new He(r,3));const s=new ai({fog:!1,toneMapped:!1});this.cone=new Wr(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),x2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(x2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Os=new O,pd=new ct,m0=new ct;class W8 extends Wr{constructor(e){const t=gC(e),i=new ht,r=[],s=[],o=new Ne(0,0,1),l=new Ne(0,1,0);for(let f=0;f<t.length;f++){const h=t[f];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}i.setAttribute("position",new He(r,3)),i.setAttribute("color",new He(s,3));const c=new ai({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");m0.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(pd.multiplyMatrices(m0,l.matrixWorld),Os.setFromMatrixPosition(pd),r.setXYZ(o,Os.x,Os.y,Os.z),pd.multiplyMatrices(m0,l.parent.matrixWorld),Os.setFromMatrixPosition(pd),r.setXYZ(o+1,Os.x,Os.y,Os.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function gC(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,gC(n.children[t]));return e}class X8 extends Dn{constructor(e,t,i){const r=new $l(t,4,2),s=new go({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const j8=new O,S2=new Ne,M2=new Ne;class Y8 extends Pt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Ql(t);r.rotateY(Math.PI*.5),this.material=new go({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Ft(o,3)),this.add(new Dn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");S2.copy(this.light.color),M2.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?S2:M2;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(j8.setFromMatrixPosition(this.light.matrixWorld).negate())}}class q8 extends Wr{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ne(i),r=new Ne(r);const s=t/2,o=e/t,l=e/2,c=[],f=[];for(let m=0,v=0,_=-l;m<=t;m++,_+=o){c.push(-l,0,_,l,0,_),c.push(_,0,-l,_,0,l);const E=m===s?i:r;E.toArray(f,v),v+=3,E.toArray(f,v),v+=3,E.toArray(f,v),v+=3,E.toArray(f,v),v+=3}const h=new ht;h.setAttribute("position",new He(c,3)),h.setAttribute("color",new He(f,3));const d=new ai({vertexColors:!0,toneMapped:!1});super(h,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Z8 extends Wr{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Ne(s),o=new Ne(o);const l=[],c=[];if(t>1)for(let d=0;d<t;d++){const m=d/t*(Math.PI*2),v=Math.sin(m)*e,_=Math.cos(m)*e;l.push(0,0,0),l.push(v,0,_);const E=d&1?s:o;c.push(E.r,E.g,E.b),c.push(E.r,E.g,E.b)}for(let d=0;d<i;d++){const m=d&1?s:o,v=e-e/i*d;for(let _=0;_<r;_++){let E=_/r*(Math.PI*2),M=Math.sin(E)*v,g=Math.cos(E)*v;l.push(M,0,g),c.push(m.r,m.g,m.b),E=(_+1)/r*(Math.PI*2),M=Math.sin(E)*v,g=Math.cos(E)*v,l.push(M,0,g),c.push(m.r,m.g,m.b)}}const f=new ht;f.setAttribute("position",new He(l,3)),f.setAttribute("color",new He(c,3));const h=new ai({vertexColors:!0,toneMapped:!1});super(f,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const E2=new O,md=new O,w2=new O;class J8 extends Pt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new ht;r.setAttribute("position",new He([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new ai({fog:!1,toneMapped:!1});this.lightPlane=new uo(r,s),this.add(this.lightPlane),r=new ht,r.setAttribute("position",new He([0,0,0,0,0,1],3)),this.targetLine=new uo(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),E2.setFromMatrixPosition(this.light.matrixWorld),md.setFromMatrixPosition(this.light.target.matrixWorld),w2.subVectors(md,E2),this.lightPlane.lookAt(md),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(md),this.targetLine.scale.z=w2.length()}}const gd=new O,rn=new ef;class K8 extends Wr{constructor(e){const t=new ht,i=new ai({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(_,E){c(_),c(E)}function c(_){r.push(0,0,0),s.push(0,0,0),o[_]===void 0&&(o[_]=[]),o[_].push(r.length/3-1)}t.setAttribute("position",new He(r,3)),t.setAttribute("color",new He(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const f=new Ne(16755200),h=new Ne(16711680),d=new Ne(43775),m=new Ne(16777215),v=new Ne(3355443);this.setColors(f,h,d,m,v)}setColors(e,t,i,r,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;rn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),un("c",t,e,rn,0,0,-1),un("t",t,e,rn,0,0,1),un("n1",t,e,rn,-i,-r,-1),un("n2",t,e,rn,i,-r,-1),un("n3",t,e,rn,-i,r,-1),un("n4",t,e,rn,i,r,-1),un("f1",t,e,rn,-i,-r,1),un("f2",t,e,rn,i,-r,1),un("f3",t,e,rn,-i,r,1),un("f4",t,e,rn,i,r,1),un("u1",t,e,rn,i*.7,r*1.1,-1),un("u2",t,e,rn,-i*.7,r*1.1,-1),un("u3",t,e,rn,0,r*2,-1),un("cf1",t,e,rn,-i,0,1),un("cf2",t,e,rn,i,0,1),un("cf3",t,e,rn,0,-r,1),un("cf4",t,e,rn,0,r,1),un("cn1",t,e,rn,-i,0,-1),un("cn2",t,e,rn,i,0,-1),un("cn3",t,e,rn,0,-r,-1),un("cn4",t,e,rn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function un(n,e,t,i,r,s,o){gd.set(r,s,o).unproject(i);const l=e[n];if(l!==void 0){const c=t.getAttribute("position");for(let f=0,h=l.length;f<h;f++)c.setXYZ(l[f],gd.x,gd.y,gd.z)}}const vd=new Gr;class Q8 extends Wr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new ht;s.setIndex(new Ft(i,1)),s.setAttribute("position",new Ft(r,3)),super(s,new ai({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&vd.setFromObject(this.object),vd.isEmpty())return;const t=vd.min,i=vd.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class $8 extends Wr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new ht;s.setIndex(new Ft(i,1)),s.setAttribute("position",new He(r,3)),super(s,new ai({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class eO extends uo{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new ht;o.setAttribute("position",new He(s,3)),o.computeBoundingSphere(),super(o,new ai({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new ht;c.setAttribute("position",new He(l,3)),c.computeBoundingSphere(),this.add(new Dn(c,new go({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const T2=new O;let yd,g0;class tO extends Pt{constructor(e=new O(0,0,1),t=new O(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",yd===void 0&&(yd=new ht,yd.setAttribute("position",new He([0,0,0,0,1,0],3)),g0=new da(0,.5,1,5,1),g0.translate(0,-.5,0)),this.position.copy(t),this.line=new uo(yd,new ai({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Dn(g0,new go({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{T2.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(T2,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class nO extends Wr{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new ht;r.setAttribute("position",new He(t,3)),r.setAttribute("color",new He(i,3));const s=new ai({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Ne,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class iO{constructor(){this.type="ShapePath",this.color=new Ne,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Fc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const x=[];for(let S=0,T=g.length;S<T;S++){const A=g[S],P=new ta;P.curves=A.curves,x.push(P)}return x}function i(g,x){const S=x.length;let T=!1;for(let A=S-1,P=0;P<S;A=P++){let L=x[A],N=x[P],R=N.x-L.x,b=N.y-L.y;if(Math.abs(b)>Number.EPSILON){if(b<0&&(L=x[P],R=-R,N=x[A],b=-b),g.y<L.y||g.y>N.y)continue;if(g.y===L.y){if(g.x===L.x)return!0}else{const G=b*(g.x-L.x)-R*(g.y-L.y);if(G===0)return!0;if(G<0)continue;T=!T}}else{if(g.y!==L.y)continue;if(N.x<=g.x&&g.x<=L.x||L.x<=g.x&&g.x<=N.x)return!0}}return T}const r=Vr.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,c;const f=[];if(s.length===1)return l=s[0],c=new ta,c.curves=l.curves,f.push(c),f;let h=!r(s[0].getPoints());h=e?!h:h;const d=[],m=[];let v=[],_=0,E;m[_]=void 0,v[_]=[];for(let g=0,x=s.length;g<x;g++)l=s[g],E=l.getPoints(),o=r(E),o=e?!o:o,o?(!h&&m[_]&&_++,m[_]={s:new ta,p:E},m[_].s.curves=l.curves,h&&_++,v[_]=[]):v[_].push({h:l,p:E[0]});if(!m[0])return t(s);if(m.length>1){let g=!1,x=0;for(let S=0,T=m.length;S<T;S++)d[S]=[];for(let S=0,T=m.length;S<T;S++){const A=v[S];for(let P=0;P<A.length;P++){const L=A[P];let N=!0;for(let R=0;R<m.length;R++)i(L.p,m[R].p)&&(S!==R&&x++,N?(N=!1,d[R].push(L)):g=!0);N&&d[S].push(L)}}x>0&&g===!1&&(v=d)}let M;for(let g=0,x=m.length;g<x;g++){c=m[g].s,f.push(c),M=v[g];for(let S=0,T=M.length;S<T;S++)c.holes.push(M[S].h)}return f}}class rO extends vo{constructor(e,t,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,i,r,s,o)}}class sO extends rf{constructor(e,t,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,i,r)}}class oO extends sf{constructor(e,t,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,i,r)}}class aO extends of{constructor(e,t,i,r,s,o,l){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,i,r,s,o,l)}}class lO extends da{constructor(e,t,i,r,s,o,l,c){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,i,r,s,o,l,c)}}class uO extends af{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class cO extends lf{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class fO extends uf{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class hO extends Kl{constructor(e,t,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,i,r)}}class dO extends Ql{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class pO extends Zl{constructor(e,t,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,i,r)}}class mO extends xs{constructor(e,t,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,i,r)}}class gO extends cf{constructor(e,t,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,i,r,s,o)}}class vO extends ff{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class yO extends $l{constructor(e,t,i,r,s,o,l){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,i,r,s,o,l)}}class _O extends hf{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class xO extends df{constructor(e,t,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,i,r,s)}}class SO extends pf{constructor(e,t,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,i,r,s,o)}}class MO extends mf{constructor(e,t,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Hp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Hp);const EO=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:dy,AddEquation:Bo,AddOperation:DT,AdditiveAnimationBlendMode:Sy,AdditiveBlending:Al,AlphaFormat:VT,AlwaysCompare:u3,AlwaysDepth:RT,AlwaysStencilFunc:t3,AmbientLight:aC,AmbientLightProbe:g8,AnimationAction:pC,AnimationClip:Gc,AnimationLoader:r8,AnimationMixer:U8,AnimationObjectGroup:I8,AnimationUtils:e8,ArcCurve:N3,ArrayCamera:E3,ArrowHelper:tO,Audio:hC,AudioAnalyser:M8,AudioContext:Jy,AudioListener:_8,AudioLoader:p8,AxesHelper:nO,BackSide:ri,BasicDepthPacking:QT,BasicShadowMap:pT,Bone:Uy,BooleanKeyframeTrack:pa,Box2:H8,Box3:Gr,Box3Helper:$8,BoxBufferGeometry:rO,BoxGeometry:vo,BoxHelper:Q8,BufferAttribute:Ft,BufferGeometry:ht,BufferGeometryLoader:fC,ByteType:BT,Cache:ca,Camera:ef,CameraHelper:K8,CanvasTexture:wD,CapsuleBufferGeometry:sO,CapsuleGeometry:rf,CatmullRomCurve3:U3,CineonToneMapping:kT,CircleBufferGeometry:oO,CircleGeometry:sf,ClampToEdgeWrapping:Jn,Clock:Ky,Color:Ne,ColorKeyframeTrack:Yy,ColorManagement:qi,CompressedArrayTexture:ED,CompressedTexture:Oy,CompressedTextureLoader:s8,ConeBufferGeometry:aO,ConeGeometry:of,CubeCamera:m3,CubeReflectionMapping:oo,CubeRefractionMapping:ao,CubeTexture:tf,CubeTextureLoader:o8,CubeUVReflectionMapping:Yl,CubicBezierCurve:ky,CubicBezierCurve3:D3,CubicInterpolant:$3,CullFaceBack:Tv,CullFaceFront:dT,CullFaceFrontBack:x4,CullFaceNone:hT,Curve:Mr,CurvePath:F3,CustomBlending:mT,CustomToneMapping:zT,CylinderBufferGeometry:lO,CylinderGeometry:da,Cylindrical:B8,Data3DTexture:Cy,DataArrayTexture:jp,DataTexture:Pl,DataTextureLoader:a8,DataUtils:NL,DecrementStencilOp:I4,DecrementWrapStencilOp:U4,DefaultLoadingManager:nC,DepthFormat:to,DepthStencilFormat:aa,DepthTexture:w3,DirectionalLight:oC,DirectionalLightHelper:J8,DiscreteInterpolant:eC,DisplayP3ColorSpace:Ey,DodecahedronBufferGeometry:uO,DodecahedronGeometry:af,DoubleSide:Or,DstAlphaFactor:MT,DstColorFactor:wT,DynamicCopyUsage:Z4,DynamicDrawUsage:G4,DynamicReadUsage:j4,EdgesGeometry:k3,EllipseCurve:$p,EqualCompare:r3,EqualDepth:bT,EqualStencilFunc:k4,EquirectangularReflectionMapping:Ac,EquirectangularRefractionMapping:Rc,Euler:$c,EventDispatcher:_s,ExtrudeBufferGeometry:cO,ExtrudeGeometry:lf,FileLoader:vs,Float16BufferAttribute:zL,Float32BufferAttribute:He,Float64BufferAttribute:BL,FloatType:Fr,Fog:Jp,FogExp2:Zp,FramebufferTexture:MD,FrontSide:gs,Frustum:Yp,GLBufferAttribute:k8,GLSL1:K4,GLSL3:$v,GreaterCompare:o3,GreaterDepth:IT,GreaterEqualCompare:l3,GreaterEqualDepth:LT,GreaterEqualStencilFunc:V4,GreaterStencilFunc:B4,GridHelper:q8,Group:yl,HalfFloatType:Fl,HemisphereLight:iC,HemisphereLightHelper:Y8,HemisphereLightProbe:m8,IcosahedronBufferGeometry:fO,IcosahedronGeometry:uf,ImageBitmapLoader:d8,ImageLoader:Wc,ImageUtils:Ty,IncrementStencilOp:L4,IncrementWrapStencilOp:N4,InstancedBufferAttribute:Bl,InstancedBufferGeometry:cC,InstancedInterleavedBuffer:F8,InstancedMesh:b3,Int16BufferAttribute:FL,Int32BufferAttribute:kL,Int8BufferAttribute:UL,IntType:my,InterleavedBuffer:Kp,InterleavedBufferAttribute:la,Interpolant:gf,InterpolateDiscrete:Lc,InterpolateLinear:Ic,InterpolateSmooth:kd,InvertStencilOp:D4,KeepStencilOp:zd,KeyframeTrack:Er,LOD:R3,LatheBufferGeometry:hO,LatheGeometry:Kl,Layers:ea,LessCompare:i3,LessDepth:PT,LessEqualCompare:s3,LessEqualDepth:mp,LessEqualStencilFunc:z4,LessStencilFunc:F4,Light:yo,LightProbe:nm,Line:uo,Line3:V8,LineBasicMaterial:ai,LineCurve:em,LineCurve3:O3,LineDashedMaterial:K3,LineLoop:L3,LineSegments:Wr,LinearEncoding:My,LinearFilter:hn,LinearInterpolant:jy,LinearMipMapLinearFilter:T4,LinearMipMapNearestFilter:w4,LinearMipmapLinearFilter:lo,LinearMipmapNearestFilter:py,LinearSRGBColorSpace:_r,LinearToneMapping:OT,Loader:ki,LoaderUtils:l1,LoadingManager:qy,LoopOnce:ZT,LoopPingPong:KT,LoopRepeat:JT,LuminanceAlphaFormat:WT,LuminanceFormat:GT,MOUSE:y4,Material:kn,MaterialLoader:im,MathUtils:fL,Matrix3:gt,Matrix4:ct,MaxEquation:Pv,Mesh:Dn,MeshBasicMaterial:go,MeshDepthMaterial:by,MeshDistanceMaterial:Ly,MeshLambertMaterial:Z3,MeshMatcapMaterial:J3,MeshNormalMaterial:q3,MeshPhongMaterial:j3,MeshPhysicalMaterial:X3,MeshStandardMaterial:Gy,MeshToonMaterial:Y3,MinEquation:Rv,MirroredRepeatWrapping:bc,MixOperation:UT,MultiplyBlending:Av,MultiplyOperation:Qc,NearestFilter:cn,NearestMipMapLinearFilter:E4,NearestMipMapNearestFilter:M4,NearestMipmapLinearFilter:ic,NearestMipmapNearestFilter:gp,NeverCompare:n3,NeverDepth:AT,NeverStencilFunc:O4,NoBlending:fs,NoColorSpace:io,NoToneMapping:vr,NormalAnimationBlendMode:Xp,NormalBlending:Qo,NotEqualCompare:a3,NotEqualDepth:NT,NotEqualStencilFunc:H4,NumberKeyframeTrack:Hc,Object3D:Pt,ObjectLoader:f8,ObjectSpaceNormalMap:e3,OctahedronBufferGeometry:dO,OctahedronGeometry:Ql,OneFactor:_T,OneMinusDstAlphaFactor:ET,OneMinusDstColorFactor:TT,OneMinusSrcAlphaFactor:hy,OneMinusSrcColorFactor:ST,OrthographicCamera:nf,PCFShadowMap:Vp,PCFSoftShadowMap:nc,PMREMGenerator:t1,Path:Fc,PerspectiveCamera:bn,Plane:zs,PlaneBufferGeometry:pO,PlaneGeometry:Zl,PlaneHelper:eO,PointLight:sC,PointLightHelper:X8,Points:I3,PointsMaterial:Dy,PolarGridHelper:Z8,PolyhedronBufferGeometry:mO,PolyhedronGeometry:xs,PositionalAudio:S8,PropertyBinding:wt,PropertyMixer:dC,QuadraticBezierCurve:zy,QuadraticBezierCurve3:By,Quaternion:_i,QuaternionKeyframeTrack:eu,QuaternionLinearInterpolant:tC,RED_GREEN_RGTC2_Format:Kv,RED_RGTC1_Format:qT,REVISION:Hp,RGBADepthPacking:$T,RGBAFormat:pi,RGBAIntegerFormat:xy,RGBA_ASTC_10x10_Format:Yv,RGBA_ASTC_10x5_Format:Wv,RGBA_ASTC_10x6_Format:Xv,RGBA_ASTC_10x8_Format:jv,RGBA_ASTC_12x10_Format:qv,RGBA_ASTC_12x12_Format:Zv,RGBA_ASTC_4x4_Format:Ov,RGBA_ASTC_5x4_Format:Fv,RGBA_ASTC_5x5_Format:kv,RGBA_ASTC_6x5_Format:zv,RGBA_ASTC_6x6_Format:Bv,RGBA_ASTC_8x5_Format:Hv,RGBA_ASTC_8x6_Format:Vv,RGBA_ASTC_8x8_Format:Gv,RGBA_BPTC_Format:Fd,RGBA_ETC2_EAC_Format:Dv,RGBA_PVRTC_2BPPV1_Format:Nv,RGBA_PVRTC_4BPPV1_Format:Iv,RGBA_S3TC_DXT1_Format:Ud,RGBA_S3TC_DXT3_Format:Dd,RGBA_S3TC_DXT5_Format:Od,RGB_ETC1_Format:YT,RGB_ETC2_Format:Uv,RGB_PVRTC_2BPPV1_Format:Lv,RGB_PVRTC_4BPPV1_Format:bv,RGB_S3TC_DXT1_Format:Nd,RGFormat:jT,RGIntegerFormat:_y,RawShaderMaterial:W3,Ray:ql,Raycaster:mC,RectAreaLight:lC,RedFormat:XT,RedIntegerFormat:yy,ReinhardToneMapping:FT,RepeatWrapping:Pc,ReplaceStencilOp:b4,ReverseSubtractEquation:vT,RingBufferGeometry:gO,RingGeometry:cf,SIGNED_RED_GREEN_RGTC2_Format:Qv,SIGNED_RED_RGTC1_Format:Jv,SRGBColorSpace:ft,Scene:_p,ShaderChunk:mt,ShaderLib:pr,ShaderMaterial:Ui,ShadowMaterial:G3,Shape:ta,ShapeBufferGeometry:vO,ShapeGeometry:ff,ShapePath:iO,ShapeUtils:Vr,ShortType:HT,Skeleton:Qp,SkeletonHelper:W8,SkinnedMesh:P3,Source:Yo,Sphere:Sr,SphereBufferGeometry:yO,SphereGeometry:$l,Spherical:z8,SphericalHarmonics3:uC,SplineCurve:Hy,SpotLight:rC,SpotLightHelper:G8,Sprite:A3,SpriteMaterial:Ny,SrcAlphaFactor:fy,SrcAlphaSaturateFactor:CT,SrcColorFactor:xT,StaticCopyUsage:q4,StaticDrawUsage:Uc,StaticReadUsage:X4,StereoCamera:v8,StreamCopyUsage:J4,StreamDrawUsage:W4,StreamReadUsage:Y4,StringKeyframeTrack:ma,SubtractEquation:gT,SubtractiveBlending:Cv,TOUCH:_4,TangentSpaceNormalMap:mo,TetrahedronBufferGeometry:_O,TetrahedronGeometry:hf,Texture:an,TextureLoader:a1,TorusBufferGeometry:xO,TorusGeometry:df,TorusKnotBufferGeometry:SO,TorusKnotGeometry:pf,Triangle:di,TriangleFanDrawMode:R4,TriangleStripDrawMode:A4,TrianglesDrawMode:C4,TubeBufferGeometry:MO,TubeGeometry:mf,TwoPassDoubleSide:S4,UVMapping:Gp,Uint16BufferAttribute:Ay,Uint32BufferAttribute:Ry,Uint8BufferAttribute:DL,Uint8ClampedBufferAttribute:OL,Uniform:e_,UniformsGroup:O8,UniformsLib:Te,UniformsUtils:p3,UnsignedByteType:Hr,UnsignedInt248Type:eo,UnsignedIntType:us,UnsignedShort4444Type:gy,UnsignedShort5551Type:vy,UnsignedShortType:Wp,VSMShadowMap:fr,Vector2:pe,Vector3:O,Vector4:It,VectorKeyframeTrack:Vc,VideoTexture:SD,WebGL1Renderer:T3,WebGL3DRenderTarget:ML,WebGLArrayRenderTarget:SL,WebGLCoordinateSystem:kr,WebGLCubeRenderTarget:g3,WebGLMultipleRenderTargets:EL,WebGLRenderTarget:xr,WebGLRenderer:Iy,WebGLUtils:M3,WebGPUCoordinateSystem:Dc,WireframeGeometry:V3,WrapAroundEnding:Nc,ZeroCurvatureEnding:Xo,ZeroFactor:yT,ZeroSlopeEnding:jo,ZeroStencilOp:P4,_SRGBAFormat:vp,sRGBEncoding:no},Symbol.toStringTag,{value:"Module"}));var vC={exports:{}},ga={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ga.ConcurrentRoot=1;ga.ContinuousEventPriority=4;ga.DefaultEventPriority=16;ga.DiscreteEventPriority=1;ga.IdleEventPriority=536870912;ga.LegacyRoot=0;vC.exports=ga;var xl=vC.exports;function wO(n){let e;const t=new Set,i=(f,h)=>{const d=typeof f=="function"?f(e):f;if(d!==e){const m=e;e=h?d:Object.assign({},e,d),t.forEach(v=>v(e,m))}},r=()=>e,s=(f,h=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=h(e);function v(){const _=h(e);if(!d(m,_)){const E=m;f(m=_,E)}}return t.add(v),()=>t.delete(v)},c={setState:i,getState:r,subscribe:(f,h,d)=>h||d?s(f,h,d):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=n(i,r,c),c}const TO=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),C2=TO?K.useEffect:K.useLayoutEffect;function CO(n){const e=typeof n=="function"?wO(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=K.useReducer(M=>M+1,0),o=e.getState(),l=K.useRef(o),c=K.useRef(i),f=K.useRef(r),h=K.useRef(!1),d=K.useRef();d.current===void 0&&(d.current=i(o));let m,v=!1;(l.current!==o||c.current!==i||f.current!==r||h.current)&&(m=i(o),v=!r(d.current,m)),C2(()=>{v&&(d.current=m),l.current=o,c.current=i,f.current=r,h.current=!1});const _=K.useRef(o);C2(()=>{const M=()=>{try{const x=e.getState(),S=c.current(x);f.current(d.current,S)||(l.current=x,d.current=S,s())}catch{h.current=!0,s()}},g=e.subscribe(M);return e.getState()!==_.current&&M(),g},[]);const E=v?m:d.current;return K.useDebugValue(E),E};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var yC={exports:{}},v0={exports:{}},y0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A2;function AO(){return A2||(A2=1,function(n){function e(U,H){var z=U.length;U.push(H);e:for(;0<z;){var te=z-1>>>1,B=U[te];if(0<r(B,H))U[te]=H,U[z]=B,z=te;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var H=U[0],z=U.pop();if(z!==H){U[0]=z;e:for(var te=0,B=U.length,he=B>>>1;te<he;){var se=2*(te+1)-1,Ee=U[se],ve=se+1,Ce=U[ve];if(0>r(Ee,z))ve<B&&0>r(Ce,Ee)?(U[te]=Ce,U[ve]=z,te=ve):(U[te]=Ee,U[se]=z,te=se);else if(ve<B&&0>r(Ce,z))U[te]=Ce,U[ve]=z,te=ve;else break e}}return H}function r(U,H){var z=U.sortIndex-H.sortIndex;return z!==0?z:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],f=[],h=1,d=null,m=3,v=!1,_=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var H=t(f);H!==null;){if(H.callback===null)i(f);else if(H.startTime<=U)i(f),H.sortIndex=H.expirationTime,e(c,H);else break;H=t(f)}}function T(U){if(E=!1,S(U),!_)if(t(c)!==null)_=!0,ae(A);else{var H=t(f);H!==null&&ne(T,H.startTime-U)}}function A(U,H){_=!1,E&&(E=!1,g(N),N=-1),v=!0;var z=m;try{for(S(H),d=t(c);d!==null&&(!(d.expirationTime>H)||U&&!G());){var te=d.callback;if(typeof te=="function"){d.callback=null,m=d.priorityLevel;var B=te(d.expirationTime<=H);H=n.unstable_now(),typeof B=="function"?d.callback=B:d===t(c)&&i(c),S(H)}else i(c);d=t(c)}if(d!==null)var he=!0;else{var se=t(f);se!==null&&ne(T,se.startTime-H),he=!1}return he}finally{d=null,m=z,v=!1}}var P=!1,L=null,N=-1,R=5,b=-1;function G(){return!(n.unstable_now()-b<R)}function J(){if(L!==null){var U=n.unstable_now();b=U;var H=!0;try{H=L(!0,U)}finally{H?j():(P=!1,L=null)}}else P=!1}var j;if(typeof x=="function")j=function(){x(J)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,$=Z.port2;Z.port1.onmessage=J,j=function(){$.postMessage(null)}}else j=function(){M(J,0)};function ae(U){L=U,P||(P=!0,j())}function ne(U,H){N=M(function(){U(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){_||v||(_=!0,ae(A))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(U){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var z=m;m=H;try{return U()}finally{m=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var z=m;m=U;try{return H()}finally{m=z}},n.unstable_scheduleCallback=function(U,H,z){var te=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?te+z:te):z=te,U){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=z+B,U={id:h++,callback:H,priorityLevel:U,startTime:z,expirationTime:B,sortIndex:-1},z>te?(U.sortIndex=z,e(f,U),t(c)===null&&U===t(f)&&(E?(g(N),N=-1):E=!0,ne(T,z-te))):(U.sortIndex=B,e(c,U),_||v||(_=!0,ae(A))),U},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(U){var H=m;return function(){var z=m;m=H;try{return U.apply(this,arguments)}finally{m=z}}}}(y0)),y0}var R2;function RO(){return R2||(R2=1,v0.exports=AO()),v0.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PO=function(e){var t={},i=K,r=RO(),s=Object.assign;function o(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,p=1;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),f=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),A=Symbol.iterator;function P(a){return a===null||typeof a!="object"?null:(a=A&&a[A]||a["@@iterator"],typeof a=="function"?a:null)}function L(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case h:return"Fragment";case f:return"Portal";case m:return"Profiler";case d:return"StrictMode";case M:return"Suspense";case g:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case _:return(a.displayName||"Context")+".Consumer";case v:return(a._context.displayName||"Context")+".Provider";case E:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case x:return u=a.displayName||null,u!==null?u:L(a.type)||"Memo";case S:u=a._payload,a=a._init;try{return L(a(u))}catch{}}return null}function N(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=u.render,a=a.displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L(u);case 8:return u===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function R(a){var u=a,p=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,u.flags&4098&&(p=u.return),a=u.return;while(a)}return u.tag===3?p:null}function b(a){if(R(a)!==a)throw Error(o(188))}function G(a){var u=a.alternate;if(!u){if(u=R(a),u===null)throw Error(o(188));return u!==a?null:a}for(var p=a,y=u;;){var w=p.return;if(w===null)break;var C=w.alternate;if(C===null){if(y=w.return,y!==null){p=y;continue}break}if(w.child===C.child){for(C=w.child;C;){if(C===p)return b(w),a;if(C===y)return b(w),u;C=C.sibling}throw Error(o(188))}if(p.return!==y.return)p=w,y=C;else{for(var F=!1,X=w.child;X;){if(X===p){F=!0,p=w,y=C;break}if(X===y){F=!0,y=w,p=C;break}X=X.sibling}if(!F){for(X=C.child;X;){if(X===p){F=!0,p=C,y=w;break}if(X===y){F=!0,y=C,p=w;break}X=X.sibling}if(!F)throw Error(o(189))}}if(p.alternate!==y)throw Error(o(190))}if(p.tag!==3)throw Error(o(188));return p.stateNode.current===p?a:u}function J(a){return a=G(a),a!==null?j(a):null}function j(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=j(a);if(u!==null)return u;a=a.sibling}return null}function Z(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){if(a.tag!==4){var u=Z(a);if(u!==null)return u}a=a.sibling}return null}var $=Array.isArray,ae=e.getPublicInstance,ne=e.getRootHostContext,U=e.getChildHostContext,H=e.prepareForCommit,z=e.resetAfterCommit,te=e.createInstance,B=e.appendInitialChild,he=e.finalizeInitialChildren,se=e.prepareUpdate,Ee=e.shouldSetTextContent,ve=e.createTextInstance,Ce=e.scheduleTimeout,ot=e.cancelTimeout,$e=e.noTimeout,Et=e.isPrimaryRenderer,Ye=e.supportsMutation,V=e.supportsPersistence,ge=e.supportsHydration,de=e.getInstanceFromNode,Me=e.preparePortalMount,me=e.getCurrentEventPriority,Ge=e.detachDeletedInstance,Ue=e.supportsMicrotasks,Oe=e.scheduleMicrotask,et=e.supportsTestSelectors,xt=e.findFiberRoot,Xt=e.getBoundingRect,k=e.getTextContent,I=e.isHiddenSubtree,le=e.matchAccessibilityRole,_e=e.setFocusIfFocusable,xe=e.setupIntersectionObserver,Ae=e.appendChild,We=e.appendChildToContainer,Re=e.commitTextUpdate,fe=e.commitMount,qe=e.commitUpdate,Ze=e.insertBefore,Qe=e.insertInContainerBefore,ze=e.removeChild,Be=e.removeChildFromContainer,dt=e.resetTextContent,Ut=e.hideInstance,W=e.hideTextInstance,Pe=e.unhideInstance,ie=e.unhideTextInstance,we=e.clearContainer,Le=e.cloneInstance,Mt=e.createContainerChildSet,zt=e.appendChildToContainerChildSet,$t=e.finalizeContainerChildren,wr=e.replaceContainerChildren,Bt=e.cloneHiddenInstance,xi=e.cloneHiddenTextInstance,In=e.canHydrateInstance,yf=e.canHydrateTextInstance,_f=e.canHydrateSuspenseInstance,xf=e.isSuspenseInstancePending,Ss=e.isSuspenseInstanceFallback,Sf=e.registerSuspenseInstanceRetry,Tr=e.getNextHydratableSibling,Mf=e.getFirstHydratableChild,rm=e.getFirstHydratableChildWithinContainer,sm=e.getFirstHydratableChildWithinSuspenseInstance,om=e.hydrateInstance,D=e.hydrateTextInstance,ee=e.hydrateSuspenseInstance,ue=e.getNextHydratableInstanceAfterSuspenseInstance,q=e.commitHydratedContainer,ce=e.commitHydratedSuspenseInstance,Fe=e.clearSuspenseBoundary,Je=e.clearSuspenseBoundaryFromContainer,tt=e.shouldDeleteUnhydratedTailInstances,nt=e.didNotMatchHydratedContainerTextInstance,yt=e.didNotMatchHydratedTextInstance,it;function rt(a){if(it===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);it=u&&u[1]||""}return`
`+it+a}var bt=!1;function Ht(a,u){if(!a||bt)return"";bt=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Se){var y=Se}Reflect.construct(a,[],u)}else{try{u.call()}catch(Se){y=Se}a.call(u.prototype)}else{try{throw Error()}catch(Se){y=Se}a()}}catch(Se){if(Se&&y&&typeof Se.stack=="string"){for(var w=Se.stack.split(`
`),C=y.stack.split(`
`),F=w.length-1,X=C.length-1;1<=F&&0<=X&&w[F]!==C[X];)X--;for(;1<=F&&0<=X;F--,X--)if(w[F]!==C[X]){if(F!==1||X!==1)do if(F--,X--,0>X||w[F]!==C[X]){var oe=`
`+w[F].replace(" at new "," at ");return a.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",a.displayName)),oe}while(1<=F&&0<=X);break}}}finally{bt=!1,Error.prepareStackTrace=p}return(a=a?a.displayName||a.name:"")?rt(a):""}var Si=Object.prototype.hasOwnProperty,Mi=[],Dt=-1;function at(a){return{current:a}}function Lt(a){0>Dt||(a.current=Mi[Dt],Mi[Dt]=null,Dt--)}function st(a,u){Dt++,Mi[Dt]=a.current,a.current=u}var zn={},_n=at(zn),dn=at(!1),nr=zn;function en(a,u){var p=a.type.contextTypes;if(!p)return zn;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===u)return y.__reactInternalMemoizedMaskedChildContext;var w={},C;for(C in p)w[C]=u[C];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=w),w}function tn(a){return a=a.childContextTypes,a!=null}function Ms(){Lt(dn),Lt(_n)}function Bn(a,u,p){if(_n.current!==zn)throw Error(o(168));st(_n,u),st(dn,p)}function va(a,u,p){var y=a.stateNode;if(u=u.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var w in y)if(!(w in u))throw Error(o(108,N(a)||"Unknown",w));return s({},p,y)}function ya(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||zn,nr=_n.current,st(_n,a),st(dn,dn.current),!0}function tu(a,u,p){var y=a.stateNode;if(!y)throw Error(o(169));p?(a=va(a,u,nr),y.__reactInternalMemoizedMergedChildContext=a,Lt(dn),Lt(_n),st(_n,a)):Lt(dn),st(dn,p)}var ir=Math.clz32?Math.clz32:GC,HC=Math.log,VC=Math.LN2;function GC(a){return a>>>=0,a===0?32:31-(HC(a)/VC|0)|0}var Ef=64,wf=4194304;function nu(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Tf(a,u){var p=a.pendingLanes;if(p===0)return 0;var y=0,w=a.suspendedLanes,C=a.pingedLanes,F=p&268435455;if(F!==0){var X=F&~w;X!==0?y=nu(X):(C&=F,C!==0&&(y=nu(C)))}else F=p&~w,F!==0?y=nu(F):C!==0&&(y=nu(C));if(y===0)return 0;if(u!==0&&u!==y&&!(u&w)&&(w=y&-y,C=u&-u,w>=C||w===16&&(C&4194240)!==0))return u;if(y&4&&(y|=p&16),u=a.entangledLanes,u!==0)for(a=a.entanglements,u&=y;0<u;)p=31-ir(u),w=1<<p,y|=a[p],u&=~w;return y}function WC(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XC(a,u){for(var p=a.suspendedLanes,y=a.pingedLanes,w=a.expirationTimes,C=a.pendingLanes;0<C;){var F=31-ir(C),X=1<<F,oe=w[F];oe===-1?(!(X&p)||X&y)&&(w[F]=WC(X,u)):oe<=u&&(a.expiredLanes|=X),C&=~X}}function am(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function lm(a){for(var u=[],p=0;31>p;p++)u.push(a);return u}function iu(a,u,p){a.pendingLanes|=u,u!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,u=31-ir(u),a[u]=p}function jC(a,u){var p=a.pendingLanes&~u;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=u,a.mutableReadLanes&=u,a.entangledLanes&=u,u=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<p;){var w=31-ir(p),C=1<<w;u[w]=0,y[w]=-1,a[w]=-1,p&=~C}}function um(a,u){var p=a.entangledLanes|=u;for(a=a.entanglements;p;){var y=31-ir(p),w=1<<y;w&u|a[y]&u&&(a[y]|=u),p&=~w}}var Ct=0;function i_(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var cm=r.unstable_scheduleCallback,r_=r.unstable_cancelCallback,YC=r.unstable_shouldYield,qC=r.unstable_requestPaint,Tn=r.unstable_now,fm=r.unstable_ImmediatePriority,ZC=r.unstable_UserBlockingPriority,hm=r.unstable_NormalPriority,JC=r.unstable_IdlePriority,Cf=null,Cr=null;function KC(a){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(Cf,a,void 0,(a.current.flags&128)===128)}catch{}}function QC(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var Ar=typeof Object.is=="function"?Object.is:QC,Xr=null,Af=!1,dm=!1;function s_(a){Xr===null?Xr=[a]:Xr.push(a)}function $C(a){Af=!0,s_(a)}function Rr(){if(!dm&&Xr!==null){dm=!0;var a=0,u=Ct;try{var p=Xr;for(Ct=1;a<p.length;a++){var y=p[a];do y=y(!0);while(y!==null)}Xr=null,Af=!1}catch(w){throw Xr!==null&&(Xr=Xr.slice(a+1)),cm(fm,Rr),w}finally{Ct=u,dm=!1}}return null}var eA=l.ReactCurrentBatchConfig;function Rf(a,u){if(Ar(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var p=Object.keys(a),y=Object.keys(u);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var w=p[y];if(!Si.call(u,w)||!Ar(a[w],u[w]))return!1}return!0}function tA(a){switch(a.tag){case 5:return rt(a.type);case 16:return rt("Lazy");case 13:return rt("Suspense");case 19:return rt("SuspenseList");case 0:case 2:case 15:return a=Ht(a.type,!1),a;case 11:return a=Ht(a.type.render,!1),a;case 1:return a=Ht(a.type,!0),a;default:return""}}function rr(a,u){if(a&&a.defaultProps){u=s({},u),a=a.defaultProps;for(var p in a)u[p]===void 0&&(u[p]=a[p]);return u}return u}var Pf=at(null),bf=null,_a=null,pm=null;function mm(){pm=_a=bf=null}function o_(a,u,p){Et?(st(Pf,u._currentValue),u._currentValue=p):(st(Pf,u._currentValue2),u._currentValue2=p)}function gm(a){var u=Pf.current;Lt(Pf),Et?a._currentValue=u:a._currentValue2=u}function vm(a,u,p){for(;a!==null;){var y=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),a===p)break;a=a.return}}function xa(a,u){bf=a,pm=_a=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&u&&(Ti=!0),a.firstContext=null)}function zi(a){var u=Et?a._currentValue:a._currentValue2;if(pm!==a)if(a={context:a,memoizedValue:u,next:null},_a===null){if(bf===null)throw Error(o(308));_a=a,bf.dependencies={lanes:0,firstContext:a}}else _a=_a.next=a;return u}var Pr=null,Es=!1;function ym(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function a_(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function jr(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function ws(a,u){var p=a.updateQueue;p!==null&&(p=p.shared,pn!==null&&a.mode&1&&!(_t&2)?(a=p.interleaved,a===null?(u.next=u,Pr===null?Pr=[p]:Pr.push(p)):(u.next=a.next,a.next=u),p.interleaved=u):(a=p.pending,a===null?u.next=u:(u.next=a.next,a.next=u),p.pending=u))}function Lf(a,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194240)!==0)){var y=u.lanes;y&=a.pendingLanes,p|=y,u.lanes=p,um(a,p)}}function l_(a,u){var p=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var w=null,C=null;if(p=p.firstBaseUpdate,p!==null){do{var F={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};C===null?w=C=F:C=C.next=F,p=p.next}while(p!==null);C===null?w=C=u:C=C.next=u}else w=C=u;p={baseState:y.baseState,firstBaseUpdate:w,lastBaseUpdate:C,shared:y.shared,effects:y.effects},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=u:a.next=u,p.lastBaseUpdate=u}function If(a,u,p,y){var w=a.updateQueue;Es=!1;var C=w.firstBaseUpdate,F=w.lastBaseUpdate,X=w.shared.pending;if(X!==null){w.shared.pending=null;var oe=X,Se=oe.next;oe.next=null,F===null?C=Se:F.next=Se,F=oe;var ke=a.alternate;ke!==null&&(ke=ke.updateQueue,X=ke.lastBaseUpdate,X!==F&&(X===null?ke.firstBaseUpdate=Se:X.next=Se,ke.lastBaseUpdate=oe))}if(C!==null){var lt=w.baseState;F=0,ke=Se=oe=null,X=C;do{var Ke=X.lane,Ot=X.eventTime;if((y&Ke)===Ke){ke!==null&&(ke=ke.next={eventTime:Ot,lane:0,tag:X.tag,payload:X.payload,callback:X.callback,next:null});e:{var je=a,Wn=X;switch(Ke=u,Ot=p,Wn.tag){case 1:if(je=Wn.payload,typeof je=="function"){lt=je.call(Ot,lt,Ke);break e}lt=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Wn.payload,Ke=typeof je=="function"?je.call(Ot,lt,Ke):je,Ke==null)break e;lt=s({},lt,Ke);break e;case 2:Es=!0}}X.callback!==null&&X.lane!==0&&(a.flags|=64,Ke=w.effects,Ke===null?w.effects=[X]:Ke.push(X))}else Ot={eventTime:Ot,lane:Ke,tag:X.tag,payload:X.payload,callback:X.callback,next:null},ke===null?(Se=ke=Ot,oe=lt):ke=ke.next=Ot,F|=Ke;if(X=X.next,X===null){if(X=w.shared.pending,X===null)break;Ke=X,X=Ke.next,Ke.next=null,w.lastBaseUpdate=Ke,w.shared.pending=null}}while(1);if(ke===null&&(oe=lt),w.baseState=oe,w.firstBaseUpdate=Se,w.lastBaseUpdate=ke,u=w.shared.interleaved,u!==null){w=u;do F|=w.lane,w=w.next;while(w!==u)}else C===null&&(w.shared.lanes=0);Pa|=F,a.lanes=F,a.memoizedState=lt}}function u_(a,u,p){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var y=a[u],w=y.callback;if(w!==null){if(y.callback=null,y=p,typeof w!="function")throw Error(o(191,w));w.call(y)}}}var c_=new i.Component().refs;function _m(a,u,p,y){u=a.memoizedState,p=p(y,u),p=p==null?u:s({},u,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var Nf={isMounted:function(a){return(a=a._reactInternals)?R(a)===a:!1},enqueueSetState:function(a,u,p){a=a._reactInternals;var y=$n(),w=As(a),C=jr(y,w);C.payload=u,p!=null&&(C.callback=p),ws(a,C),u=Wi(a,w,y),u!==null&&Lf(u,a,w)},enqueueReplaceState:function(a,u,p){a=a._reactInternals;var y=$n(),w=As(a),C=jr(y,w);C.tag=1,C.payload=u,p!=null&&(C.callback=p),ws(a,C),u=Wi(a,w,y),u!==null&&Lf(u,a,w)},enqueueForceUpdate:function(a,u){a=a._reactInternals;var p=$n(),y=As(a),w=jr(p,y);w.tag=2,u!=null&&(w.callback=u),ws(a,w),u=Wi(a,y,p),u!==null&&Lf(u,a,y)}};function f_(a,u,p,y,w,C,F){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,C,F):u.prototype&&u.prototype.isPureReactComponent?!Rf(p,y)||!Rf(w,C):!0}function h_(a,u,p){var y=!1,w=zn,C=u.contextType;return typeof C=="object"&&C!==null?C=zi(C):(w=tn(u)?nr:_n.current,y=u.contextTypes,C=(y=y!=null)?en(a,w):zn),u=new u(p,C),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Nf,a.stateNode=u,u._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=w,a.__reactInternalMemoizedMaskedChildContext=C),u}function d_(a,u,p,y){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,y),u.state!==a&&Nf.enqueueReplaceState(u,u.state,null)}function xm(a,u,p,y){var w=a.stateNode;w.props=p,w.state=a.memoizedState,w.refs=c_,ym(a);var C=u.contextType;typeof C=="object"&&C!==null?w.context=zi(C):(C=tn(u)?nr:_n.current,w.context=en(a,C)),w.state=a.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(_m(a,u,C,p),w.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(u=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),u!==w.state&&Nf.enqueueReplaceState(w,w.state,null),If(a,p,w,y),w.state=a.memoizedState),typeof w.componentDidMount=="function"&&(a.flags|=4194308)}var Sa=[],Ma=0,Uf=null,Df=0,Bi=[],Hi=0,_o=null,Yr=1,qr="";function xo(a,u){Sa[Ma++]=Df,Sa[Ma++]=Uf,Uf=a,Df=u}function p_(a,u,p){Bi[Hi++]=Yr,Bi[Hi++]=qr,Bi[Hi++]=_o,_o=a;var y=Yr;a=qr;var w=32-ir(y)-1;y&=~(1<<w),p+=1;var C=32-ir(u)+w;if(30<C){var F=w-w%5;C=(y&(1<<F)-1).toString(32),y>>=F,w-=F,Yr=1<<32-ir(u)+w|p<<w|y,qr=C+a}else Yr=1<<C|p<<w|y,qr=a}function Sm(a){a.return!==null&&(xo(a,1),p_(a,1,0))}function Mm(a){for(;a===Uf;)Uf=Sa[--Ma],Sa[Ma]=null,Df=Sa[--Ma],Sa[Ma]=null;for(;a===_o;)_o=Bi[--Hi],Bi[Hi]=null,qr=Bi[--Hi],Bi[Hi]=null,Yr=Bi[--Hi],Bi[Hi]=null}var Ei=null,wi=null,jt=!1,ru=!1,sr=null;function m_(a,u){var p=Xi(5,null,null,0);p.elementType="DELETED",p.stateNode=u,p.return=a,u=a.deletions,u===null?(a.deletions=[p],a.flags|=16):u.push(p)}function g_(a,u){switch(a.tag){case 5:return u=In(u,a.type,a.pendingProps),u!==null?(a.stateNode=u,Ei=a,wi=Mf(u),!0):!1;case 6:return u=yf(u,a.pendingProps),u!==null?(a.stateNode=u,Ei=a,wi=null,!0):!1;case 13:if(u=_f(u),u!==null){var p=_o!==null?{id:Yr,overflow:qr}:null;return a.memoizedState={dehydrated:u,treeContext:p,retryLane:1073741824},p=Xi(18,null,null,0),p.stateNode=u,p.return=a,a.child=p,Ei=a,wi=null,!0}return!1;default:return!1}}function Em(a){return(a.mode&1)!==0&&(a.flags&128)===0}function wm(a){if(jt){var u=wi;if(u){var p=u;if(!g_(a,u)){if(Em(a))throw Error(o(418));u=Tr(p);var y=Ei;u&&g_(a,u)?m_(y,p):(a.flags=a.flags&-4097|2,jt=!1,Ei=a)}}else{if(Em(a))throw Error(o(418));a.flags=a.flags&-4097|2,jt=!1,Ei=a}}}function v_(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Ei=a}function su(a){if(!ge||a!==Ei)return!1;if(!jt)return v_(a),jt=!0,!1;if(a.tag!==3&&(a.tag!==5||tt(a.type)&&!Ee(a.type,a.memoizedProps))){var u=wi;if(u){if(Em(a)){for(a=wi;a;)a=Tr(a);throw Error(o(418))}for(;u;)m_(a,u),u=Tr(u)}}if(v_(a),a.tag===13){if(!ge)throw Error(o(316));if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));wi=ue(a)}else wi=Ei?Tr(a.stateNode):null;return!0}function Ea(){ge&&(wi=Ei=null,ru=jt=!1)}function Tm(a){sr===null?sr=[a]:sr.push(a)}function ou(a,u,p){if(a=p.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(o(309));var y=p.stateNode}if(!y)throw Error(o(147,a));var w=y,C=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===C?u.ref:(u=function(F){var X=w.refs;X===c_&&(X=w.refs={}),F===null?delete X[C]:X[C]=F},u._stringRef=C,u)}if(typeof a!="string")throw Error(o(284));if(!p._owner)throw Error(o(290,a))}return a}function Of(a,u){throw a=Object.prototype.toString.call(u),Error(o(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function y_(a){var u=a._init;return u(a._payload)}function __(a){function u(Q,Y){if(a){var re=Q.deletions;re===null?(Q.deletions=[Y],Q.flags|=16):re.push(Y)}}function p(Q,Y){if(!a)return null;for(;Y!==null;)u(Q,Y),Y=Y.sibling;return null}function y(Q,Y){for(Q=new Map;Y!==null;)Y.key!==null?Q.set(Y.key,Y):Q.set(Y.index,Y),Y=Y.sibling;return Q}function w(Q,Y){return Q=Ps(Q,Y),Q.index=0,Q.sibling=null,Q}function C(Q,Y,re){return Q.index=re,a?(re=Q.alternate,re!==null?(re=re.index,re<Y?(Q.flags|=2,Y):re):(Q.flags|=2,Y)):(Q.flags|=1048576,Y)}function F(Q){return a&&Q.alternate===null&&(Q.flags|=2),Q}function X(Q,Y,re,Ie){return Y===null||Y.tag!==6?(Y=lg(re,Q.mode,Ie),Y.return=Q,Y):(Y=w(Y,re),Y.return=Q,Y)}function oe(Q,Y,re,Ie){var Xe=re.type;return Xe===h?ke(Q,Y,re.props.children,Ie,re.key):Y!==null&&(Y.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===S&&y_(Xe)===Y.type)?(Ie=w(Y,re.props),Ie.ref=ou(Q,Y,re),Ie.return=Q,Ie):(Ie=dh(re.type,re.key,re.props,null,Q.mode,Ie),Ie.ref=ou(Q,Y,re),Ie.return=Q,Ie)}function Se(Q,Y,re,Ie){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==re.containerInfo||Y.stateNode.implementation!==re.implementation?(Y=ug(re,Q.mode,Ie),Y.return=Q,Y):(Y=w(Y,re.children||[]),Y.return=Q,Y)}function ke(Q,Y,re,Ie,Xe){return Y===null||Y.tag!==7?(Y=Ao(re,Q.mode,Ie,Xe),Y.return=Q,Y):(Y=w(Y,re),Y.return=Q,Y)}function lt(Q,Y,re){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Y=lg(""+Y,Q.mode,re),Y.return=Q,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case c:return re=dh(Y.type,Y.key,Y.props,null,Q.mode,re),re.ref=ou(Q,null,Y),re.return=Q,re;case f:return Y=ug(Y,Q.mode,re),Y.return=Q,Y;case S:var Ie=Y._init;return lt(Q,Ie(Y._payload),re)}if($(Y)||P(Y))return Y=Ao(Y,Q.mode,re,null),Y.return=Q,Y;Of(Q,Y)}return null}function Ke(Q,Y,re,Ie){var Xe=Y!==null?Y.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return Xe!==null?null:X(Q,Y,""+re,Ie);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case c:return re.key===Xe?oe(Q,Y,re,Ie):null;case f:return re.key===Xe?Se(Q,Y,re,Ie):null;case S:return Xe=re._init,Ke(Q,Y,Xe(re._payload),Ie)}if($(re)||P(re))return Xe!==null?null:ke(Q,Y,re,Ie,null);Of(Q,re)}return null}function Ot(Q,Y,re,Ie,Xe){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Q=Q.get(re)||null,X(Y,Q,""+Ie,Xe);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case c:return Q=Q.get(Ie.key===null?re:Ie.key)||null,oe(Y,Q,Ie,Xe);case f:return Q=Q.get(Ie.key===null?re:Ie.key)||null,Se(Y,Q,Ie,Xe);case S:var pt=Ie._init;return Ot(Q,Y,re,pt(Ie._payload),Xe)}if($(Ie)||P(Ie))return Q=Q.get(re)||null,ke(Y,Q,Ie,Xe,null);Of(Y,Ie)}return null}function je(Q,Y,re,Ie){for(var Xe=null,pt=null,ut=Y,At=Y=0,An=null;ut!==null&&At<re.length;At++){ut.index>At?(An=ut,ut=null):An=ut.sibling;var Rt=Ke(Q,ut,re[At],Ie);if(Rt===null){ut===null&&(ut=An);break}a&&ut&&Rt.alternate===null&&u(Q,ut),Y=C(Rt,Y,At),pt===null?Xe=Rt:pt.sibling=Rt,pt=Rt,ut=An}if(At===re.length)return p(Q,ut),jt&&xo(Q,At),Xe;if(ut===null){for(;At<re.length;At++)ut=lt(Q,re[At],Ie),ut!==null&&(Y=C(ut,Y,At),pt===null?Xe=ut:pt.sibling=ut,pt=ut);return jt&&xo(Q,At),Xe}for(ut=y(Q,ut);At<re.length;At++)An=Ot(ut,Q,At,re[At],Ie),An!==null&&(a&&An.alternate!==null&&ut.delete(An.key===null?At:An.key),Y=C(An,Y,At),pt===null?Xe=An:pt.sibling=An,pt=An);return a&&ut.forEach(function(bs){return u(Q,bs)}),jt&&xo(Q,At),Xe}function Wn(Q,Y,re,Ie){var Xe=P(re);if(typeof Xe!="function")throw Error(o(150));if(re=Xe.call(re),re==null)throw Error(o(151));for(var pt=Xe=null,ut=Y,At=Y=0,An=null,Rt=re.next();ut!==null&&!Rt.done;At++,Rt=re.next()){ut.index>At?(An=ut,ut=null):An=ut.sibling;var bs=Ke(Q,ut,Rt.value,Ie);if(bs===null){ut===null&&(ut=An);break}a&&ut&&bs.alternate===null&&u(Q,ut),Y=C(bs,Y,At),pt===null?Xe=bs:pt.sibling=bs,pt=bs,ut=An}if(Rt.done)return p(Q,ut),jt&&xo(Q,At),Xe;if(ut===null){for(;!Rt.done;At++,Rt=re.next())Rt=lt(Q,Rt.value,Ie),Rt!==null&&(Y=C(Rt,Y,At),pt===null?Xe=Rt:pt.sibling=Rt,pt=Rt);return jt&&xo(Q,At),Xe}for(ut=y(Q,ut);!Rt.done;At++,Rt=re.next())Rt=Ot(ut,Q,At,Rt.value,Ie),Rt!==null&&(a&&Rt.alternate!==null&&ut.delete(Rt.key===null?At:Rt.key),Y=C(Rt,Y,At),pt===null?Xe=Rt:pt.sibling=Rt,pt=Rt);return a&&ut.forEach(function(LA){return u(Q,LA)}),jt&&xo(Q,At),Xe}function ji(Q,Y,re,Ie){if(typeof re=="object"&&re!==null&&re.type===h&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case c:e:{for(var Xe=re.key,pt=Y;pt!==null;){if(pt.key===Xe){if(Xe=re.type,Xe===h){if(pt.tag===7){p(Q,pt.sibling),Y=w(pt,re.props.children),Y.return=Q,Q=Y;break e}}else if(pt.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===S&&y_(Xe)===pt.type){p(Q,pt.sibling),Y=w(pt,re.props),Y.ref=ou(Q,pt,re),Y.return=Q,Q=Y;break e}p(Q,pt);break}else u(Q,pt);pt=pt.sibling}re.type===h?(Y=Ao(re.props.children,Q.mode,Ie,re.key),Y.return=Q,Q=Y):(Ie=dh(re.type,re.key,re.props,null,Q.mode,Ie),Ie.ref=ou(Q,Y,re),Ie.return=Q,Q=Ie)}return F(Q);case f:e:{for(pt=re.key;Y!==null;){if(Y.key===pt)if(Y.tag===4&&Y.stateNode.containerInfo===re.containerInfo&&Y.stateNode.implementation===re.implementation){p(Q,Y.sibling),Y=w(Y,re.children||[]),Y.return=Q,Q=Y;break e}else{p(Q,Y);break}else u(Q,Y);Y=Y.sibling}Y=ug(re,Q.mode,Ie),Y.return=Q,Q=Y}return F(Q);case S:return pt=re._init,ji(Q,Y,pt(re._payload),Ie)}if($(re))return je(Q,Y,re,Ie);if(P(re))return Wn(Q,Y,re,Ie);Of(Q,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,Y!==null&&Y.tag===6?(p(Q,Y.sibling),Y=w(Y,re),Y.return=Q,Q=Y):(p(Q,Y),Y=lg(re,Q.mode,Ie),Y.return=Q,Q=Y),F(Q)):p(Q,Y)}return ji}var wa=__(!0),x_=__(!1),au={},Vi=at(au),lu=at(au),Ta=at(au);function br(a){if(a===au)throw Error(o(174));return a}function Cm(a,u){st(Ta,u),st(lu,a),st(Vi,au),a=ne(u),Lt(Vi),st(Vi,a)}function Ca(){Lt(Vi),Lt(lu),Lt(Ta)}function S_(a){var u=br(Ta.current),p=br(Vi.current);u=U(p,a.type,u),p!==u&&(st(lu,a),st(Vi,u))}function Am(a){lu.current===a&&(Lt(Vi),Lt(lu))}var qt=at(0);function Ff(a){for(var u=a;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||xf(p)||Ss(p)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Rm=[];function Pm(){for(var a=0;a<Rm.length;a++){var u=Rm[a];Et?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}Rm.length=0}var kf=l.ReactCurrentDispatcher,Gi=l.ReactCurrentBatchConfig,Aa=0,nn=null,Hn=null,Cn=null,zf=!1,uu=!1,cu=0,nA=0;function Vn(){throw Error(o(321))}function bm(a,u){if(u===null)return!1;for(var p=0;p<u.length&&p<a.length;p++)if(!Ar(a[p],u[p]))return!1;return!0}function Lm(a,u,p,y,w,C){if(Aa=C,nn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,kf.current=a===null||a.memoizedState===null?oA:aA,a=p(y,w),uu){C=0;do{if(uu=!1,cu=0,25<=C)throw Error(o(301));C+=1,Cn=Hn=null,u.updateQueue=null,kf.current=lA,a=p(y,w)}while(uu)}if(kf.current=Wf,u=Hn!==null&&Hn.next!==null,Aa=0,Cn=Hn=nn=null,zf=!1,u)throw Error(o(300));return a}function Im(){var a=cu!==0;return cu=0,a}function Zr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?nn.memoizedState=Cn=a:Cn=Cn.next=a,Cn}function Lr(){if(Hn===null){var a=nn.alternate;a=a!==null?a.memoizedState:null}else a=Hn.next;var u=Cn===null?nn.memoizedState:Cn.next;if(u!==null)Cn=u,Hn=a;else{if(a===null)throw Error(o(310));Hn=a,a={memoizedState:Hn.memoizedState,baseState:Hn.baseState,baseQueue:Hn.baseQueue,queue:Hn.queue,next:null},Cn===null?nn.memoizedState=Cn=a:Cn=Cn.next=a}return Cn}function So(a,u){return typeof u=="function"?u(a):u}function Bf(a){var u=Lr(),p=u.queue;if(p===null)throw Error(o(311));p.lastRenderedReducer=a;var y=Hn,w=y.baseQueue,C=p.pending;if(C!==null){if(w!==null){var F=w.next;w.next=C.next,C.next=F}y.baseQueue=w=C,p.pending=null}if(w!==null){C=w.next,y=y.baseState;var X=F=null,oe=null,Se=C;do{var ke=Se.lane;if((Aa&ke)===ke)oe!==null&&(oe=oe.next={lane:0,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),y=Se.hasEagerState?Se.eagerState:a(y,Se.action);else{var lt={lane:ke,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null};oe===null?(X=oe=lt,F=y):oe=oe.next=lt,nn.lanes|=ke,Pa|=ke}Se=Se.next}while(Se!==null&&Se!==C);oe===null?F=y:oe.next=X,Ar(y,u.memoizedState)||(Ti=!0),u.memoizedState=y,u.baseState=F,u.baseQueue=oe,p.lastRenderedState=y}if(a=p.interleaved,a!==null){w=a;do C=w.lane,nn.lanes|=C,Pa|=C,w=w.next;while(w!==a)}else w===null&&(p.lanes=0);return[u.memoizedState,p.dispatch]}function Hf(a){var u=Lr(),p=u.queue;if(p===null)throw Error(o(311));p.lastRenderedReducer=a;var y=p.dispatch,w=p.pending,C=u.memoizedState;if(w!==null){p.pending=null;var F=w=w.next;do C=a(C,F.action),F=F.next;while(F!==w);Ar(C,u.memoizedState)||(Ti=!0),u.memoizedState=C,u.baseQueue===null&&(u.baseState=C),p.lastRenderedState=C}return[C,y]}function M_(){}function E_(a,u){var p=nn,y=Lr(),w=u(),C=!Ar(y.memoizedState,w);if(C&&(y.memoizedState=w,Ti=!0),y=y.queue,hu(C_.bind(null,p,y,a),[a]),y.getSnapshot!==u||C||Cn!==null&&Cn.memoizedState.tag&1){if(p.flags|=2048,fu(9,T_.bind(null,p,y,w,u),void 0,null),pn===null)throw Error(o(349));Aa&30||w_(p,u,w)}return w}function w_(a,u,p){a.flags|=16384,a={getSnapshot:u,value:p},u=nn.updateQueue,u===null?(u={lastEffect:null,stores:null},nn.updateQueue=u,u.stores=[a]):(p=u.stores,p===null?u.stores=[a]:p.push(a))}function T_(a,u,p,y){u.value=p,u.getSnapshot=y,A_(u)&&Wi(a,1,-1)}function C_(a,u,p){return p(function(){A_(u)&&Wi(a,1,-1)})}function A_(a){var u=a.getSnapshot;a=a.value;try{var p=u();return!Ar(a,p)}catch{return!0}}function Nm(a){var u=Zr();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:a},u.queue=a,a=a.dispatch=sA.bind(null,nn,a),[u.memoizedState,a]}function fu(a,u,p,y){return a={tag:a,create:u,destroy:p,deps:y,next:null},u=nn.updateQueue,u===null?(u={lastEffect:null,stores:null},nn.updateQueue=u,u.lastEffect=a.next=a):(p=u.lastEffect,p===null?u.lastEffect=a.next=a:(y=p.next,p.next=a,a.next=y,u.lastEffect=a)),a}function R_(){return Lr().memoizedState}function Vf(a,u,p,y){var w=Zr();nn.flags|=a,w.memoizedState=fu(1|u,p,void 0,y===void 0?null:y)}function Gf(a,u,p,y){var w=Lr();y=y===void 0?null:y;var C=void 0;if(Hn!==null){var F=Hn.memoizedState;if(C=F.destroy,y!==null&&bm(y,F.deps)){w.memoizedState=fu(u,p,C,y);return}}nn.flags|=a,w.memoizedState=fu(1|u,p,C,y)}function Um(a,u){return Vf(8390656,8,a,u)}function hu(a,u){return Gf(2048,8,a,u)}function P_(a,u){return Gf(4,2,a,u)}function b_(a,u){return Gf(4,4,a,u)}function L_(a,u){if(typeof u=="function")return a=a(),u(a),function(){u(null)};if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function I_(a,u,p){return p=p!=null?p.concat([a]):null,Gf(4,4,L_.bind(null,u,a),p)}function Dm(){}function N_(a,u){var p=Lr();u=u===void 0?null:u;var y=p.memoizedState;return y!==null&&u!==null&&bm(u,y[1])?y[0]:(p.memoizedState=[a,u],a)}function U_(a,u){var p=Lr();u=u===void 0?null:u;var y=p.memoizedState;return y!==null&&u!==null&&bm(u,y[1])?y[0]:(a=a(),p.memoizedState=[a,u],a)}function iA(a,u){var p=Ct;Ct=p!==0&&4>p?p:4,a(!0);var y=Gi.transition;Gi.transition={};try{a(!1),u()}finally{Ct=p,Gi.transition=y}}function D_(){return Lr().memoizedState}function rA(a,u,p){var y=As(a);p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},O_(a)?F_(u,p):(k_(a,u,p),p=$n(),a=Wi(a,y,p),a!==null&&z_(a,u,y))}function sA(a,u,p){var y=As(a),w={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(O_(a))F_(u,w);else{k_(a,u,w);var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=u.lastRenderedReducer,C!==null))try{var F=u.lastRenderedState,X=C(F,p);if(w.hasEagerState=!0,w.eagerState=X,Ar(X,F))return}catch{}finally{}p=$n(),a=Wi(a,y,p),a!==null&&z_(a,u,y)}}function O_(a){var u=a.alternate;return a===nn||u!==null&&u===nn}function F_(a,u){uu=zf=!0;var p=a.pending;p===null?u.next=u:(u.next=p.next,p.next=u),a.pending=u}function k_(a,u,p){pn!==null&&a.mode&1&&!(_t&2)?(a=u.interleaved,a===null?(p.next=p,Pr===null?Pr=[u]:Pr.push(u)):(p.next=a.next,a.next=p),u.interleaved=p):(a=u.pending,a===null?p.next=p:(p.next=a.next,a.next=p),u.pending=p)}function z_(a,u,p){if(p&4194240){var y=u.lanes;y&=a.pendingLanes,p|=y,u.lanes=p,um(a,p)}}var Wf={readContext:zi,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},oA={readContext:zi,useCallback:function(a,u){return Zr().memoizedState=[a,u===void 0?null:u],a},useContext:zi,useEffect:Um,useImperativeHandle:function(a,u,p){return p=p!=null?p.concat([a]):null,Vf(4194308,4,L_.bind(null,u,a),p)},useLayoutEffect:function(a,u){return Vf(4194308,4,a,u)},useInsertionEffect:function(a,u){return Vf(4,2,a,u)},useMemo:function(a,u){var p=Zr();return u=u===void 0?null:u,a=a(),p.memoizedState=[a,u],a},useReducer:function(a,u,p){var y=Zr();return u=p!==void 0?p(u):u,y.memoizedState=y.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},y.queue=a,a=a.dispatch=rA.bind(null,nn,a),[y.memoizedState,a]},useRef:function(a){var u=Zr();return a={current:a},u.memoizedState=a},useState:Nm,useDebugValue:Dm,useDeferredValue:function(a){var u=Nm(a),p=u[0],y=u[1];return Um(function(){var w=Gi.transition;Gi.transition={};try{y(a)}finally{Gi.transition=w}},[a]),p},useTransition:function(){var a=Nm(!1),u=a[0];return a=iA.bind(null,a[1]),Zr().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,p){var y=nn,w=Zr();if(jt){if(p===void 0)throw Error(o(407));p=p()}else{if(p=u(),pn===null)throw Error(o(349));Aa&30||w_(y,u,p)}w.memoizedState=p;var C={value:p,getSnapshot:u};return w.queue=C,Um(C_.bind(null,y,C,a),[a]),y.flags|=2048,fu(9,T_.bind(null,y,C,p,u),void 0,null),p},useId:function(){var a=Zr(),u=pn.identifierPrefix;if(jt){var p=qr,y=Yr;p=(y&~(1<<32-ir(y)-1)).toString(32)+p,u=":"+u+"R"+p,p=cu++,0<p&&(u+="H"+p.toString(32)),u+=":"}else p=nA++,u=":"+u+"r"+p.toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},aA={readContext:zi,useCallback:N_,useContext:zi,useEffect:hu,useImperativeHandle:I_,useInsertionEffect:P_,useLayoutEffect:b_,useMemo:U_,useReducer:Bf,useRef:R_,useState:function(){return Bf(So)},useDebugValue:Dm,useDeferredValue:function(a){var u=Bf(So),p=u[0],y=u[1];return hu(function(){var w=Gi.transition;Gi.transition={};try{y(a)}finally{Gi.transition=w}},[a]),p},useTransition:function(){var a=Bf(So)[0],u=Lr().memoizedState;return[a,u]},useMutableSource:M_,useSyncExternalStore:E_,useId:D_,unstable_isNewReconciler:!1},lA={readContext:zi,useCallback:N_,useContext:zi,useEffect:hu,useImperativeHandle:I_,useInsertionEffect:P_,useLayoutEffect:b_,useMemo:U_,useReducer:Hf,useRef:R_,useState:function(){return Hf(So)},useDebugValue:Dm,useDeferredValue:function(a){var u=Hf(So),p=u[0],y=u[1];return hu(function(){var w=Gi.transition;Gi.transition={};try{y(a)}finally{Gi.transition=w}},[a]),p},useTransition:function(){var a=Hf(So)[0],u=Lr().memoizedState;return[a,u]},useMutableSource:M_,useSyncExternalStore:E_,useId:D_,unstable_isNewReconciler:!1};function Om(a,u){try{var p="",y=u;do p+=tA(y),y=y.return;while(y);var w=p}catch(C){w=`
Error generating stack: `+C.message+`
`+C.stack}return{value:a,source:u,stack:w}}function Fm(a,u){try{console.error(u.value)}catch(p){setTimeout(function(){throw p})}}var uA=typeof WeakMap=="function"?WeakMap:Map;function B_(a,u,p){p=jr(-1,p),p.tag=3,p.payload={element:null};var y=u.value;return p.callback=function(){oh||(oh=!0,tg=y),Fm(a,u)},p}function H_(a,u,p){p=jr(-1,p),p.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var w=u.value;p.payload=function(){return y(w)},p.callback=function(){Fm(a,u)}}var C=a.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(p.callback=function(){Fm(a,u),typeof y!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var F=u.stack;this.componentDidCatch(u.value,{componentStack:F!==null?F:""})}),p}function V_(a,u,p){var y=a.pingCache;if(y===null){y=a.pingCache=new uA;var w=new Set;y.set(u,w)}else w=y.get(u),w===void 0&&(w=new Set,y.set(u,w));w.has(p)||(w.add(p),a=EA.bind(null,a,u,p),u.then(a,a))}function G_(a){do{var u;if((u=a.tag===13)&&(u=a.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return a;a=a.return}while(a!==null);return null}function W_(a,u,p,y,w){return a.mode&1?(a.flags|=65536,a.lanes=w,a):(a===u?a.flags|=65536:(a.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(u=jr(-1,1),u.tag=2,ws(p,u))),p.lanes|=1),a)}function Ir(a){a.flags|=4}function X_(a,u){if(a!==null&&a.child===u.child)return!0;if(u.flags&16)return!1;for(a=u.child;a!==null;){if(a.flags&12854||a.subtreeFlags&12854)return!1;a=a.sibling}return!0}var du,pu,Xf,jf;if(Ye)du=function(a,u){for(var p=u.child;p!==null;){if(p.tag===5||p.tag===6)B(a,p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},pu=function(){},Xf=function(a,u,p,y,w){if(a=a.memoizedProps,a!==y){var C=u.stateNode,F=br(Vi.current);p=se(C,p,a,y,w,F),(u.updateQueue=p)&&Ir(u)}},jf=function(a,u,p,y){p!==y&&Ir(u)};else if(V){du=function(a,u,p,y){for(var w=u.child;w!==null;){if(w.tag===5){var C=w.stateNode;p&&y&&(C=Bt(C,w.type,w.memoizedProps,w)),B(a,C)}else if(w.tag===6)C=w.stateNode,p&&y&&(C=xi(C,w.memoizedProps,w)),B(a,C);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)C=w.child,C!==null&&(C.return=w),du(a,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===u)break;for(;w.sibling===null;){if(w.return===null||w.return===u)return;w=w.return}w.sibling.return=w.return,w=w.sibling}};var j_=function(a,u,p,y){for(var w=u.child;w!==null;){if(w.tag===5){var C=w.stateNode;p&&y&&(C=Bt(C,w.type,w.memoizedProps,w)),zt(a,C)}else if(w.tag===6)C=w.stateNode,p&&y&&(C=xi(C,w.memoizedProps,w)),zt(a,C);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)C=w.child,C!==null&&(C.return=w),j_(a,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===u)break;for(;w.sibling===null;){if(w.return===null||w.return===u)return;w=w.return}w.sibling.return=w.return,w=w.sibling}};pu=function(a,u){var p=u.stateNode;if(!X_(a,u)){a=p.containerInfo;var y=Mt(a);j_(y,u,!1,!1),p.pendingChildren=y,Ir(u),$t(a,y)}},Xf=function(a,u,p,y,w){var C=a.stateNode,F=a.memoizedProps;if((a=X_(a,u))&&F===y)u.stateNode=C;else{var X=u.stateNode,oe=br(Vi.current),Se=null;F!==y&&(Se=se(X,p,F,y,w,oe)),a&&Se===null?u.stateNode=C:(C=Le(C,Se,p,F,y,u,a,X),he(C,p,y,w,oe)&&Ir(u),u.stateNode=C,a?Ir(u):du(C,u,!1,!1))}},jf=function(a,u,p,y){p!==y?(a=br(Ta.current),p=br(Vi.current),u.stateNode=ve(y,a,p,u),Ir(u)):u.stateNode=a.stateNode}}else pu=function(){},Xf=function(){},jf=function(){};function mu(a,u){if(!jt)switch(a.tailMode){case"hidden":u=a.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function Gn(a){var u=a.alternate!==null&&a.alternate.child===a.child,p=0,y=0;if(u)for(var w=a.child;w!==null;)p|=w.lanes|w.childLanes,y|=w.subtreeFlags&14680064,y|=w.flags&14680064,w.return=a,w=w.sibling;else for(w=a.child;w!==null;)p|=w.lanes|w.childLanes,y|=w.subtreeFlags,y|=w.flags,w.return=a,w=w.sibling;return a.subtreeFlags|=y,a.childLanes=p,u}function cA(a,u,p){var y=u.pendingProps;switch(Mm(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(u),null;case 1:return tn(u.type)&&Ms(),Gn(u),null;case 3:return y=u.stateNode,Ca(),Lt(dn),Lt(_n),Pm(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(a===null||a.child===null)&&(su(u)?Ir(u):a===null||a.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,sr!==null&&(rg(sr),sr=null))),pu(a,u),Gn(u),null;case 5:Am(u),p=br(Ta.current);var w=u.type;if(a!==null&&u.stateNode!=null)Xf(a,u,w,y,p),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!y){if(u.stateNode===null)throw Error(o(166));return Gn(u),null}if(a=br(Vi.current),su(u)){if(!ge)throw Error(o(175));a=om(u.stateNode,u.type,u.memoizedProps,p,a,u,!ru),u.updateQueue=a,a!==null&&Ir(u)}else{var C=te(w,y,p,a,u);du(C,u,!1,!1),u.stateNode=C,he(C,w,y,p,a)&&Ir(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Gn(u),null;case 6:if(a&&u.stateNode!=null)jf(a,u,a.memoizedProps,y);else{if(typeof y!="string"&&u.stateNode===null)throw Error(o(166));if(a=br(Ta.current),p=br(Vi.current),su(u)){if(!ge)throw Error(o(176));if(a=u.stateNode,y=u.memoizedProps,(p=D(a,y,u,!ru))&&(w=Ei,w!==null))switch(C=(w.mode&1)!==0,w.tag){case 3:nt(w.stateNode.containerInfo,a,y,C);break;case 5:yt(w.type,w.memoizedProps,w.stateNode,a,y,C)}p&&Ir(u)}else u.stateNode=ve(y,a,p,u)}return Gn(u),null;case 13:if(Lt(qt),y=u.memoizedState,jt&&wi!==null&&u.mode&1&&!(u.flags&128)){for(a=wi;a;)a=Tr(a);return Ea(),u.flags|=98560,u}if(y!==null&&y.dehydrated!==null){if(y=su(u),a===null){if(!y)throw Error(o(318));if(!ge)throw Error(o(344));if(a=u.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));ee(a,u)}else Ea(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;return Gn(u),null}return sr!==null&&(rg(sr),sr=null),u.flags&128?(u.lanes=p,u):(y=y!==null,p=!1,a===null?su(u):p=a.memoizedState!==null,y&&!p&&(u.child.flags|=8192,u.mode&1&&(a===null||qt.current&1?xn===0&&(xn=3):og())),u.updateQueue!==null&&(u.flags|=4),Gn(u),null);case 4:return Ca(),pu(a,u),a===null&&Me(u.stateNode.containerInfo),Gn(u),null;case 10:return gm(u.type._context),Gn(u),null;case 17:return tn(u.type)&&Ms(),Gn(u),null;case 19:if(Lt(qt),w=u.memoizedState,w===null)return Gn(u),null;if(y=(u.flags&128)!==0,C=w.rendering,C===null)if(y)mu(w,!1);else{if(xn!==0||a!==null&&a.flags&128)for(a=u.child;a!==null;){if(C=Ff(a),C!==null){for(u.flags|=128,mu(w,!1),a=C.updateQueue,a!==null&&(u.updateQueue=a,u.flags|=4),u.subtreeFlags=0,a=p,y=u.child;y!==null;)p=y,w=a,p.flags&=14680066,C=p.alternate,C===null?(p.childLanes=0,p.lanes=w,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=C.childLanes,p.lanes=C.lanes,p.child=C.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=C.memoizedProps,p.memoizedState=C.memoizedState,p.updateQueue=C.updateQueue,p.type=C.type,w=C.dependencies,p.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext}),y=y.sibling;return st(qt,qt.current&1|2),u.child}a=a.sibling}w.tail!==null&&Tn()>eg&&(u.flags|=128,y=!0,mu(w,!1),u.lanes=4194304)}else{if(!y)if(a=Ff(C),a!==null){if(u.flags|=128,y=!0,a=a.updateQueue,a!==null&&(u.updateQueue=a,u.flags|=4),mu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!C.alternate&&!jt)return Gn(u),null}else 2*Tn()-w.renderingStartTime>eg&&p!==1073741824&&(u.flags|=128,y=!0,mu(w,!1),u.lanes=4194304);w.isBackwards?(C.sibling=u.child,u.child=C):(a=w.last,a!==null?a.sibling=C:u.child=C,w.last=C)}return w.tail!==null?(u=w.tail,w.rendering=u,w.tail=u.sibling,w.renderingStartTime=Tn(),u.sibling=null,a=qt.current,st(qt,y?a&1|2:a&1),u):(Gn(u),null);case 22:case 23:return sg(),y=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==y&&(u.flags|=8192),y&&u.mode&1?Ci&1073741824&&(Gn(u),Ye&&u.subtreeFlags&6&&(u.flags|=8192)):Gn(u),null;case 24:return null;case 25:return null}throw Error(o(156,u.tag))}var fA=l.ReactCurrentOwner,Ti=!1;function Qn(a,u,p,y){u.child=a===null?x_(u,null,p,y):wa(u,a.child,p,y)}function Y_(a,u,p,y,w){p=p.render;var C=u.ref;return xa(u,w),y=Lm(a,u,p,y,C,w),p=Im(),a!==null&&!Ti?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~w,Jr(a,u,w)):(jt&&p&&Sm(u),u.flags|=1,Qn(a,u,y,w),u.child)}function q_(a,u,p,y,w){if(a===null){var C=p.type;return typeof C=="function"&&!ag(C)&&C.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(u.tag=15,u.type=C,Z_(a,u,C,y,w)):(a=dh(p.type,null,y,u,u.mode,w),a.ref=u.ref,a.return=u,u.child=a)}if(C=a.child,!(a.lanes&w)){var F=C.memoizedProps;if(p=p.compare,p=p!==null?p:Rf,p(F,y)&&a.ref===u.ref)return Jr(a,u,w)}return u.flags|=1,a=Ps(C,y),a.ref=u.ref,a.return=u,u.child=a}function Z_(a,u,p,y,w){if(a!==null&&Rf(a.memoizedProps,y)&&a.ref===u.ref)if(Ti=!1,(a.lanes&w)!==0)a.flags&131072&&(Ti=!0);else return u.lanes=a.lanes,Jr(a,u,w);return km(a,u,p,y,w)}function J_(a,u,p){var y=u.pendingProps,w=y.children,C=a!==null?a.memoizedState:null;if(y.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null},st(Ra,Ci),Ci|=p;else if(p&1073741824)u.memoizedState={baseLanes:0,cachePool:null},y=C!==null?C.baseLanes:p,st(Ra,Ci),Ci|=y;else return a=C!==null?C.baseLanes|p:p,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:a,cachePool:null},u.updateQueue=null,st(Ra,Ci),Ci|=a,null;else C!==null?(y=C.baseLanes|p,u.memoizedState=null):y=p,st(Ra,Ci),Ci|=y;return Qn(a,u,w,p),u.child}function K_(a,u){var p=u.ref;(a===null&&p!==null||a!==null&&a.ref!==p)&&(u.flags|=512,u.flags|=2097152)}function km(a,u,p,y,w){var C=tn(p)?nr:_n.current;return C=en(u,C),xa(u,w),p=Lm(a,u,p,y,C,w),y=Im(),a!==null&&!Ti?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~w,Jr(a,u,w)):(jt&&y&&Sm(u),u.flags|=1,Qn(a,u,p,w),u.child)}function Q_(a,u,p,y,w){if(tn(p)){var C=!0;ya(u)}else C=!1;if(xa(u,w),u.stateNode===null)a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2),h_(u,p,y),xm(u,p,y,w),y=!0;else if(a===null){var F=u.stateNode,X=u.memoizedProps;F.props=X;var oe=F.context,Se=p.contextType;typeof Se=="object"&&Se!==null?Se=zi(Se):(Se=tn(p)?nr:_n.current,Se=en(u,Se));var ke=p.getDerivedStateFromProps,lt=typeof ke=="function"||typeof F.getSnapshotBeforeUpdate=="function";lt||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(X!==y||oe!==Se)&&d_(u,F,y,Se),Es=!1;var Ke=u.memoizedState;F.state=Ke,If(u,y,F,w),oe=u.memoizedState,X!==y||Ke!==oe||dn.current||Es?(typeof ke=="function"&&(_m(u,p,ke,y),oe=u.memoizedState),(X=Es||f_(u,p,X,y,Ke,oe,Se))?(lt||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(u.flags|=4194308)):(typeof F.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=oe),F.props=y,F.state=oe,F.context=Se,y=X):(typeof F.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{F=u.stateNode,a_(a,u),X=u.memoizedProps,Se=u.type===u.elementType?X:rr(u.type,X),F.props=Se,lt=u.pendingProps,Ke=F.context,oe=p.contextType,typeof oe=="object"&&oe!==null?oe=zi(oe):(oe=tn(p)?nr:_n.current,oe=en(u,oe));var Ot=p.getDerivedStateFromProps;(ke=typeof Ot=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(X!==lt||Ke!==oe)&&d_(u,F,y,oe),Es=!1,Ke=u.memoizedState,F.state=Ke,If(u,y,F,w);var je=u.memoizedState;X!==lt||Ke!==je||dn.current||Es?(typeof Ot=="function"&&(_m(u,p,Ot,y),je=u.memoizedState),(Se=Es||f_(u,p,Se,y,Ke,je,oe)||!1)?(ke||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(y,je,oe),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(y,je,oe)),typeof F.componentDidUpdate=="function"&&(u.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof F.componentDidUpdate!="function"||X===a.memoizedProps&&Ke===a.memoizedState||(u.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||X===a.memoizedProps&&Ke===a.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=je),F.props=y,F.state=je,F.context=oe,y=Se):(typeof F.componentDidUpdate!="function"||X===a.memoizedProps&&Ke===a.memoizedState||(u.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||X===a.memoizedProps&&Ke===a.memoizedState||(u.flags|=1024),y=!1)}return zm(a,u,p,y,C,w)}function zm(a,u,p,y,w,C){K_(a,u);var F=(u.flags&128)!==0;if(!y&&!F)return w&&tu(u,p,!1),Jr(a,u,C);y=u.stateNode,fA.current=u;var X=F&&typeof p.getDerivedStateFromError!="function"?null:y.render();return u.flags|=1,a!==null&&F?(u.child=wa(u,a.child,null,C),u.child=wa(u,null,X,C)):Qn(a,u,X,C),u.memoizedState=y.state,w&&tu(u,p,!0),u.child}function $_(a){var u=a.stateNode;u.pendingContext?Bn(a,u.pendingContext,u.pendingContext!==u.context):u.context&&Bn(a,u.context,!1),Cm(a,u.containerInfo)}function ex(a,u,p,y,w){return Ea(),Tm(w),u.flags|=256,Qn(a,u,p,y),u.child}var Yf={dehydrated:null,treeContext:null,retryLane:0};function qf(a){return{baseLanes:a,cachePool:null}}function tx(a,u,p){var y=u.pendingProps,w=qt.current,C=!1,F=(u.flags&128)!==0,X;if((X=F)||(X=a!==null&&a.memoizedState===null?!1:(w&2)!==0),X?(C=!0,u.flags&=-129):(a===null||a.memoizedState!==null)&&(w|=1),st(qt,w&1),a===null)return wm(u),a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(u.mode&1?Ss(a)?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(w=y.children,a=y.fallback,C?(y=u.mode,C=u.child,w={mode:"hidden",children:w},!(y&1)&&C!==null?(C.childLanes=0,C.pendingProps=w):C=ph(w,y,0,null),a=Ao(a,y,p,null),C.return=u,a.return=u,C.sibling=a,u.child=C,u.child.memoizedState=qf(p),u.memoizedState=Yf,a):Bm(u,w));if(w=a.memoizedState,w!==null){if(X=w.dehydrated,X!==null){if(F)return u.flags&256?(u.flags&=-257,Zf(a,u,p,Error(o(422)))):u.memoizedState!==null?(u.child=a.child,u.flags|=128,null):(C=y.fallback,w=u.mode,y=ph({mode:"visible",children:y.children},w,0,null),C=Ao(C,w,p,null),C.flags|=2,y.return=u,C.return=u,y.sibling=C,u.child=y,u.mode&1&&wa(u,a.child,null,p),u.child.memoizedState=qf(p),u.memoizedState=Yf,C);if(!(u.mode&1))u=Zf(a,u,p,null);else if(Ss(X))u=Zf(a,u,p,Error(o(419)));else if(y=(p&a.childLanes)!==0,Ti||y){if(y=pn,y!==null){switch(p&-p){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}y=C&(y.suspendedLanes|p)?0:C,y!==0&&y!==w.retryLane&&(w.retryLane=y,Wi(a,y,-1))}og(),u=Zf(a,u,p,Error(o(421)))}else xf(X)?(u.flags|=128,u.child=a.child,u=wA.bind(null,a),Sf(X,u),u=null):(p=w.treeContext,ge&&(wi=sm(X),Ei=u,jt=!0,sr=null,ru=!1,p!==null&&(Bi[Hi++]=Yr,Bi[Hi++]=qr,Bi[Hi++]=_o,Yr=p.id,qr=p.overflow,_o=u)),u=Bm(u,u.pendingProps.children),u.flags|=4096);return u}return C?(y=ix(a,u,y.children,y.fallback,p),C=u.child,w=a.child.memoizedState,C.memoizedState=w===null?qf(p):{baseLanes:w.baseLanes|p,cachePool:null},C.childLanes=a.childLanes&~p,u.memoizedState=Yf,y):(p=nx(a,u,y.children,p),u.memoizedState=null,p)}return C?(y=ix(a,u,y.children,y.fallback,p),C=u.child,w=a.child.memoizedState,C.memoizedState=w===null?qf(p):{baseLanes:w.baseLanes|p,cachePool:null},C.childLanes=a.childLanes&~p,u.memoizedState=Yf,y):(p=nx(a,u,y.children,p),u.memoizedState=null,p)}function Bm(a,u){return u=ph({mode:"visible",children:u},a.mode,0,null),u.return=a,a.child=u}function nx(a,u,p,y){var w=a.child;return a=w.sibling,p=Ps(w,{mode:"visible",children:p}),!(u.mode&1)&&(p.lanes=y),p.return=u,p.sibling=null,a!==null&&(y=u.deletions,y===null?(u.deletions=[a],u.flags|=16):y.push(a)),u.child=p}function ix(a,u,p,y,w){var C=u.mode;a=a.child;var F=a.sibling,X={mode:"hidden",children:p};return!(C&1)&&u.child!==a?(p=u.child,p.childLanes=0,p.pendingProps=X,u.deletions=null):(p=Ps(a,X),p.subtreeFlags=a.subtreeFlags&14680064),F!==null?y=Ps(F,y):(y=Ao(y,C,w,null),y.flags|=2),y.return=u,p.return=u,p.sibling=y,u.child=p,y}function Zf(a,u,p,y){return y!==null&&Tm(y),wa(u,a.child,null,p),a=Bm(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function rx(a,u,p){a.lanes|=u;var y=a.alternate;y!==null&&(y.lanes|=u),vm(a.return,u,p)}function Hm(a,u,p,y,w){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:w}:(C.isBackwards=u,C.rendering=null,C.renderingStartTime=0,C.last=y,C.tail=p,C.tailMode=w)}function sx(a,u,p){var y=u.pendingProps,w=y.revealOrder,C=y.tail;if(Qn(a,u,y.children,p),y=qt.current,y&2)y=y&1|2,u.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&rx(a,p,u);else if(a.tag===19)rx(a,p,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(st(qt,y),!(u.mode&1))u.memoizedState=null;else switch(w){case"forwards":for(p=u.child,w=null;p!==null;)a=p.alternate,a!==null&&Ff(a)===null&&(w=p),p=p.sibling;p=w,p===null?(w=u.child,u.child=null):(w=p.sibling,p.sibling=null),Hm(u,!1,w,p,C);break;case"backwards":for(p=null,w=u.child,u.child=null;w!==null;){if(a=w.alternate,a!==null&&Ff(a)===null){u.child=w;break}a=w.sibling,w.sibling=p,p=w,w=a}Hm(u,!0,p,null,C);break;case"together":Hm(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Jr(a,u,p){if(a!==null&&(u.dependencies=a.dependencies),Pa|=u.lanes,!(p&u.childLanes))return null;if(a!==null&&u.child!==a.child)throw Error(o(153));if(u.child!==null){for(a=u.child,p=Ps(a,a.pendingProps),u.child=p,p.return=u;a.sibling!==null;)a=a.sibling,p=p.sibling=Ps(a,a.pendingProps),p.return=u;p.sibling=null}return u.child}function hA(a,u,p){switch(u.tag){case 3:$_(u),Ea();break;case 5:S_(u);break;case 1:tn(u.type)&&ya(u);break;case 4:Cm(u,u.stateNode.containerInfo);break;case 10:o_(u,u.type._context,u.memoizedProps.value);break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(st(qt,qt.current&1),u.flags|=128,null):p&u.child.childLanes?tx(a,u,p):(st(qt,qt.current&1),a=Jr(a,u,p),a!==null?a.sibling:null);st(qt,qt.current&1);break;case 19:if(y=(p&u.childLanes)!==0,a.flags&128){if(y)return sx(a,u,p);u.flags|=128}var w=u.memoizedState;if(w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),st(qt,qt.current),y)break;return null;case 22:case 23:return u.lanes=0,J_(a,u,p)}return Jr(a,u,p)}function dA(a,u){switch(Mm(u),u.tag){case 1:return tn(u.type)&&Ms(),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return Ca(),Lt(dn),Lt(_n),Pm(),a=u.flags,a&65536&&!(a&128)?(u.flags=a&-65537|128,u):null;case 5:return Am(u),null;case 13:if(Lt(qt),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(o(340));Ea()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return Lt(qt),null;case 4:return Ca(),null;case 10:return gm(u.type._context),null;case 22:case 23:return sg(),null;case 24:return null;default:return null}}var Jf=!1,Mo=!1,pA=typeof WeakSet=="function"?WeakSet:Set,be=null;function Kf(a,u){var p=a.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){ci(a,u,y)}else p.current=null}function Vm(a,u,p){try{p()}catch(y){ci(a,u,y)}}var ox=!1;function mA(a,u){for(H(a.containerInfo),be=u;be!==null;)if(a=be,u=a.child,(a.subtreeFlags&1028)!==0&&u!==null)u.return=a,be=u;else for(;be!==null;){a=be;try{var p=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,w=p.memoizedState,C=a.stateNode,F=C.getSnapshotBeforeUpdate(a.elementType===a.type?y:rr(a.type,y),w);C.__reactInternalSnapshotBeforeUpdate=F}break;case 3:Ye&&we(a.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(X){ci(a,a.return,X)}if(u=a.sibling,u!==null){u.return=a.return,be=u;break}be=a.return}return p=ox,ox=!1,p}function Eo(a,u,p){var y=u.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var w=y=y.next;do{if((w.tag&a)===a){var C=w.destroy;w.destroy=void 0,C!==void 0&&Vm(u,p,C)}w=w.next}while(w!==y)}}function gu(a,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var p=u=u.next;do{if((p.tag&a)===a){var y=p.create;p.destroy=y()}p=p.next}while(p!==u)}}function Gm(a){var u=a.ref;if(u!==null){var p=a.stateNode;switch(a.tag){case 5:a=ae(p);break;default:a=p}typeof u=="function"?u(a):u.current=a}}function ax(a,u,p){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(Cf,u)}catch{}switch(u.tag){case 0:case 11:case 14:case 15:if(a=u.updateQueue,a!==null&&(a=a.lastEffect,a!==null)){var y=a=a.next;do{var w=y,C=w.destroy;w=w.tag,C!==void 0&&(w&2||w&4)&&Vm(u,p,C),y=y.next}while(y!==a)}break;case 1:if(Kf(u,p),a=u.stateNode,typeof a.componentWillUnmount=="function")try{a.props=u.memoizedProps,a.state=u.memoizedState,a.componentWillUnmount()}catch(F){ci(u,p,F)}break;case 5:Kf(u,p);break;case 4:Ye?dx(a,u,p):V&&V&&(u=u.stateNode.containerInfo,p=Mt(u),wr(u,p))}}function lx(a,u,p){for(var y=u;;)if(ax(a,y,p),y.child===null||Ye&&y.tag===4){if(y===u)break;for(;y.sibling===null;){if(y.return===null||y.return===u)return;y=y.return}y.sibling.return=y.return,y=y.sibling}else y.child.return=y,y=y.child}function ux(a){var u=a.alternate;u!==null&&(a.alternate=null,ux(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&Ge(u)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function cx(a){return a.tag===5||a.tag===3||a.tag===4}function fx(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||cx(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function hx(a){if(Ye){e:{for(var u=a.return;u!==null;){if(cx(u))break e;u=u.return}throw Error(o(160))}var p=u;switch(p.tag){case 5:u=p.stateNode,p.flags&32&&(dt(u),p.flags&=-33),p=fx(a),Xm(a,p,u);break;case 3:case 4:u=p.stateNode.containerInfo,p=fx(a),Wm(a,p,u);break;default:throw Error(o(161))}}}function Wm(a,u,p){var y=a.tag;if(y===5||y===6)a=a.stateNode,u?Qe(p,a,u):We(p,a);else if(y!==4&&(a=a.child,a!==null))for(Wm(a,u,p),a=a.sibling;a!==null;)Wm(a,u,p),a=a.sibling}function Xm(a,u,p){var y=a.tag;if(y===5||y===6)a=a.stateNode,u?Ze(p,a,u):Ae(p,a);else if(y!==4&&(a=a.child,a!==null))for(Xm(a,u,p),a=a.sibling;a!==null;)Xm(a,u,p),a=a.sibling}function dx(a,u,p){for(var y=u,w=!1,C,F;;){if(!w){w=y.return;e:for(;;){if(w===null)throw Error(o(160));switch(C=w.stateNode,w.tag){case 5:F=!1;break e;case 3:C=C.containerInfo,F=!0;break e;case 4:C=C.containerInfo,F=!0;break e}w=w.return}w=!0}if(y.tag===5||y.tag===6)lx(a,y,p),F?Be(C,y.stateNode):ze(C,y.stateNode);else if(y.tag===18)F?Je(C,y.stateNode):Fe(C,y.stateNode);else if(y.tag===4){if(y.child!==null){C=y.stateNode.containerInfo,F=!0,y.child.return=y,y=y.child;continue}}else if(ax(a,y,p),y.child!==null){y.child.return=y,y=y.child;continue}if(y===u)break;for(;y.sibling===null;){if(y.return===null||y.return===u)return;y=y.return,y.tag===4&&(w=!1)}y.sibling.return=y.return,y=y.sibling}}function jm(a,u){if(Ye){switch(u.tag){case 0:case 11:case 14:case 15:Eo(3,u,u.return),gu(3,u),Eo(5,u,u.return);return;case 1:return;case 5:var p=u.stateNode;if(p!=null){var y=u.memoizedProps;a=a!==null?a.memoizedProps:y;var w=u.type,C=u.updateQueue;u.updateQueue=null,C!==null&&qe(p,C,w,a,y,u)}return;case 6:if(u.stateNode===null)throw Error(o(162));p=u.memoizedProps,Re(u.stateNode,a!==null?a.memoizedProps:p,p);return;case 3:ge&&a!==null&&a.memoizedState.isDehydrated&&q(u.stateNode.containerInfo);return;case 12:return;case 13:Qf(u);return;case 19:Qf(u);return;case 17:return}throw Error(o(163))}switch(u.tag){case 0:case 11:case 14:case 15:Eo(3,u,u.return),gu(3,u),Eo(5,u,u.return);return;case 12:return;case 13:Qf(u);return;case 19:Qf(u);return;case 3:ge&&a!==null&&a.memoizedState.isDehydrated&&q(u.stateNode.containerInfo);break;case 22:case 23:return}e:if(V){switch(u.tag){case 1:case 5:case 6:break e;case 3:case 4:u=u.stateNode,wr(u.containerInfo,u.pendingChildren);break e}throw Error(o(163))}}function Qf(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var p=a.stateNode;p===null&&(p=a.stateNode=new pA),u.forEach(function(y){var w=TA.bind(null,a,y);p.has(y)||(p.add(y),y.then(w,w))})}}function gA(a,u){for(be=u;be!==null;){u=be;var p=u.deletions;if(p!==null)for(var y=0;y<p.length;y++){var w=p[y];try{var C=a;Ye?dx(C,w,u):lx(C,w,u);var F=w.alternate;F!==null&&(F.return=null),w.return=null}catch(Xe){ci(w,u,Xe)}}if(p=u.child,u.subtreeFlags&12854&&p!==null)p.return=u,be=p;else for(;be!==null;){u=be;try{var X=u.flags;if(X&32&&Ye&&dt(u.stateNode),X&512){var oe=u.alternate;if(oe!==null){var Se=oe.ref;Se!==null&&(typeof Se=="function"?Se(null):Se.current=null)}}if(X&8192)switch(u.tag){case 13:if(u.memoizedState!==null){var ke=u.alternate;(ke===null||ke.memoizedState===null)&&($m=Tn())}break;case 22:var lt=u.memoizedState!==null,Ke=u.alternate,Ot=Ke!==null&&Ke.memoizedState!==null;if(p=u,Ye){e:if(y=p,w=lt,C=null,Ye)for(var je=y;;){if(je.tag===5){if(C===null){C=je;var Wn=je.stateNode;w?Ut(Wn):Pe(je.stateNode,je.memoizedProps)}}else if(je.tag===6){if(C===null){var ji=je.stateNode;w?W(ji):ie(ji,je.memoizedProps)}}else if((je.tag!==22&&je.tag!==23||je.memoizedState===null||je===y)&&je.child!==null){je.child.return=je,je=je.child;continue}if(je===y)break;for(;je.sibling===null;){if(je.return===null||je.return===y)break e;C===je&&(C=null),je=je.return}C===je&&(C=null),je.sibling.return=je.return,je=je.sibling}}if(lt&&!Ot&&p.mode&1){be=p;for(var Q=p.child;Q!==null;){for(p=be=Q;be!==null;){y=be;var Y=y.child;switch(y.tag){case 0:case 11:case 14:case 15:Eo(4,y,y.return);break;case 1:Kf(y,y.return);var re=y.stateNode;if(typeof re.componentWillUnmount=="function"){var Ie=y.return;try{re.props=y.memoizedProps,re.state=y.memoizedState,re.componentWillUnmount()}catch(Xe){ci(y,Ie,Xe)}}break;case 5:Kf(y,y.return);break;case 22:if(y.memoizedState!==null){gx(p);continue}}Y!==null?(Y.return=y,be=Y):gx(p)}Q=Q.sibling}}}switch(X&4102){case 2:hx(u),u.flags&=-3;break;case 6:hx(u),u.flags&=-3,jm(u.alternate,u);break;case 4096:u.flags&=-4097;break;case 4100:u.flags&=-4097,jm(u.alternate,u);break;case 4:jm(u.alternate,u)}}catch(Xe){ci(u,u.return,Xe)}if(p=u.sibling,p!==null){p.return=u.return,be=p;break}be=u.return}}}function vA(a,u,p){be=a,px(a)}function px(a,u,p){for(var y=(a.mode&1)!==0;be!==null;){var w=be,C=w.child;if(w.tag===22&&y){var F=w.memoizedState!==null||Jf;if(!F){var X=w.alternate,oe=X!==null&&X.memoizedState!==null||Mo;X=Jf;var Se=Mo;if(Jf=F,(Mo=oe)&&!Se)for(be=w;be!==null;)F=be,oe=F.child,F.tag===22&&F.memoizedState!==null?vx(w):oe!==null?(oe.return=F,be=oe):vx(w);for(;C!==null;)be=C,px(C),C=C.sibling;be=w,Jf=X,Mo=Se}mx(a)}else w.subtreeFlags&8772&&C!==null?(C.return=w,be=C):mx(a)}}function mx(a){for(;be!==null;){var u=be;if(u.flags&8772){var p=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:Mo||gu(5,u);break;case 1:var y=u.stateNode;if(u.flags&4&&!Mo)if(p===null)y.componentDidMount();else{var w=u.elementType===u.type?p.memoizedProps:rr(u.type,p.memoizedProps);y.componentDidUpdate(w,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var C=u.updateQueue;C!==null&&u_(u,C,y);break;case 3:var F=u.updateQueue;if(F!==null){if(p=null,u.child!==null)switch(u.child.tag){case 5:p=ae(u.child.stateNode);break;case 1:p=u.child.stateNode}u_(u,F,p)}break;case 5:var X=u.stateNode;p===null&&u.flags&4&&fe(X,u.type,u.memoizedProps,u);break;case 6:break;case 4:break;case 12:break;case 13:if(ge&&u.memoizedState===null){var oe=u.alternate;if(oe!==null){var Se=oe.memoizedState;if(Se!==null){var ke=Se.dehydrated;ke!==null&&ce(ke)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Mo||u.flags&512&&Gm(u)}catch(lt){ci(u,u.return,lt)}}if(u===a){be=null;break}if(p=u.sibling,p!==null){p.return=u.return,be=p;break}be=u.return}}function gx(a){for(;be!==null;){var u=be;if(u===a){be=null;break}var p=u.sibling;if(p!==null){p.return=u.return,be=p;break}be=u.return}}function vx(a){for(;be!==null;){var u=be;try{switch(u.tag){case 0:case 11:case 15:var p=u.return;try{gu(4,u)}catch(oe){ci(u,p,oe)}break;case 1:var y=u.stateNode;if(typeof y.componentDidMount=="function"){var w=u.return;try{y.componentDidMount()}catch(oe){ci(u,w,oe)}}var C=u.return;try{Gm(u)}catch(oe){ci(u,C,oe)}break;case 5:var F=u.return;try{Gm(u)}catch(oe){ci(u,F,oe)}}}catch(oe){ci(u,u.return,oe)}if(u===a){be=null;break}var X=u.sibling;if(X!==null){X.return=u.return,be=X;break}be=u.return}}var $f=0,eh=1,th=2,nh=3,ih=4;if(typeof Symbol=="function"&&Symbol.for){var vu=Symbol.for;$f=vu("selector.component"),eh=vu("selector.has_pseudo_class"),th=vu("selector.role"),nh=vu("selector.test_id"),ih=vu("selector.text")}function Ym(a){var u=de(a);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(o(364));return u}if(a=xt(a),a===null)throw Error(o(362));return a.stateNode.current}function qm(a,u){switch(u.$$typeof){case $f:if(a.type===u.value)return!0;break;case eh:e:{u=u.value,a=[a,0];for(var p=0;p<a.length;){var y=a[p++],w=a[p++],C=u[w];if(y.tag!==5||!I(y)){for(;C!=null&&qm(y,C);)w++,C=u[w];if(w===u.length){u=!0;break e}else for(y=y.child;y!==null;)a.push(y,w),y=y.sibling}}u=!1}return u;case th:if(a.tag===5&&le(a.stateNode,u.value))return!0;break;case ih:if((a.tag===5||a.tag===6)&&(a=k(a),a!==null&&0<=a.indexOf(u.value)))return!0;break;case nh:if(a.tag===5&&(a=a.memoizedProps["data-testname"],typeof a=="string"&&a.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Zm(a){switch(a.$$typeof){case $f:return"<"+(L(a.value)||"Unknown")+">";case eh:return":has("+(Zm(a)||"")+")";case th:return'[role="'+a.value+'"]';case ih:return'"'+a.value+'"';case nh:return'[data-testname="'+a.value+'"]';default:throw Error(o(365))}}function yx(a,u){var p=[];a=[a,0];for(var y=0;y<a.length;){var w=a[y++],C=a[y++],F=u[C];if(w.tag!==5||!I(w)){for(;F!=null&&qm(w,F);)C++,F=u[C];if(C===u.length)p.push(w);else for(w=w.child;w!==null;)a.push(w,C),w=w.sibling}}return p}function Jm(a,u){if(!et)throw Error(o(363));a=Ym(a),a=yx(a,u),u=[],a=Array.from(a);for(var p=0;p<a.length;){var y=a[p++];if(y.tag===5)I(y)||u.push(y.stateNode);else for(y=y.child;y!==null;)a.push(y),y=y.sibling}return u}var yA=Math.ceil,rh=l.ReactCurrentDispatcher,Km=l.ReactCurrentOwner,ln=l.ReactCurrentBatchConfig,_t=0,pn=null,mn=null,Nn=0,Ci=0,Ra=at(0),xn=0,yu=null,Pa=0,sh=0,Qm=0,_u=null,li=null,$m=0,eg=1/0;function ba(){eg=Tn()+500}var oh=!1,tg=null,Ts=null,ah=!1,Cs=null,lh=0,xu=0,ng=null,uh=-1,ch=0;function $n(){return _t&6?Tn():uh!==-1?uh:uh=Tn()}function As(a){return a.mode&1?_t&2&&Nn!==0?Nn&-Nn:eA.transition!==null?(ch===0&&(a=Ef,Ef<<=1,!(Ef&4194240)&&(Ef=64),ch=a),ch):(a=Ct,a!==0?a:me()):1}function Wi(a,u,p){if(50<xu)throw xu=0,ng=null,Error(o(185));var y=fh(a,u);return y===null?null:(iu(y,u,p),(!(_t&2)||y!==pn)&&(y===pn&&(!(_t&2)&&(sh|=u),xn===4&&Rs(y,Nn)),ui(y,p),u===1&&_t===0&&!(a.mode&1)&&(ba(),Af&&Rr())),y)}function fh(a,u){a.lanes|=u;var p=a.alternate;for(p!==null&&(p.lanes|=u),p=a,a=a.return;a!==null;)a.childLanes|=u,p=a.alternate,p!==null&&(p.childLanes|=u),p=a,a=a.return;return p.tag===3?p.stateNode:null}function ui(a,u){var p=a.callbackNode;XC(a,u);var y=Tf(a,a===pn?Nn:0);if(y===0)p!==null&&r_(p),a.callbackNode=null,a.callbackPriority=0;else if(u=y&-y,a.callbackPriority!==u){if(p!=null&&r_(p),u===1)a.tag===0?$C(xx.bind(null,a)):s_(xx.bind(null,a)),Ue?Oe(function(){_t===0&&Rr()}):cm(fm,Rr),p=null;else{switch(i_(y)){case 1:p=fm;break;case 4:p=ZC;break;case 16:p=hm;break;case 536870912:p=JC;break;default:p=hm}p=Px(p,_x.bind(null,a))}a.callbackPriority=u,a.callbackNode=p}}function _x(a,u){if(uh=-1,ch=0,_t&6)throw Error(o(327));var p=a.callbackNode;if(Co()&&a.callbackNode!==p)return null;var y=Tf(a,a===pn?Nn:0);if(y===0)return null;if(y&30||y&a.expiredLanes||u)u=hh(a,y);else{u=y;var w=_t;_t|=2;var C=Ex();(pn!==a||Nn!==u)&&(ba(),wo(a,u));do try{SA();break}catch(X){Mx(a,X)}while(1);mm(),rh.current=C,_t=w,mn!==null?u=0:(pn=null,Nn=0,u=xn)}if(u!==0){if(u===2&&(w=am(a),w!==0&&(y=w,u=ig(a,w))),u===1)throw p=yu,wo(a,0),Rs(a,y),ui(a,Tn()),p;if(u===6)Rs(a,y);else{if(w=a.current.alternate,!(y&30)&&!_A(w)&&(u=hh(a,y),u===2&&(C=am(a),C!==0&&(y=C,u=ig(a,C))),u===1))throw p=yu,wo(a,0),Rs(a,y),ui(a,Tn()),p;switch(a.finishedWork=w,a.finishedLanes=y,u){case 0:case 1:throw Error(o(345));case 2:To(a,li);break;case 3:if(Rs(a,y),(y&130023424)===y&&(u=$m+500-Tn(),10<u)){if(Tf(a,0)!==0)break;if(w=a.suspendedLanes,(w&y)!==y){$n(),a.pingedLanes|=a.suspendedLanes&w;break}a.timeoutHandle=Ce(To.bind(null,a,li),u);break}To(a,li);break;case 4:if(Rs(a,y),(y&4194240)===y)break;for(u=a.eventTimes,w=-1;0<y;){var F=31-ir(y);C=1<<F,F=u[F],F>w&&(w=F),y&=~C}if(y=w,y=Tn()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*yA(y/1960))-y,10<y){a.timeoutHandle=Ce(To.bind(null,a,li),y);break}To(a,li);break;case 5:To(a,li);break;default:throw Error(o(329))}}}return ui(a,Tn()),a.callbackNode===p?_x.bind(null,a):null}function ig(a,u){var p=_u;return a.current.memoizedState.isDehydrated&&(wo(a,u).flags|=256),a=hh(a,u),a!==2&&(u=li,li=p,u!==null&&rg(u)),a}function rg(a){li===null?li=a:li.push.apply(li,a)}function _A(a){for(var u=a;;){if(u.flags&16384){var p=u.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var w=p[y],C=w.getSnapshot;w=w.value;try{if(!Ar(C(),w))return!1}catch{return!1}}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Rs(a,u){for(u&=~Qm,u&=~sh,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var p=31-ir(u),y=1<<p;a[p]=-1,u&=~y}}function xx(a){if(_t&6)throw Error(o(327));Co();var u=Tf(a,0);if(!(u&1))return ui(a,Tn()),null;var p=hh(a,u);if(a.tag!==0&&p===2){var y=am(a);y!==0&&(u=y,p=ig(a,y))}if(p===1)throw p=yu,wo(a,0),Rs(a,u),ui(a,Tn()),p;if(p===6)throw Error(o(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,To(a,li),ui(a,Tn()),null}function Sx(a){Cs!==null&&Cs.tag===0&&!(_t&6)&&Co();var u=_t;_t|=1;var p=ln.transition,y=Ct;try{if(ln.transition=null,Ct=1,a)return a()}finally{Ct=y,ln.transition=p,_t=u,!(_t&6)&&Rr()}}function sg(){Ci=Ra.current,Lt(Ra)}function wo(a,u){a.finishedWork=null,a.finishedLanes=0;var p=a.timeoutHandle;if(p!==$e&&(a.timeoutHandle=$e,ot(p)),mn!==null)for(p=mn.return;p!==null;){var y=p;switch(Mm(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Ms();break;case 3:Ca(),Lt(dn),Lt(_n),Pm();break;case 5:Am(y);break;case 4:Ca();break;case 13:Lt(qt);break;case 19:Lt(qt);break;case 10:gm(y.type._context);break;case 22:case 23:sg()}p=p.return}if(pn=a,mn=a=Ps(a.current,null),Nn=Ci=u,xn=0,yu=null,Qm=sh=Pa=0,li=_u=null,Pr!==null){for(u=0;u<Pr.length;u++)if(p=Pr[u],y=p.interleaved,y!==null){p.interleaved=null;var w=y.next,C=p.pending;if(C!==null){var F=C.next;C.next=w,y.next=F}p.pending=y}Pr=null}return a}function Mx(a,u){do{var p=mn;try{if(mm(),kf.current=Wf,zf){for(var y=nn.memoizedState;y!==null;){var w=y.queue;w!==null&&(w.pending=null),y=y.next}zf=!1}if(Aa=0,Cn=Hn=nn=null,uu=!1,cu=0,Km.current=null,p===null||p.return===null){xn=1,yu=u,mn=null;break}e:{var C=a,F=p.return,X=p,oe=u;if(u=Nn,X.flags|=32768,oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Se=oe,ke=X,lt=ke.tag;if(!(ke.mode&1)&&(lt===0||lt===11||lt===15)){var Ke=ke.alternate;Ke?(ke.updateQueue=Ke.updateQueue,ke.memoizedState=Ke.memoizedState,ke.lanes=Ke.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var Ot=G_(F);if(Ot!==null){Ot.flags&=-257,W_(Ot,F,X,C,u),Ot.mode&1&&V_(C,Se,u),u=Ot,oe=Se;var je=u.updateQueue;if(je===null){var Wn=new Set;Wn.add(oe),u.updateQueue=Wn}else je.add(oe);break e}else{if(!(u&1)){V_(C,Se,u),og();break e}oe=Error(o(426))}}else if(jt&&X.mode&1){var ji=G_(F);if(ji!==null){!(ji.flags&65536)&&(ji.flags|=256),W_(ji,F,X,C,u),Tm(oe);break e}}C=oe,xn!==4&&(xn=2),_u===null?_u=[C]:_u.push(C),oe=Om(oe,X),X=F;do{switch(X.tag){case 3:X.flags|=65536,u&=-u,X.lanes|=u;var Q=B_(X,oe,u);l_(X,Q);break e;case 1:C=oe;var Y=X.type,re=X.stateNode;if(!(X.flags&128)&&(typeof Y.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(Ts===null||!Ts.has(re)))){X.flags|=65536,u&=-u,X.lanes|=u;var Ie=H_(X,C,u);l_(X,Ie);break e}}X=X.return}while(X!==null)}Tx(p)}catch(Xe){u=Xe,mn===p&&p!==null&&(mn=p=p.return);continue}break}while(1)}function Ex(){var a=rh.current;return rh.current=Wf,a===null?Wf:a}function og(){(xn===0||xn===3||xn===2)&&(xn=4),pn===null||!(Pa&268435455)&&!(sh&268435455)||Rs(pn,Nn)}function hh(a,u){var p=_t;_t|=2;var y=Ex();pn===a&&Nn===u||wo(a,u);do try{xA();break}catch(w){Mx(a,w)}while(1);if(mm(),_t=p,rh.current=y,mn!==null)throw Error(o(261));return pn=null,Nn=0,xn}function xA(){for(;mn!==null;)wx(mn)}function SA(){for(;mn!==null&&!YC();)wx(mn)}function wx(a){var u=Rx(a.alternate,a,Ci);a.memoizedProps=a.pendingProps,u===null?Tx(a):mn=u,Km.current=null}function Tx(a){var u=a;do{var p=u.alternate;if(a=u.return,u.flags&32768){if(p=dA(p,u),p!==null){p.flags&=32767,mn=p;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{xn=6,mn=null;return}}else if(p=cA(p,u,Ci),p!==null){mn=p;return}if(u=u.sibling,u!==null){mn=u;return}mn=u=a}while(u!==null);xn===0&&(xn=5)}function To(a,u){var p=Ct,y=ln.transition;try{ln.transition=null,Ct=1,MA(a,u,p)}finally{ln.transition=y,Ct=p}return null}function MA(a,u,p){do Co();while(Cs!==null);if(_t&6)throw Error(o(327));var y=a.finishedWork,w=a.finishedLanes;if(y===null)return null;if(a.finishedWork=null,a.finishedLanes=0,y===a.current)throw Error(o(177));a.callbackNode=null,a.callbackPriority=0;var C=y.lanes|y.childLanes;if(jC(a,C),a===pn&&(mn=pn=null,Nn=0),!(y.subtreeFlags&2064)&&!(y.flags&2064)||ah||(ah=!0,Px(hm,function(){return Co(),null})),C=(y.flags&15990)!==0,y.subtreeFlags&15990||C){C=ln.transition,ln.transition=null;var F=Ct;Ct=1;var X=_t;_t|=4,Km.current=null,mA(a,y),gA(a,y),z(a.containerInfo),a.current=y,vA(y),qC(),_t=X,Ct=F,ln.transition=C}else a.current=y;if(ah&&(ah=!1,Cs=a,lh=w),C=a.pendingLanes,C===0&&(Ts=null),KC(y.stateNode),ui(a,Tn()),u!==null)for(p=a.onRecoverableError,y=0;y<u.length;y++)p(u[y]);if(oh)throw oh=!1,a=tg,tg=null,a;return lh&1&&a.tag!==0&&Co(),C=a.pendingLanes,C&1?a===ng?xu++:(xu=0,ng=a):xu=0,Rr(),null}function Co(){if(Cs!==null){var a=i_(lh),u=ln.transition,p=Ct;try{if(ln.transition=null,Ct=16>a?16:a,Cs===null)var y=!1;else{if(a=Cs,Cs=null,lh=0,_t&6)throw Error(o(331));var w=_t;for(_t|=4,be=a.current;be!==null;){var C=be,F=C.child;if(be.flags&16){var X=C.deletions;if(X!==null){for(var oe=0;oe<X.length;oe++){var Se=X[oe];for(be=Se;be!==null;){var ke=be;switch(ke.tag){case 0:case 11:case 15:Eo(8,ke,C)}var lt=ke.child;if(lt!==null)lt.return=ke,be=lt;else for(;be!==null;){ke=be;var Ke=ke.sibling,Ot=ke.return;if(ux(ke),ke===Se){be=null;break}if(Ke!==null){Ke.return=Ot,be=Ke;break}be=Ot}}}var je=C.alternate;if(je!==null){var Wn=je.child;if(Wn!==null){je.child=null;do{var ji=Wn.sibling;Wn.sibling=null,Wn=ji}while(Wn!==null)}}be=C}}if(C.subtreeFlags&2064&&F!==null)F.return=C,be=F;else e:for(;be!==null;){if(C=be,C.flags&2048)switch(C.tag){case 0:case 11:case 15:Eo(9,C,C.return)}var Q=C.sibling;if(Q!==null){Q.return=C.return,be=Q;break e}be=C.return}}var Y=a.current;for(be=Y;be!==null;){F=be;var re=F.child;if(F.subtreeFlags&2064&&re!==null)re.return=F,be=re;else e:for(F=Y;be!==null;){if(X=be,X.flags&2048)try{switch(X.tag){case 0:case 11:case 15:gu(9,X)}}catch(Xe){ci(X,X.return,Xe)}if(X===F){be=null;break e}var Ie=X.sibling;if(Ie!==null){Ie.return=X.return,be=Ie;break e}be=X.return}}if(_t=w,Rr(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(Cf,a)}catch{}y=!0}return y}finally{Ct=p,ln.transition=u}}return!1}function Cx(a,u,p){u=Om(p,u),u=B_(a,u,1),ws(a,u),u=$n(),a=fh(a,1),a!==null&&(iu(a,1,u),ui(a,u))}function ci(a,u,p){if(a.tag===3)Cx(a,a,p);else for(;u!==null;){if(u.tag===3){Cx(u,a,p);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Ts===null||!Ts.has(y))){a=Om(p,a),a=H_(u,a,1),ws(u,a),a=$n(),u=fh(u,1),u!==null&&(iu(u,1,a),ui(u,a));break}}u=u.return}}function EA(a,u,p){var y=a.pingCache;y!==null&&y.delete(u),u=$n(),a.pingedLanes|=a.suspendedLanes&p,pn===a&&(Nn&p)===p&&(xn===4||xn===3&&(Nn&130023424)===Nn&&500>Tn()-$m?wo(a,0):Qm|=p),ui(a,u)}function Ax(a,u){u===0&&(a.mode&1?(u=wf,wf<<=1,!(wf&130023424)&&(wf=4194304)):u=1);var p=$n();a=fh(a,u),a!==null&&(iu(a,u,p),ui(a,p))}function wA(a){var u=a.memoizedState,p=0;u!==null&&(p=u.retryLane),Ax(a,p)}function TA(a,u){var p=0;switch(a.tag){case 13:var y=a.stateNode,w=a.memoizedState;w!==null&&(p=w.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(o(314))}y!==null&&y.delete(u),Ax(a,p)}var Rx;Rx=function(a,u,p){if(a!==null)if(a.memoizedProps!==u.pendingProps||dn.current)Ti=!0;else{if(!(a.lanes&p)&&!(u.flags&128))return Ti=!1,hA(a,u,p);Ti=!!(a.flags&131072)}else Ti=!1,jt&&u.flags&1048576&&p_(u,Df,u.index);switch(u.lanes=0,u.tag){case 2:var y=u.type;a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2),a=u.pendingProps;var w=en(u,_n.current);xa(u,p),w=Lm(null,u,y,a,w,p);var C=Im();return u.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,tn(y)?(C=!0,ya(u)):C=!1,u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,ym(u),w.updater=Nf,u.stateNode=w,w._reactInternals=u,xm(u,y,a,p),u=zm(null,u,y,!0,C,p)):(u.tag=0,jt&&C&&Sm(u),Qn(null,u,w,p),u=u.child),u;case 16:y=u.elementType;e:{switch(a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2),a=u.pendingProps,w=y._init,y=w(y._payload),u.type=y,w=u.tag=AA(y),a=rr(y,a),w){case 0:u=km(null,u,y,a,p);break e;case 1:u=Q_(null,u,y,a,p);break e;case 11:u=Y_(null,u,y,a,p);break e;case 14:u=q_(null,u,y,rr(y.type,a),p);break e}throw Error(o(306,y,""))}return u;case 0:return y=u.type,w=u.pendingProps,w=u.elementType===y?w:rr(y,w),km(a,u,y,w,p);case 1:return y=u.type,w=u.pendingProps,w=u.elementType===y?w:rr(y,w),Q_(a,u,y,w,p);case 3:e:{if($_(u),a===null)throw Error(o(387));y=u.pendingProps,C=u.memoizedState,w=C.element,a_(a,u),If(u,y,null,p);var F=u.memoizedState;if(y=F.element,ge&&C.isDehydrated)if(C={element:y,isDehydrated:!1,cache:F.cache,transitions:F.transitions},u.updateQueue.baseState=C,u.memoizedState=C,u.flags&256){w=Error(o(423)),u=ex(a,u,y,p,w);break e}else if(y!==w){w=Error(o(424)),u=ex(a,u,y,p,w);break e}else for(ge&&(wi=rm(u.stateNode.containerInfo),Ei=u,jt=!0,sr=null,ru=!1),p=x_(u,null,y,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Ea(),y===w){u=Jr(a,u,p);break e}Qn(a,u,y,p)}u=u.child}return u;case 5:return S_(u),a===null&&wm(u),y=u.type,w=u.pendingProps,C=a!==null?a.memoizedProps:null,F=w.children,Ee(y,w)?F=null:C!==null&&Ee(y,C)&&(u.flags|=32),K_(a,u),Qn(a,u,F,p),u.child;case 6:return a===null&&wm(u),null;case 13:return tx(a,u,p);case 4:return Cm(u,u.stateNode.containerInfo),y=u.pendingProps,a===null?u.child=wa(u,null,y,p):Qn(a,u,y,p),u.child;case 11:return y=u.type,w=u.pendingProps,w=u.elementType===y?w:rr(y,w),Y_(a,u,y,w,p);case 7:return Qn(a,u,u.pendingProps,p),u.child;case 8:return Qn(a,u,u.pendingProps.children,p),u.child;case 12:return Qn(a,u,u.pendingProps.children,p),u.child;case 10:e:{if(y=u.type._context,w=u.pendingProps,C=u.memoizedProps,F=w.value,o_(u,y,F),C!==null)if(Ar(C.value,F)){if(C.children===w.children&&!dn.current){u=Jr(a,u,p);break e}}else for(C=u.child,C!==null&&(C.return=u);C!==null;){var X=C.dependencies;if(X!==null){F=C.child;for(var oe=X.firstContext;oe!==null;){if(oe.context===y){if(C.tag===1){oe=jr(-1,p&-p),oe.tag=2;var Se=C.updateQueue;if(Se!==null){Se=Se.shared;var ke=Se.pending;ke===null?oe.next=oe:(oe.next=ke.next,ke.next=oe),Se.pending=oe}}C.lanes|=p,oe=C.alternate,oe!==null&&(oe.lanes|=p),vm(C.return,p,u),X.lanes|=p;break}oe=oe.next}}else if(C.tag===10)F=C.type===u.type?null:C.child;else if(C.tag===18){if(F=C.return,F===null)throw Error(o(341));F.lanes|=p,X=F.alternate,X!==null&&(X.lanes|=p),vm(F,p,u),F=C.sibling}else F=C.child;if(F!==null)F.return=C;else for(F=C;F!==null;){if(F===u){F=null;break}if(C=F.sibling,C!==null){C.return=F.return,F=C;break}F=F.return}C=F}Qn(a,u,w.children,p),u=u.child}return u;case 9:return w=u.type,y=u.pendingProps.children,xa(u,p),w=zi(w),y=y(w),u.flags|=1,Qn(a,u,y,p),u.child;case 14:return y=u.type,w=rr(y,u.pendingProps),w=rr(y.type,w),q_(a,u,y,w,p);case 15:return Z_(a,u,u.type,u.pendingProps,p);case 17:return y=u.type,w=u.pendingProps,w=u.elementType===y?w:rr(y,w),a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2),u.tag=1,tn(y)?(a=!0,ya(u)):a=!1,xa(u,p),h_(u,y,w),xm(u,y,w,p),zm(null,u,y,!0,a,p);case 19:return sx(a,u,p);case 22:return J_(a,u,p)}throw Error(o(156,u.tag))};function Px(a,u){return cm(a,u)}function CA(a,u,p,y){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(a,u,p,y){return new CA(a,u,p,y)}function ag(a){return a=a.prototype,!(!a||!a.isReactComponent)}function AA(a){if(typeof a=="function")return ag(a)?1:0;if(a!=null){if(a=a.$$typeof,a===E)return 11;if(a===x)return 14}return 2}function Ps(a,u){var p=a.alternate;return p===null?(p=Xi(a.tag,u,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=u,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&14680064,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,u=a.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p}function dh(a,u,p,y,w,C){var F=2;if(y=a,typeof a=="function")ag(a)&&(F=1);else if(typeof a=="string")F=5;else e:switch(a){case h:return Ao(p.children,w,C,u);case d:F=8,w|=8;break;case m:return a=Xi(12,p,u,w|2),a.elementType=m,a.lanes=C,a;case M:return a=Xi(13,p,u,w),a.elementType=M,a.lanes=C,a;case g:return a=Xi(19,p,u,w),a.elementType=g,a.lanes=C,a;case T:return ph(p,w,C,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case v:F=10;break e;case _:F=9;break e;case E:F=11;break e;case x:F=14;break e;case S:F=16,y=null;break e}throw Error(o(130,a==null?a:typeof a,""))}return u=Xi(F,p,u,w),u.elementType=a,u.type=y,u.lanes=C,u}function Ao(a,u,p,y){return a=Xi(7,a,y,u),a.lanes=p,a}function ph(a,u,p,y){return a=Xi(22,a,y,u),a.elementType=T,a.lanes=p,a.stateNode={},a}function lg(a,u,p){return a=Xi(6,a,null,u),a.lanes=p,a}function ug(a,u,p){return u=Xi(4,a.children!==null?a.children:[],a.key,u),u.lanes=p,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function RA(a,u,p,y,w){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=$e,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lm(0),this.expirationTimes=lm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lm(0),this.identifierPrefix=y,this.onRecoverableError=w,ge&&(this.mutableSourceEagerHydrationData=null)}function bx(a,u,p,y,w,C,F,X,oe){return a=new RA(a,u,p,X,oe),u===1?(u=1,C===!0&&(u|=8)):u=0,C=Xi(3,null,null,u),a.current=C,C.stateNode=a,C.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null},ym(C),a}function Lx(a){if(!a)return zn;a=a._reactInternals;e:{if(R(a)!==a||a.tag!==1)throw Error(o(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(tn(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(o(171))}if(a.tag===1){var p=a.type;if(tn(p))return va(a,p,u)}return u}function Ix(a){var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(o(188)):(a=Object.keys(a).join(","),Error(o(268,a)));return a=J(u),a===null?null:a.stateNode}function Nx(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<u?p:u}}function cg(a,u){Nx(a,u),(a=a.alternate)&&Nx(a,u)}function PA(a){return a=J(a),a===null?null:a.stateNode}function bA(){return null}return t.attemptContinuousHydration=function(a){if(a.tag===13){var u=$n();Wi(a,134217728,u),cg(a,134217728)}},t.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var u=$n(),p=As(a);Wi(a,p,u),cg(a,p)}},t.attemptSynchronousHydration=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var p=nu(u.pendingLanes);p!==0&&(um(u,p|1),ui(u,Tn()),!(_t&6)&&(ba(),Rr()))}break;case 13:var y=$n();Sx(function(){return Wi(a,1,y)}),cg(a,1)}},t.batchedUpdates=function(a,u){var p=_t;_t|=1;try{return a(u)}finally{_t=p,_t===0&&(ba(),Af&&Rr())}},t.createComponentSelector=function(a){return{$$typeof:$f,value:a}},t.createContainer=function(a,u,p,y,w,C,F){return bx(a,u,!1,null,p,y,w,C,F)},t.createHasPseudoClassSelector=function(a){return{$$typeof:eh,value:a}},t.createHydrationContainer=function(a,u,p,y,w,C,F,X,oe){return a=bx(p,y,!0,a,w,C,F,X,oe),a.context=Lx(null),p=a.current,y=$n(),w=As(p),C=jr(y,w),C.callback=u??null,ws(p,C),a.current.lanes=w,iu(a,w,y),ui(a,y),a},t.createPortal=function(a,u,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:y==null?null:""+y,children:a,containerInfo:u,implementation:p}},t.createRoleSelector=function(a){return{$$typeof:th,value:a}},t.createTestNameSelector=function(a){return{$$typeof:nh,value:a}},t.createTextSelector=function(a){return{$$typeof:ih,value:a}},t.deferredUpdates=function(a){var u=Ct,p=ln.transition;try{return ln.transition=null,Ct=16,a()}finally{Ct=u,ln.transition=p}},t.discreteUpdates=function(a,u,p,y,w){var C=Ct,F=ln.transition;try{return ln.transition=null,Ct=1,a(u,p,y,w)}finally{Ct=C,ln.transition=F,_t===0&&ba()}},t.findAllNodes=Jm,t.findBoundingRects=function(a,u){if(!et)throw Error(o(363));u=Jm(a,u),a=[];for(var p=0;p<u.length;p++)a.push(Xt(u[p]));for(u=a.length-1;0<u;u--){p=a[u];for(var y=p.x,w=y+p.width,C=p.y,F=C+p.height,X=u-1;0<=X;X--)if(u!==X){var oe=a[X],Se=oe.x,ke=Se+oe.width,lt=oe.y,Ke=lt+oe.height;if(y>=Se&&C>=lt&&w<=ke&&F<=Ke){a.splice(u,1);break}else if(y!==Se||p.width!==oe.width||Ke<C||lt>F){if(!(C!==lt||p.height!==oe.height||ke<y||Se>w)){Se>y&&(oe.width+=Se-y,oe.x=y),ke<w&&(oe.width=w-Se),a.splice(u,1);break}}else{lt>C&&(oe.height+=lt-C,oe.y=C),Ke<F&&(oe.height=F-lt),a.splice(u,1);break}}}return a},t.findHostInstance=Ix,t.findHostInstanceWithNoPortals=function(a){return a=G(a),a=a!==null?Z(a):null,a===null?null:a.stateNode},t.findHostInstanceWithWarning=function(a){return Ix(a)},t.flushControlled=function(a){var u=_t;_t|=1;var p=ln.transition,y=Ct;try{ln.transition=null,Ct=1,a()}finally{Ct=y,ln.transition=p,_t=u,_t===0&&(ba(),Rr())}},t.flushPassiveEffects=Co,t.flushSync=Sx,t.focusWithin=function(a,u){if(!et)throw Error(o(363));for(a=Ym(a),u=yx(a,u),u=Array.from(u),a=0;a<u.length;){var p=u[a++];if(!I(p)){if(p.tag===5&&_e(p.stateNode))return!0;for(p=p.child;p!==null;)u.push(p),p=p.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Ct},t.getFindAllNodesFailureDescription=function(a,u){if(!et)throw Error(o(363));var p=0,y=[];a=[Ym(a),0];for(var w=0;w<a.length;){var C=a[w++],F=a[w++],X=u[F];if((C.tag!==5||!I(C))&&(qm(C,X)&&(y.push(Zm(X)),F++,F>p&&(p=F)),F<u.length))for(C=C.child;C!==null;)a.push(C,F),C=C.sibling}if(p<u.length){for(a=[];p<u.length;p++)a.push(Zm(u[p]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+a.join(" > ")}return null},t.getPublicRootInstance=function(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return ae(a.child.stateNode);default:return a.child.stateNode}},t.injectIntoDevTools=function(a){if(a={bundleType:a.bundleType,version:a.version,rendererPackageName:a.rendererPackageName,rendererConfig:a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:PA,findFiberByHostInstance:a.findFiberByHostInstance||bA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")a=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)a=!0;else{try{Cf=u.inject(a),Cr=u}catch{}a=!!u.checkDCE}}return a},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(a,u,p,y){if(!et)throw Error(o(363));a=Jm(a,u);var w=xe(a,p,y).disconnect;return{disconnect:function(){w()}}},t.registerMutableSourceForHydration=function(a,u){var p=u._getVersion;p=p(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,p]:a.mutableSourceEagerHydrationData.push(u,p)},t.runWithPriority=function(a,u){var p=Ct;try{return Ct=a,u()}finally{Ct=p}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(a,u,p,y){var w=u.current,C=$n(),F=As(w);return p=Lx(p),u.context===null?u.context=p:u.pendingContext=p,u=jr(C,F),u.payload={element:a},y=y===void 0?null:y,y!==null&&(u.callback=y),ws(w,u),a=Wi(w,F,C),a!==null&&Lf(a,w,F),F},t};yC.exports=PO;var bO=yC.exports;const LO=d1(bO);var _C={exports:{}},xC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,H){var z=U.length;U.push(H);e:for(;0<z;){var te=z-1>>>1,B=U[te];if(0<r(B,H))U[te]=H,U[z]=B,z=te;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var H=U[0],z=U.pop();if(z!==H){U[0]=z;e:for(var te=0,B=U.length,he=B>>>1;te<he;){var se=2*(te+1)-1,Ee=U[se],ve=se+1,Ce=U[ve];if(0>r(Ee,z))ve<B&&0>r(Ce,Ee)?(U[te]=Ce,U[ve]=z,te=ve):(U[te]=Ee,U[se]=z,te=se);else if(ve<B&&0>r(Ce,z))U[te]=Ce,U[ve]=z,te=ve;else break e}}return H}function r(U,H){var z=U.sortIndex-H.sortIndex;return z!==0?z:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],f=[],h=1,d=null,m=3,v=!1,_=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var H=t(f);H!==null;){if(H.callback===null)i(f);else if(H.startTime<=U)i(f),H.sortIndex=H.expirationTime,e(c,H);else break;H=t(f)}}function T(U){if(E=!1,S(U),!_)if(t(c)!==null)_=!0,ae(A);else{var H=t(f);H!==null&&ne(T,H.startTime-U)}}function A(U,H){_=!1,E&&(E=!1,g(N),N=-1),v=!0;var z=m;try{for(S(H),d=t(c);d!==null&&(!(d.expirationTime>H)||U&&!G());){var te=d.callback;if(typeof te=="function"){d.callback=null,m=d.priorityLevel;var B=te(d.expirationTime<=H);H=n.unstable_now(),typeof B=="function"?d.callback=B:d===t(c)&&i(c),S(H)}else i(c);d=t(c)}if(d!==null)var he=!0;else{var se=t(f);se!==null&&ne(T,se.startTime-H),he=!1}return he}finally{d=null,m=z,v=!1}}var P=!1,L=null,N=-1,R=5,b=-1;function G(){return!(n.unstable_now()-b<R)}function J(){if(L!==null){var U=n.unstable_now();b=U;var H=!0;try{H=L(!0,U)}finally{H?j():(P=!1,L=null)}}else P=!1}var j;if(typeof x=="function")j=function(){x(J)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,$=Z.port2;Z.port1.onmessage=J,j=function(){$.postMessage(null)}}else j=function(){M(J,0)};function ae(U){L=U,P||(P=!0,j())}function ne(U,H){N=M(function(){U(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){_||v||(_=!0,ae(A))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(U){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var z=m;m=H;try{return U()}finally{m=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var z=m;m=U;try{return H()}finally{m=z}},n.unstable_scheduleCallback=function(U,H,z){var te=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?te+z:te):z=te,U){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=z+B,U={id:h++,callback:H,priorityLevel:U,startTime:z,expirationTime:B,sortIndex:-1},z>te?(U.sortIndex=z,e(f,U),t(c)===null&&U===t(f)&&(E?(g(N),N=-1):E=!0,ne(T,z-te))):(U.sortIndex=B,e(c,U),_||v||(_=!0,ae(A))),U},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(U){var H=m;return function(){var z=m;m=H;try{return U.apply(this,arguments)}finally{m=z}}}})(xC);_C.exports=xC;var P2=_C.exports;const IO=n=>typeof n=="object"&&typeof n.then=="function",Zo=[];function SC(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function MC(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of Zo)if(SC(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=Zo.indexOf(r);s!==-1&&Zo.splice(s,1)},promise:(IO(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(Zo.push(r),!t)throw r.promise}const NO=(n,e,t)=>MC(n,e,!1,t),UO=(n,e,t)=>void MC(n,e,!0,t),DO=n=>{if(n===void 0||n.length===0)Zo.splice(0,Zo.length);else{const e=Zo.find(t=>SC(n,t.keys,t.equal));e&&e.remove()}},t_={},OO=n=>void Object.assign(t_,n);function FO(n,e){function t(h,{args:d=[],attach:m,...v},_){let E=`${h[0].toUpperCase()}${h.slice(1)}`,M;if(h==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=v.object;M=nl(g,{type:h,root:_,attach:m,primitive:!0})}else{const g=t_[E];if(!g)throw new Error(`R3F: ${E} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");M=nl(new g(...d),{type:h,root:_,attach:m,memoizedProps:{args:d}})}return M.__r3f.attach===void 0&&(M instanceof ht?M.__r3f.attach="geometry":M instanceof kn&&(M.__r3f.attach="material")),E!=="inject"&&S0(M,v),M}function i(h,d){let m=!1;if(d){var v,_;(v=d.__r3f)!=null&&v.attach?x0(h,d,d.__r3f.attach):d.isObject3D&&h.isObject3D&&(h.add(d),m=!0),m||(_=h.__r3f)==null||_.objects.push(d),d.__r3f||nl(d,{}),d.__r3f.parent=h,f1(d),il(d)}}function r(h,d,m){let v=!1;if(d){var _,E;if((_=d.__r3f)!=null&&_.attach)x0(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){d.parent=h,d.dispatchEvent({type:"added"});const M=h.children.filter(x=>x!==d),g=M.indexOf(m);h.children=[...M.slice(0,g),d,...M.slice(g)],v=!0}v||(E=h.__r3f)==null||E.objects.push(d),d.__r3f||nl(d,{}),d.__r3f.parent=h,f1(d),il(d)}}function s(h,d,m=!1){h&&[...h].forEach(v=>o(d,v,m))}function o(h,d,m){if(d){var v,_,E;if(d.__r3f&&(d.__r3f.parent=null),(v=h.__r3f)!=null&&v.objects&&(h.__r3f.objects=h.__r3f.objects.filter(T=>T!==d)),(_=d.__r3f)!=null&&_.attach)U2(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){var M;h.remove(d),(M=d.__r3f)!=null&&M.root&&XO(d.__r3f.root,d)}const x=(E=d.__r3f)==null?void 0:E.primitive,S=m===void 0?d.dispose!==null&&!x:m;if(!x){var g;s((g=d.__r3f)==null?void 0:g.objects,d,S),s(d.children,d,S)}delete d.__r3f,S&&d.dispose&&d.type!=="Scene"&&P2.unstable_scheduleCallback(P2.unstable_IdlePriority,()=>{try{d.dispose()}catch{}}),il(h)}}function l(h,d,m,v){var _;const E=(_=h.__r3f)==null?void 0:_.parent;if(!E)return;const M=t(d,m,h.__r3f.root);if(h.children){for(const g of h.children)g.__r3f&&i(M,g);h.children=h.children.filter(g=>!g.__r3f)}h.__r3f.objects.forEach(g=>i(M,g)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(E,h),M.parent&&(M.__r3f.autoRemovedBeforeAppend=!0),i(E,M),M.raycast&&M.__r3f.eventCount&&M.__r3f.root.getState().internal.interaction.push(M),[v,v.alternate].forEach(g=>{g!==null&&(g.stateNode=M,g.ref&&(typeof g.ref=="function"?g.ref(M):g.ref.current=M))})}const c=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:LO({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,d)=>{if(!d)return;const m=h.getState().scene;m.__r3f&&(m.__r3f.root=h,i(m,d))},removeChildFromContainer:(h,d)=>{d&&o(h.getState().scene,d)},insertInContainerBefore:(h,d,m)=>{if(!d||!m)return;const v=h.getState().scene;v.__r3f&&r(v,d,m)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var d;return!!((d=h==null?void 0:h.__r3f)!=null?d:{}).handlers},prepareUpdate(h,d,m,v){if(h.__r3f.primitive&&v.object&&v.object!==h)return[!0];{const{args:_=[],children:E,...M}=v,{args:g=[],children:x,...S}=m;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((A,P)=>A!==g[P]))return[!0];const T=PC(h,M,S,!0);return T.changes.length?[!1,T]:null}},commitUpdate(h,[d,m],v,_,E,M){d?l(h,v,E,M):S0(h,m)},commitMount(h,d,m,v){var _;const E=(_=h.__r3f)!=null?_:{};h.raycast&&E.handlers&&E.eventCount&&h.__r3f.root.getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>nl(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var d;const{attach:m,parent:v}=(d=h.__r3f)!=null?d:{};m&&v&&U2(v,h,m),h.isObject3D&&(h.visible=!1),il(h)},unhideInstance(h,d){var m;const{attach:v,parent:_}=(m=h.__r3f)!=null?m:{};v&&_&&x0(_,h,v),(h.isObject3D&&d.visible==null||d.visible)&&(h.visible=!0),il(h)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():xl.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Gt.fun(performance.now)?performance.now:Gt.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Gt.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Gt.fun(clearTimeout)?clearTimeout:void 0}),applyProps:S0}}var b2,L2;const _0=n=>"colorSpace"in n||"outputColorSpace"in n,EC=()=>{var n;return(n=t_.ColorManagement)!=null?n:null},wC=n=>n&&n.isOrthographicCamera,kO=n=>n&&n.hasOwnProperty("current"),vf=typeof window<"u"&&((b2=window.document)!=null&&b2.createElement||((L2=window.navigator)==null?void 0:L2.product)==="ReactNative")?K.useLayoutEffect:K.useEffect;function TC(n){const e=K.useRef(n);return vf(()=>void(e.current=n),[n]),e}function zO({set:n}){return vf(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class CC extends K.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}CC.getDerivedStateFromError=()=>({error:!0});const AC="__default",I2=new Map,BO=n=>n&&!!n.memoized&&!!n.changes;function RC(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const zu=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Gt={obj:n=>n===Object(n)&&!Gt.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Gt.str(n)||Gt.num(n))return n===e;const s=Gt.obj(n);if(s&&i==="reference")return n===e;const o=Gt.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(l in r?e:n)if(!Gt.equ(n[l],e[l],{strict:r,objects:"reference"}))return!1}else for(l in r?e:n)if(n[l]!==e[l])return!1;if(Gt.und(l)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function HO(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function VO(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function nl(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function c1(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const N2=/-\d+$/;function x0(n,e,t){if(Gt.str(t)){if(N2.test(t)){const s=t.replace(N2,""),{target:o,key:l}=c1(n,s);Array.isArray(o[l])||(o[l]=[])}const{target:i,key:r}=c1(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function U2(n,e,t){var i,r;if(Gt.str(t)){const{target:s,key:o}=c1(n,t),l=e.__r3f.previousAttach;l===void 0?delete s[o]:s[o]=l}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function PC(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:l,...c}={},f=!1){var h;const d=(h=n==null?void 0:n.__r3f)!=null?h:{},m=Object.entries(r),v=[];if(f){const E=Object.keys(c);for(let M=0;M<E.length;M++)r.hasOwnProperty(E[M])||m.unshift([E[M],AC+"remove"])}m.forEach(([E,M])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&E==="object"||Gt.equ(M,c[E]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(E))return v.push([E,M,!0,[]]);let x=[];E.includes("-")&&(x=E.split("-")),v.push([E,M,!1,x]);for(const S in r){const T=r[S];S.startsWith(`${E}-`)&&v.push([S,T,!1,S.split("-")])}});const _={...r};return d.memoizedProps&&d.memoizedProps.args&&(_.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(_.attach=d.memoizedProps.attach),{memoized:_,changes:v}}function S0(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},o=s.root,l=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:c,changes:f}=BO(e)?e:PC(n,e),h=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=c);for(let m=0;m<f.length;m++){let[v,_,E,M]=f[m];if(_0(n)){const T="srgb",A="srgb-linear";v==="encoding"?(v="colorSpace",_=_===3001?T:A):v==="outputEncoding"&&(v="outputColorSpace",_=_===3001?T:A)}let g=n,x=g[v];if(M.length&&(x=M.reduce((S,T)=>S[T],n),!(x&&x.set))){const[S,...T]=M.reverse();g=T.reverse().reduce((A,P)=>A[P],n),v=S}if(_===AC+"remove")if(g.constructor){let S=I2.get(g.constructor);S||(S=new g.constructor,I2.set(g.constructor,S)),_=S[v]}else _=0;if(E)_?s.handlers[v]=_:delete s.handlers[v],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof ea)){if(Array.isArray(_))x.fromArray?x.fromArray(_):x.set(..._);else if(x.copy&&_&&_.constructor&&x.constructor===_.constructor)x.copy(_);else if(_!==void 0){const S=x instanceof Ne;!S&&x.setScalar?x.setScalar(_):x instanceof ea&&_ instanceof ea?x.mask=_.mask:x.set(_),!EC()&&!l.linear&&S&&x.convertSRGBToLinear()}}else if(g[v]=_,g[v]instanceof an&&g[v].format===pi&&g[v].type===Hr){const S=g[v];_0(S)&&_0(l.gl)?S.colorSpace=l.gl.outputColorSpace:S.encoding=l.gl.outputEncoding}il(n)}if(s.parent&&l.internal&&n.raycast&&h!==s.eventCount){const m=l.internal.interaction.indexOf(n);m>-1&&l.internal.interaction.splice(m,1),s.eventCount&&l.internal.interaction.push(n)}return!(f.length===1&&f[0][0]==="onUpdate")&&f.length&&(r=n.__r3f)!=null&&r.parent&&f1(n),n}function il(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function f1(n){n.onUpdate==null||n.onUpdate(n)}function GO(n,e){n.manual||(wC(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function _d(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function WO(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return xl.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return xl.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return xl.ContinuousEventPriority;default:return xl.DefaultEventPriority}}function bC(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function XO(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{bC(t.capturedMap,e,i,r)})}function jO(n){function e(c){const{internal:f}=n.getState(),h=c.offsetX-f.initialClick[0],d=c.offsetY-f.initialClick[1];return Math.round(Math.sqrt(h*h+d*d))}function t(c){return c.filter(f=>["Move","Over","Enter","Out","Leave"].some(h=>{var d;return(d=f.__r3f)==null?void 0:d.handlers["onPointer"+h]}))}function i(c,f){const h=n.getState(),d=new Set,m=[],v=f?f(h.internal.interaction):h.internal.interaction;for(let g=0;g<v.length;g++){const x=zu(v[g]);x&&(x.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(c,h);function _(g){const x=zu(g);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var S;x.events.compute==null||x.events.compute(c,x,(S=x.previousRoot)==null?void 0:S.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(g,!0):[]}let E=v.flatMap(_).sort((g,x)=>{const S=zu(g.object),T=zu(x.object);return!S||!T?g.distance-x.distance:T.events.priority-S.events.priority||g.distance-x.distance}).filter(g=>{const x=_d(g);return d.has(x)?!1:(d.add(x),!0)});h.events.filter&&(E=h.events.filter(E,h));for(const g of E){let x=g.object;for(;x;){var M;(M=x.__r3f)!=null&&M.eventCount&&m.push({...g,eventObject:x}),x=x.parent}}if("pointerId"in c&&h.internal.capturedMap.has(c.pointerId))for(let g of h.internal.capturedMap.get(c.pointerId).values())d.has(_d(g.intersection))||m.push(g.intersection);return m}function r(c,f,h,d){const m=n.getState();if(c.length){const v={stopped:!1};for(const _ of c){const E=zu(_.object)||m,{raycaster:M,pointer:g,camera:x,internal:S}=E,T=new O(g.x,g.y,0).unproject(x),A=b=>{var G,J;return(G=(J=S.capturedMap.get(b))==null?void 0:J.has(_.eventObject))!=null?G:!1},P=b=>{const G={intersection:_,target:f.target};S.capturedMap.has(b)?S.capturedMap.get(b).set(_.eventObject,G):S.capturedMap.set(b,new Map([[_.eventObject,G]])),f.target.setPointerCapture(b)},L=b=>{const G=S.capturedMap.get(b);G&&bC(S.capturedMap,_.eventObject,G,b)};let N={};for(let b in f){let G=f[b];typeof G!="function"&&(N[b]=G)}let R={..._,...N,pointer:g,intersections:c,stopped:v.stopped,delta:h,unprojectedPoint:T,ray:M.ray,camera:x,stopPropagation(){const b="pointerId"in f&&S.capturedMap.get(f.pointerId);if((!b||b.has(_.eventObject))&&(R.stopped=v.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(G=>G.eventObject===_.eventObject))){const G=c.slice(0,c.indexOf(_));s([...G,_])}},target:{hasPointerCapture:A,setPointerCapture:P,releasePointerCapture:L},currentTarget:{hasPointerCapture:A,setPointerCapture:P,releasePointerCapture:L},nativeEvent:f};if(d(R),v.stopped===!0)break}}return c}function s(c){const{internal:f}=n.getState();for(const h of f.hovered.values())if(!c.length||!c.find(d=>d.object===h.object&&d.index===h.index&&d.instanceId===h.instanceId)){const m=h.eventObject.__r3f,v=m==null?void 0:m.handlers;if(f.hovered.delete(_d(h)),m!=null&&m.eventCount){const _={...h,intersections:c};v.onPointerOut==null||v.onPointerOut(_),v.onPointerLeave==null||v.onPointerLeave(_)}}}function o(c,f){for(let h=0;h<f.length;h++){const d=f[h].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:h}=n.getState();"pointerId"in f&&h.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(f.pointerId)&&(h.capturedMap.delete(f.pointerId),s([]))})}}return function(h){const{onPointerMissed:d,internal:m}=n.getState();m.lastEvent.current=h;const v=c==="onPointerMove",_=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",M=i(h,v?t:void 0),g=_?e(h):0;c==="onPointerDown"&&(m.initialClick=[h.offsetX,h.offsetY],m.initialHits=M.map(S=>S.eventObject)),_&&!M.length&&g<=2&&(o(h,m.interaction),d&&d(h)),v&&s(M);function x(S){const T=S.eventObject,A=T.__r3f,P=A==null?void 0:A.handlers;if(A!=null&&A.eventCount)if(v){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const L=_d(S),N=m.hovered.get(L);N?N.stopped&&S.stopPropagation():(m.hovered.set(L,S),P.onPointerOver==null||P.onPointerOver(S),P.onPointerEnter==null||P.onPointerEnter(S))}P.onPointerMove==null||P.onPointerMove(S)}else{const L=P[c];L?(!_||m.initialHits.includes(T))&&(o(h,m.interaction.filter(N=>!m.initialHits.includes(N))),L(S)):_&&m.initialHits.includes(T)&&o(h,m.interaction.filter(N=>!m.initialHits.includes(N)))}}r(M,h,g,x)}}return{handlePointer:l}}const LC=n=>!!(n!=null&&n.render),IC=K.createContext(null),YO=(n,e)=>{const t=CO((l,c)=>{const f=new O,h=new O,d=new O;function m(g=c().camera,x=h,S=c().size){const{width:T,height:A,top:P,left:L}=S,N=T/A;x instanceof O?d.copy(x):d.set(...x);const R=g.getWorldPosition(f).distanceTo(d);if(wC(g))return{width:T/g.zoom,height:A/g.zoom,top:P,left:L,factor:1,distance:R,aspect:N};{const b=g.fov*Math.PI/180,G=2*Math.tan(b/2)*R,J=G*(T/A);return{width:J,height:G,top:P,left:L,factor:T/J,distance:R,aspect:N}}}let v;const _=g=>l(x=>({performance:{...x.performance,current:g}})),E=new pe;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(c(),g),advance:(g,x)=>e(g,x,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Ky,pointer:E,mouse:E,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=c();v&&clearTimeout(v),g.performance.current!==g.performance.min&&_(g.performance.min),v=setTimeout(()=>_(c().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:g=>l(x=>({...x,events:{...x.events,...g}})),setSize:(g,x,S,T,A)=>{const P=c().camera,L={width:g,height:x,top:T||0,left:A||0,updateStyle:S};l(N=>({size:L,viewport:{...N.viewport,...m(P,h,L)}}))},setDpr:g=>l(x=>{const S=RC(g);return{viewport:{...x.viewport,dpr:S,initialDpr:x.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const x=c().clock;x.stop(),x.elapsedTime=0,g!=="never"&&(x.start(),x.elapsedTime=0),l(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:K.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,x,S)=>{const T=c().internal;return T.priority=T.priority+(x>0?1:0),T.subscribers.push({ref:g,priority:x,store:S}),T.subscribers=T.subscribers.sort((A,P)=>A.priority-P.priority),()=>{const A=c().internal;A!=null&&A.subscribers&&(A.priority=A.priority-(x>0?1:0),A.subscribers=A.subscribers.filter(P=>P.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:l,size:c,viewport:f,gl:h,set:d}=t.getState();if(c!==r||f.dpr!==s){var m;r=c,s=f.dpr,GO(l,c),h.setPixelRatio(f.dpr);const v=(m=c.updateStyle)!=null?m:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(c.width,c.height,v)}l!==o&&(o=l,d(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};let xd,qO=new Set,ZO=new Set,JO=new Set;function M0(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Bu(n,e){switch(n){case"before":return M0(qO,e);case"after":return M0(ZO,e);case"tail":return M0(JO,e)}}let E0,w0;function T0(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),E0=e.internal.subscribers,xd=0;xd<E0.length;xd++)w0=E0[xd],w0.ref.current(w0.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function KO(n){let e=!1,t,i,r;function s(c){i=requestAnimationFrame(s),e=!0,t=0,Bu("before",c);for(const h of n.values()){var f;r=h.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((f=r.gl.xr)!=null&&f.isPresenting)&&(t+=T0(c,r))}if(Bu("after",c),t===0)return Bu("tail",c),e=!1,cancelAnimationFrame(i)}function o(c,f=1){var h;if(!c)return n.forEach(d=>o(d.store.getState()),f);(h=c.gl.xr)!=null&&h.isPresenting||!c.internal.active||c.frameloop==="never"||(c.internal.frames=Math.min(60,c.internal.frames+f),e||(e=!0,requestAnimationFrame(s)))}function l(c,f=!0,h,d){if(f&&Bu("before",c),h)T0(c,h,d);else for(const m of n.values())T0(c,m.store.getState());f&&Bu("after",c)}return{loop:s,invalidate:o,advance:l}}function NC(){const n=K.useContext(IC);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function QO(n=t=>t,e){return NC()(n,e)}function UC(n,e=0){const t=NC(),i=t.getState().internal.subscribe,r=TC(n);return vf(()=>i(r,e,t),[e,i,t]),null}function DC(n,e){return function(t,...i){const r=new t;return n&&n(r),Promise.all(i.map(s=>new Promise((o,l)=>r.load(s,c=>{c.scene&&Object.assign(c,HO(c.scene)),o(c)},e,c=>l(new Error(`Could not load ${s}: ${c.message})`))))))}}function xp(n,e,t,i){const r=Array.isArray(e)?e:[e],s=NO(DC(t,i),[n,...r],{equal:Gt.equ});return Array.isArray(e)?s:s[0]}xp.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return UO(DC(t),[n,...i])};xp.clear=function(n,e){const t=Array.isArray(e)?e:[e];return DO([n,...t])};const Hl=new Map,{invalidate:D2,advance:O2}=KO(Hl),{reconciler:Sp,applyProps:el}=FO(Hl,WO),tl={objects:"shallow",strict:!1},$O=(n,e)=>{const t=typeof n=="function"?n(e):n;return LC(t)?t:new Iy({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function e6(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function t6(n){const e=Hl.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||YO(D2,O2),o=t||Sp.createContainer(s,xl.ConcurrentRoot,null,!1,null,"",r,null);e||Hl.set(n,{fiber:o,store:s});let l,c=!1,f;return{configure(h={}){let{gl:d,size:m,scene:v,events:_,onCreated:E,shadows:M=!1,linear:g=!1,flat:x=!1,legacy:S=!1,orthographic:T=!1,frameloop:A="always",dpr:P=[1,2],performance:L,raycaster:N,camera:R,onPointerMissed:b}=h,G=s.getState(),J=G.gl;G.gl||G.set({gl:J=$O(d,n)});let j=G.raycaster;j||G.set({raycaster:j=new mC});const{params:Z,...$}=N||{};if(Gt.equ($,j,tl)||el(j,{...$}),Gt.equ(Z,j.params,tl)||el(j,{params:{...j.params,...Z}}),!G.camera||G.camera===f&&!Gt.equ(f,R,tl)){f=R;const te=R instanceof ef,B=te?R:T?new nf(0,0,0,0,.1,1e3):new bn(75,0,.1,1e3);te||(B.position.z=5,R&&el(B,R),!G.camera&&!(R!=null&&R.rotation)&&B.lookAt(0,0,0)),G.set({camera:B})}if(!G.scene){let te;v instanceof _p?te=v:(te=new _p,v&&el(te,v)),G.set({scene:nl(te)})}if(!G.xr){const te=(se,Ee)=>{const ve=s.getState();ve.frameloop!=="never"&&O2(se,!0,ve,Ee)},B=()=>{const se=s.getState();se.gl.xr.enabled=se.gl.xr.isPresenting,se.gl.xr.setAnimationLoop(se.gl.xr.isPresenting?te:null),se.gl.xr.isPresenting||D2(se)},he={connect(){const se=s.getState().gl;se.xr.addEventListener("sessionstart",B),se.xr.addEventListener("sessionend",B)},disconnect(){const se=s.getState().gl;se.xr.removeEventListener("sessionstart",B),se.xr.removeEventListener("sessionend",B)}};J.xr&&he.connect(),G.set({xr:he})}if(J.shadowMap){const te=J.shadowMap.enabled,B=J.shadowMap.type;if(J.shadowMap.enabled=!!M,Gt.boo(M))J.shadowMap.type=nc;else if(Gt.str(M)){var ae;const he={basic:pT,percentage:Vp,soft:nc,variance:fr};J.shadowMap.type=(ae=he[M])!=null?ae:nc}else Gt.obj(M)&&Object.assign(J.shadowMap,M);(te!==J.shadowMap.enabled||B!==J.shadowMap.type)&&(J.shadowMap.needsUpdate=!0)}const ne=EC();ne&&("enabled"in ne?ne.enabled=!S:"legacyMode"in ne&&(ne.legacyMode=S)),el(J,{outputEncoding:g?3e3:3001,toneMapping:x?vr:dy}),G.legacy!==S&&G.set(()=>({legacy:S})),G.linear!==g&&G.set(()=>({linear:g})),G.flat!==x&&G.set(()=>({flat:x})),d&&!Gt.fun(d)&&!LC(d)&&!Gt.equ(d,J,tl)&&el(J,d),_&&!G.events.handlers&&G.set({events:_(s)});const z=e6(n,m);return Gt.equ(z,G.size,tl)||G.setSize(z.width,z.height,z.updateStyle,z.top,z.left),P&&G.viewport.dpr!==RC(P)&&G.setDpr(P),G.frameloop!==A&&G.setFrameloop(A),G.onPointerMissed||G.set({onPointerMissed:b}),L&&!Gt.equ(L,G.performance,tl)&&G.set(te=>({performance:{...te.performance,...L}})),l=E,c=!0,this},render(h){return c||this.configure(),Sp.updateContainer(K.createElement(n6,{store:s,children:h,onCreated:l,rootElement:n}),o,null,()=>{}),s},unmount(){OC(n)}}}function n6({store:n,children:e,onCreated:t,rootElement:i}){return vf(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),K.createElement(IC.Provider,{value:n},e)}function OC(n,e){const t=Hl.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),Sp.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,l,c;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),VO(r),Hl.delete(n),e&&e(n)}catch{}},500)})}}Sp.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:K.version});function Mp(){return Mp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Mp.apply(this,arguments)}function h1(n,e,t){var i,r,s,o,l;e==null&&(e=100);function c(){var h=Date.now()-o;h<e&&h>=0?i=setTimeout(c,e-h):(i=null,t||(l=n.apply(s,r),s=r=null))}var f=function(){s=this,r=arguments,o=Date.now();var h=t&&!i;return i||(i=setTimeout(c,e)),h&&(l=n.apply(s,r),s=r=null),l};return f.clear=function(){i&&(clearTimeout(i),i=null)},f.flush=function(){i&&(l=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},f}h1.debounce=h1;var i6=h1;const F2=d1(i6);function r6(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,l]=K.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=K.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),f=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,d=K.useRef(!1);K.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[m,v,_]=K.useMemo(()=>{const x=()=>{if(!c.current.element)return;const{left:S,top:T,width:A,height:P,bottom:L,right:N,x:R,y:b}=c.current.element.getBoundingClientRect(),G={left:S,top:T,width:A,height:P,bottom:L,right:N,x:R,y:b};c.current.element instanceof HTMLElement&&r&&(G.height=c.current.element.offsetHeight,G.width=c.current.element.offsetWidth),Object.freeze(G),d.current&&!l6(c.current.lastBounds,G)&&l(c.current.lastBounds=G)};return[x,h?F2(x,h):x,f?F2(x,f):x]},[l,r,f,h]);function E(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",_,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function M(){c.current.element&&(c.current.resizeObserver=new s(_),c.current.resizeObserver.observe(c.current.element),t&&c.current.scrollContainers&&c.current.scrollContainers.forEach(x=>x.addEventListener("scroll",_,{capture:!0,passive:!0})))}const g=x=>{!x||x===c.current.element||(E(),c.current.element=x,c.current.scrollContainers=FC(x),M())};return o6(_,!!t),s6(v),K.useEffect(()=>{E(),M()},[t,_,v]),K.useEffect(()=>E,[]),[g,o,m]}function s6(n){K.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function o6(n,e){K.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function FC(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...FC(n.parentElement)]}const a6=["x","y","top","bottom","left","right","width","height"],l6=(n,e)=>a6.every(t=>n[t]===e[t]);var u6=Object.defineProperty,c6=Object.defineProperties,f6=Object.getOwnPropertyDescriptors,k2=Object.getOwnPropertySymbols,h6=Object.prototype.hasOwnProperty,d6=Object.prototype.propertyIsEnumerable,z2=(n,e,t)=>e in n?u6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,B2=(n,e)=>{for(var t in e||(e={}))h6.call(e,t)&&z2(n,t,e[t]);if(k2)for(var t of k2(e))d6.call(e,t)&&z2(n,t,e[t]);return n},p6=(n,e)=>c6(n,f6(e));function kC(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=kC(i,e,t);if(r)return r;i=e?null:i.sibling}}function zC(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const n_=zC(K.createContext(null));class BC extends K.Component{render(){return K.createElement(n_.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:H2,ReactCurrentDispatcher:V2}=K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function m6(){const n=K.useContext(n_);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=K.useId();return K.useMemo(()=>{for(const i of[H2==null?void 0:H2.current,n,n==null?void 0:n.alternate]){if(!i)continue;const r=kC(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function g6(){var n,e;const t=m6(),[i]=K.useState(()=>new Map);i.clear();let r=t;for(;r;){const s=(n=r.type)==null?void 0:n._context;s&&s!==n_&&!i.has(s)&&i.set(s,(e=V2==null?void 0:V2.current)==null?void 0:e.readContext(zC(s))),r=r.return}return i}function v6(){const n=g6();return K.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>K.createElement(e,null,K.createElement(t.Provider,p6(B2({},i),{value:n.get(t)}))),e=>K.createElement(BC,B2({},e))),[n])}const C0={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function y6(n){const{handlePointer:e}=jO(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(C0).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,l])=>{const[c,f]=C0[o];t.addEventListener(c,l,{passive:f})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[l]=C0[s];i.connected.removeEventListener(l,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const _6=K.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=y6,eventSource:l,eventPrefix:c,shadows:f,linear:h,flat:d,legacy:m,orthographic:v,frameloop:_,dpr:E,performance:M,raycaster:g,camera:x,onPointerMissed:S,onCreated:T,...A},P){K.useMemo(()=>OO(EO),[]);const L=v6(),[N,R]=r6({scroll:!0,debounce:{scroll:50,resize:0},...i}),b=K.useRef(null),G=K.useRef(null);K.useImperativeHandle(P,()=>b.current);const J=TC(S),[j,Z]=K.useState(!1),[$,ae]=K.useState(!1);if(j)throw j;if($)throw $;const ne=K.useRef(null);vf(()=>{const H=b.current;R.width>0&&R.height>0&&H&&(ne.current||(ne.current=t6(H)),ne.current.configure({gl:s,events:o,shadows:f,linear:h,flat:d,legacy:m,orthographic:v,frameloop:_,dpr:E,performance:M,raycaster:g,camera:x,size:R,onPointerMissed:(...z)=>J.current==null?void 0:J.current(...z),onCreated:z=>{z.events.connect==null||z.events.connect(l?kO(l)?l.current:l:G.current),c&&z.setEvents({compute:(te,B)=>{const he=te[c+"X"],se=te[c+"Y"];B.pointer.set(he/B.size.width*2-1,-(se/B.size.height)*2+1),B.raycaster.setFromCamera(B.pointer,B.camera)}}),T==null||T(z)}}),ne.current.render(K.createElement(L,null,K.createElement(CC,{set:ae},K.createElement(K.Suspense,{fallback:K.createElement(zO,{set:Z})},e)))))}),K.useEffect(()=>{const H=b.current;if(H)return()=>OC(H)},[]);const U=l?"none":"auto";return K.createElement("div",Mp({ref:G,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:U,...r}},A),K.createElement("div",{ref:N,style:{width:"100%",height:"100%"}},K.createElement("canvas",{ref:b,style:{display:"block"}},t)))}),x6=K.forwardRef(function(e,t){return K.createElement(BC,null,K.createElement(_6,Mp({},e,{ref:t})))});var Hd=`uniform float uPixelRatio;\r
uniform float uSize;\r
uniform float aScale;

void main(){\r
    vec4 modelPosition = modelMatrix * vec4(position, 1.0);\r
    vec4 viewPosition = viewMatrix * modelPosition;\r
    vec4 projectionPosition = projectionMatrix * viewPosition;

    gl_Position = projectionPosition;

    gl_PointSize = uSize * aScale * uPixelRatio;\r
    gl_PointSize *= (1.0 / - viewPosition.z);\r
}`,Vd=`uniform float cRed;\r
uniform float cGreen;\r
uniform float cBlue;

void main(){\r
    float distanceToCenter = distance(gl_PointCoord, vec2(0.5));\r
    float strength = 0.05 / distanceToCenter - 0.05 * 2.0;\r
    gl_FragColor = vec4(cRed, cGreen, cBlue, strength);\r
}`;console.log(Vd);console.log(Hd);const S6=()=>{const n=K.useRef(),e=xp(a1,"src/assets/img/textures/moonr.jpg"),t=xp(a1,"src/assets/img/textures/moon_normalr.jpg"),{camera:i}=QO();return K.useEffect(()=>{i.position.set(-2,0,5)},[]),UC(()=>{n.current.rotation.y+=.001}),Ve.jsxs("mesh",{ref:n,children:[Ve.jsx("sphereBufferGeometry",{args:[2,80,80]}),Ve.jsx("meshStandardMaterial",{map:e,normalMap:t,color:"#a2a2a2"})]})},M6=()=>{const n=K.useRef(),{theme:e,setTheme:t,language:i,setLanguage:r}=K.useContext(Kc),[s,o]=K.useState(new Ui({depthWrite:!1,uniforms:{uPixelRatio:{value:Math.min(window.devicePixelRatio,2)},uSize:{value:800},cRed:{value:1},cGreen:{value:1},cBlue:{value:1},aScale:{value:2}},vertexShader:Hd,fragmentShader:Vd,transparent:!0,blending:Al})),l=new ht,c=[];for(let f=0;f<3e3;f++){const h=Math.random()*2e3-1e3,d=Math.random()*2e3-1e3,m=Math.random()*2e3-1500;c.push(h,d,m)}return l.setAttribute("position",new He(c,3)),UC(()=>{n.current.rotation.y+=.001}),K.useEffect(()=>{e==="dark"&&o(new Ui({depthWrite:!1,uniforms:{uPixelRatio:{value:Math.min(window.devicePixelRatio,2)},uSize:{value:800},cRed:{value:1},cGreen:{value:1},cBlue:{value:1},aScale:{value:2}},vertexShader:Hd,fragmentShader:Vd,transparent:!0,blending:Al})),e==="light"&&o(new Ui({depthWrite:!1,uniforms:{uPixelRatio:{value:Math.min(window.devicePixelRatio,2)},uSize:{value:900},cRed:{value:0},cGreen:{value:0},cBlue:{value:0},aScale:{value:6}},vertexShader:Hd,fragmentShader:Vd,transparent:!0,blending:Al}))},[e]),Ve.jsx("group",{ref:n,children:Ve.jsx("points",{geometry:l,material:s})})},E6=()=>Ve.jsxs(x6,{children:[Ve.jsx("ambientLight",{intensity:1.2,color:"#ffffff"}),Ve.jsx("directionalLight",{intensity:1,position:[-20,-10,10],color:"white"}),Ve.jsx(S6,{}),Ve.jsx(M6,{})]}),w6=()=>{const{theme:n,setTheme:e,language:t,setLanguage:i}=K.useContext(Kc);return Ve.jsx("div",{className:`main-container ${n}`,children:Ve.jsxs("div",{className:"home",children:[Ve.jsxs("div",{className:"content",children:[Ve.jsx("span",{className:"hi",children:"Hi, I am"}),Ve.jsxs("div",{className:"name",children:[Ve.jsx(g4,{className:"icon icon-left"}),Ve.jsx("span",{className:"text",children:"Luis Zapata"}),Ve.jsx(v4,{className:"icon icon-right"})]}),Ve.jsx("p",{className:"description",children:"I am a front-end developer, back-end developer and soon to be data scientist."}),Ve.jsx("p",{className:"enjoy",children:"Enjoy your trip!"})]}),Ve.jsx("div",{className:"model-3d",children:Ve.jsx(E6,{className:"content"})})]})})},T6=()=>Ve.jsx(Ve.Fragment,{children:Ve.jsx(l4,{children:Ve.jsx(e4,{basename:"/LuisZapataDev/",children:Ve.jsx(Zb,{children:Ve.jsx(Mv,{element:Ve.jsx(m4,{}),children:Ve.jsx(Mv,{index:!0,element:Ve.jsx(w6,{})})})})})})});A0.createRoot(document.getElementById("root")).render(Ve.jsx(Q2.StrictMode,{children:Ve.jsx(T6,{})}));
